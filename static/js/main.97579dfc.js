/*! For license information please see main.97579dfc.js.LICENSE.txt */
(()=>{"use strict";var e={463:(e,t,n)=>{var r=n(791),i=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),E=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function q(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case E:return"Portal";case T:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ie=null,Se=null;function Te(e){if(e=_i(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=bi(t),Ee(e.stateNode,e.type,t))}}function ke(e){Ie?Se?Se.push(e):Se=[e]:Ie=e}function Ce(){if(Ie){var e=Ie,t=Se;if(Se=Ie=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function xe(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return xe(e,t,n)}finally{Ae=!1,(null!==Ie||null!==Se)&&(Ne(),Ce())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function qe(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,Et,It,St,Tt,kt=!1,Ct=[],xt=null,Nt=null,At=null,Rt=new Map,Pt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Tt(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){kt=!1,null!==xt&&Ut(xt)&&(xt=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(jt),Pt.forEach(jt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return qt(t,e)}if(0<Ct.length){qt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&qt(xt,e),null!==Nt&&qt(Nt,e),null!==At&&qt(At,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var Bt=w.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=_t,s=Bt.transition;Bt.transition=null;try{_t=1,Gt(e,t,n,r)}finally{_t=i,Bt.transition=s}}function Kt(e,t,n,r){var i=_t,s=Bt.transition;Bt.transition=null;try{_t=4,Gt(e,t,n,r)}finally{_t=i,Bt.transition=s}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=_i(i);if(null!==s&&bt(s),null===(s=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=be(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(vn),wn=sn(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Tn(){return Sn}var kn=F({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(kn),xn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Rn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Hn(e,t,n,r){ke(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(wi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,be(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,_r=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},Ir={},Sr={};function Tr(e){if(Ir[e])return Ir[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Ir[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var kr=Tr("animationend"),Cr=Tr("animationiteration"),xr=Tr("animationstart"),Nr=Tr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),l(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Or=Rr[Dr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(kr,"onAnimationEnd"),Pr(Cr,"onAnimationIteration"),Pr(xr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(qe.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[qr]){e[qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch($t(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Re((function(){var r=s,i=be(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case kr:case Cr:case xr:l=yn;break;case Nr:l=An;break;case"scroll":l=dn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Pe(p,d))&&u.push(Hr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:wi(l),f=null==c?a:wi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=d;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=$n;else if(Wn(a))if(Jn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?wi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,wr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(o,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else zn?Vn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==_?"onCompositionEnd"===_&&zn&&(v=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Kr(r,_)).length&&(_=new wn(_,e,null,n,i),o.push({event:_,listeners:y}),v?_.data=v:null!==(v=qn(n))&&(_.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Ur(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=Pe(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function bi(e){return e[fi]||null}var Ei=[],Ii=-1;function Si(e){return{current:e}}function Ti(e){0>Ii||(e.current=Ei[Ii],Ei[Ii]=null,Ii--)}function ki(e,t){Ii++,Ei[Ii]=e.current,e.current=t}var Ci={},xi=Si(Ci),Ni=Si(!1),Ai=Ci;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ti(Ni),Ti(xi)}function Oi(e,t,n){if(xi.current!==Ci)throw Error(s(168));ki(xi,t),ki(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,B(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ai=xi.current,ki(xi,e),ki(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ni),Ti(xi),ki(xi,e)):Ti(Ni),ki(Ni,n)}var Ui=null,ji=!1,Vi=!1;function qi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=_t;try{var n=Ui;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,zi),i}finally{_t=t,Vi=!1}}return null}var Bi=[],Wi=0,Hi=null,Ki=0,Gi=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){Bi[Wi++]=Ki,Bi[Wi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=$i,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else $i=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=Bi[--Wi],Bi[Wi]=null,Ki=Bi[--Wi],Bi[Wi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=w.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=Si(null),vs=null,_s=null,ws=null;function bs(){ws=_s=vs=null}function Es(e){var t=ys.current;Ti(ys),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ss(e,t){vs=e,ws=_s=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(ws!==e)if(e={context:e,memoizedValue:t,next:null},null===_s){if(null===vs)throw Error(s(308));_s=e,vs.dependencies={lanes:0,firstContext:e}}else _s=_s.next=e;return t}var ks=null;function Cs(e){null===ks?ks=[e]:ks.push(e)}function xs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Cs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ns(e,r)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ps(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ns(e,n)}return null===(i=r.interleaved)?(t.next=t,Cs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ns(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:As=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var js=(new r.Component).refs;function Vs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var qs={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ds(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ds(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ds(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Os(e,i,r))&&(rc(t,e,r,n),Ls(t,e,r))}};function zs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function Bs(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(i=Pi(t)?Ai:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ws(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qs.enqueueReplaceState(t,t.state,null)}function Hs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=js,Rs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ts(s):(s=Pi(t)?Ai:xi.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Vs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ks(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===js&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===I?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Ks(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ks(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ks(e,null,t),n.return=e,n;case E:return(t=jc(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Gs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Gs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Gs(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Xi(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=f(i,m,v.value,c);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(i,m),a=o(_,a,g),null===h?u=_:h.sibling=_,h=_,m=y}if(v.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return is&&Xi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===I){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Ks(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===I?((s=Mc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Lc(o.type,o.key,o.props,null,r.mode,l)).ref=Ks(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=jc(o,r.mode,l)).return=r,r=s}return a(r);case P:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);Gs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Uc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var $s=Ys(!0),Js=Ys(!1),Xs={},Zs=Si(Xs),eo=Si(Xs),to=Si(Xs);function no(e){if(e===Xs)throw Error(s(174));return e}function ro(e,t){switch(ki(to,t),ki(eo,e),ki(Zs,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Zs),ki(Zs,t)}function io(){Ti(Zs),Ti(eo),Ti(to)}function so(e){no(to.current);var t=no(Zs.current),n=le(t,e.type);t!==n&&(ki(eo,e),ki(Zs,n))}function oo(e){eo.current===e&&(Ti(Zs),Ti(eo))}var ao=Si(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=w.ReactCurrentDispatcher,fo=w.ReactCurrentBatchConfig,po=0,mo=null,go=null,yo=null,vo=!1,_o=!1,wo=0,bo=0;function Eo(){throw Error(s(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),_o){o=0;do{if(_o=!1,wo=0,25<=o)throw Error(s(301));o+=1,yo=go=null,t.updateQueue=null,ho.current=ca,e=n(r,i)}while(_o)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,yo=go=mo=null,vo=!1,t)throw Error(s(300));return e}function To(){var e=0!==wo;return wo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function Co(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function xo(e,t){return"function"===typeof t?t(e):t}function No(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,mo.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Fl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(wa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Po(e,t){var n=mo,r=Co(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,wa=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(s(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=Ns(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return Co().memoizedState}function qo(e,t,n,r){var i=ko();mo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Co();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&Io(r,o.deps))return void(i.memoizedState=jo(t,n,s,r))}mo.flags|=e,i.memoizedState=jo(1|t,n,s,r)}function Bo(e,t){return qo(8390656,8,e,t)}function Wo(e,t){return zo(2048,8,e,t)}function Ho(e,t){return zo(4,2,e,t)}function Ko(e,t){return zo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Go.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Fl|=n,e.baseState=!0),t)}function Zo(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{_t=n,fo.transition=r}}function ea(){return Co().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=xs(e,t,n,r))){rc(n,e,r,tc()),sa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Cs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=xs(e,t,i,r))&&(rc(n,e,r,i=tc()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){_o=vo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var oa={readContext:Ts,useCallback:Eo,useContext:Eo,useEffect:Eo,useImperativeHandle:Eo,useInsertionEffect:Eo,useLayoutEffect:Eo,useMemo:Eo,useReducer:Eo,useRef:Eo,useState:Eo,useDebugValue:Eo,useDeferredValue:Eo,useTransition:Eo,useMutableSource:Eo,useSyncExternalStore:Eo,useId:Eo,unstable_isNewReconciler:!1},aa={readContext:Ts,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return qo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=ko();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Al)throw Error(s(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Al.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Ts,useCallback:$o,useContext:Ts,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(xo)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(Co(),go.memoizedState,e)},useTransition:function(){return[No(xo)[0],Co().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Ts,useCallback:$o,useContext:Ts,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(xo)},useDebugValue:Yo,useDeferredValue:function(e){var t=Co();return null===go?t.memoizedState=e:Xo(t,go.memoizedState,e)},useTransition:function(){return[Ao(xo)[0],Co().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Ds(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Kl=r),da(0,t)},n}function ma(e,t,n){(n=Ds(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ds(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _a=w.ReactCurrentOwner,wa=!1;function ba(e,t,n,r){t.child=null===e?Js(t,null,n,r):$s(t,e.child,n,r)}function Ea(e,t,n,r,i){n=n.render;var s=t.ref;return Ss(t,i),r=So(e,t,n,r,s,i),n=To(),null===e||wa?(is&&n&&es(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ha(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ha(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return Ca(e,t,n,r,i)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Ol,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Ol,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Ol,Dl),Dl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Ol,Dl),Dl|=r;return ba(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var s=Pi(n)?Ai:xi.current;return s=Ri(t,s),Ss(t,i),n=So(e,t,n,r,s,i),r=To(),null===e||wa?(is&&r&&es(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function xa(e,t,n,r,i){if(Pi(n)){var s=!0;Mi(t)}else s=!1;if(Ss(t,i),null===t.stateNode)Wa(e,t),Bs(t,n,r),Hs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ts(c):c=Ri(t,c=Pi(n)?Ai:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&Ws(t,o,r,c),As=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ni.current||As?("function"===typeof u&&(Vs(t,n,u,r),l=t.memoizedState),(a=As||zs(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ps(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:gs(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ts(l):l=Ri(t,l=Pi(n)?Ai:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Ws(t,o,r,l),As=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||As?("function"===typeof f&&(Vs(t,n,f,r),p=t.memoizedState),(c=As||zs(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,s,i)}function Na(e,t,n,r,i,s){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ha(e,t,s);r=t.stateNode,_a.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$s(t,e.child,null,s),t.child=$s(t,null,a,s)):ba(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ra(e,t,n,r,i){return fs(),ps(i),t.flags|=256,ba(e,t,n,r),t.child}var Pa,Da,Oa,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(ao,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,i,0,null),e=Mc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ma,e):ja(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$s(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Va(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=Al)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ns(e,i),rc(r,e,i,-1))}return gc(),Va(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=xc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Qi++]=$i,Gi[Qi++]=Ji,Gi[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Oc(r,a):(a=Mc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Oc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&ps(r),$s(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qa(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qa(e,n,t);else if(19===e.tag)qa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Pi(t.type)&&Di(),Ga(t),null;case 3:return r=t.stateNode,io(),Ti(Ni),Ti(xi),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Da(e,t),Ga(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ga(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":$(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&jr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&jr("scroll",e):null!=u&&_(e,o,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ga(t),null;case 13:if(Ti(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),o=!1}else null!==ss&&(ac(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Ll&&(Ll=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return io(),Da(e,t),null===e&&zr(t.stateNode.containerInfo),Ga(t),null;case 10:return Es(t.type._context),Ga(t),null;case 19:if(Ti(ao),null===(o=t.memoizedState))return Ga(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ka(o,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Ka(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Bl&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ga(t),null}else 2*Je()-o.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ao.current,ki(ao,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ni),Ti(xi),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ao),null;case 4:return io(),null;case 10:return Es(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&jr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Ja=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Ja&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tc(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fl(e,t,n),Ja=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Tc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Tc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Tc(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Tc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),_e(l,a);var u=_e(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):_(i,h,d,u)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Tc(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Tc(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Tc(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Je())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,gl(t,e),Ja=u):gl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tc(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){El(d);continue}}null!==p?(p.return=f,Za=p):El(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Tc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Tc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){Tc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,n){Za=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$a;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=$a;var c=Ja;if($a=o,(Ja=l)&&!c)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?Il(i):null!==l?(l.return=o,Za=l):Il(i);for(;null!==s;)Za=s,wl(s,t,n),s=s.sibling;Za=i,$a=a,Ja=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):bl(e)}}function bl(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&sl(t)}catch(f){Tc(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function El(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Il(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Tc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Tc(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Tc(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){Tc(t,o,l)}}}catch(l){Tc(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Sl,Tl=Math.ceil,kl=w.ReactCurrentDispatcher,Cl=w.ReactCurrentOwner,xl=w.ReactCurrentBatchConfig,Nl=0,Al=null,Rl=null,Pl=0,Dl=0,Ol=Si(0),Ll=0,Ml=null,Fl=0,Ul=0,jl=0,Vl=null,ql=null,zl=0,Bl=1/0,Wl=null,Hl=!1,Kl=null,Gl=null,Ql=!1,Yl=null,$l=0,Jl=0,Xl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Nl)?Je():-1!==Zl?Zl:Zl=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Pl?Pl&-Pl:null!==ms.transition?(0===ec&&(ec=mt()),ec):0!==(e=_t)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Jl)throw Jl=0,Xl=null,Error(s(185));yt(e,n,r),0!==(2&Nl)&&e===Al||(e===Al&&(0===(2&Nl)&&(Ul|=n),4===Ll&&lc(e,Pl)),ic(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(Bl=Je()+500,ji&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Al?Pl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,qi(e)}(cc.bind(null,e)):qi(cc.bind(null,e)),oi((function(){0===(6&Nl)&&zi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Nl))throw Error(s(327));var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var r=dt(e,e===Al?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Nl;Nl|=2;var o=mc();for(Al===e&&Pl===t||(Wl=null,Bl=Je()+500,fc(e,t));;)try{_c();break}catch(l){pc(e,l)}bs(),kl.current=o,Nl=i,null!==Rl?t=0:(Al=null,Pl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ml,fc(e,0),lc(e,r),ic(e,Je()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ml,fc(e,0),lc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Ec(e,ql,Wl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=zl+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Ec.bind(null,e,ql,Wl),t);break}Ec(e,ql,Wl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=ri(Ec.bind(null,e,ql,Wl),r);break}Ec(e,ql,Wl);break;default:throw Error(s(329))}}}return ic(e,Je()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=ql,ql=n,null!==t&&ac(t)),e}function ac(e){null===ql?ql=e:ql.push.apply(ql,e)}function lc(e,t){for(t&=~jl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Nl))throw Error(s(327));Ic();var t=dt(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,fc(e,0),lc(e,t),ic(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ec(e,ql,Wl),ic(e,Je()),null}function uc(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(Bl=Je()+500,ji&&zi())}}function hc(e){null!==Yl&&0===Yl.tag&&0===(6&Nl)&&Ic();var t=Nl;Nl|=1;var n=xl.transition,r=_t;try{if(xl.transition=null,_t=1,e)return e()}finally{_t=r,xl.transition=n,0===(6&(Nl=t))&&zi()}}function dc(){Dl=Ol.current,Ti(Ol)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ti(Ni),Ti(xi),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(ao);break;case 10:Es(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Al=e,Rl=e=Oc(e.current,null),Pl=Dl=t,Ll=0,Ml=null,jl=Ul=Fl=0,ql=Vl=null,null!==ks){for(t=0;t<ks.length;t++)if(null!==(r=(n=ks[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}ks=null}return e}function pc(e,t){for(;;){var n=Rl;try{if(bs(),ho.current=oa,vo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(po=0,yo=go=mo=null,_o=!1,wo=0,Cl.current=null,null===n||null===n.return){Ll=1,Ml=t,Rl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ga(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(o,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),ps(ua(c,l));break e}}o=c=ua(c,l),4!==Ll&&(Ll=2),null===Vl?Vl=[o]:Vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,c,t));break e;case 1:l=c;var v=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Gl||!Gl.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(w){t=w,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function mc(){var e=kl.current;return kl.current=oa,null===e?oa:e}function gc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Al||0===(268435455&Fl)&&0===(268435455&Ul)||lc(Al,Pl)}function yc(e,t){var n=Nl;Nl|=2;var r=mc();for(Al===e&&Pl===t||(Wl=null,fc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(bs(),Nl=n,kl.current=r,null!==Rl)throw Error(s(261));return Al=null,Pl=0,Ll}function vc(){for(;null!==Rl;)wc(Rl)}function _c(){for(;null!==Rl&&!Ye();)wc(Rl)}function wc(e){var t=Sl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?bc(e):Rl=t,Cl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Dl)))return void(Rl=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ll=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ll&&(Ll=5)}function Ec(e,t,n){var r=_t,i=xl.transition;try{xl.transition=null,_t=1,function(e,t,n,r){do{Ic()}while(null!==Yl);if(0!==(6&Nl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Al&&(Rl=Al=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Ac(tt,(function(){return Ic(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=xl.transition,xl.transition=null;var a=_t;_t=1;var l=Nl;Nl|=4,Cl.current=null,function(e,t){if(ei=Wt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(b){Tc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nl,nl=!1}(e,n),yl(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,_l(n,e,i),$e(),Nl=l,_t=a,xl.transition=o}else e.current=n;if(Ql&&(Ql=!1,Yl=e,$l=i),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Kl,Kl=null,e;0!==(1&$l)&&0!==e.tag&&Ic(),o=e.pendingLanes,0!==(1&o)?e===Xl?Jl++:(Jl=0,Xl=e):Jl=0,zi()}(e,t,n,r)}finally{xl.transition=i,_t=r}return null}function Ic(){if(null!==Yl){var e=wt($l),t=xl.transition,n=_t;try{if(xl.transition=null,_t=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,$l=0,0!==(6&Nl))throw Error(s(331));var i=Nl;for(Nl|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(ol(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break e}Za=o.return}}var _=e.current;for(Za=_;null!==Za;){var w=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Za=w;else e:for(a=_;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(E){Tc(l,l.return,E)}if(l===a){Za=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Za=b;break e}Za=l.return}}if(Nl=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{_t=n,xl.transition=t}}return!1}function Sc(e,t,n){e=Os(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Tc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Os(t,e=ma(t,e=ua(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Pl&n)===n&&(4===Ll||3===Ll&&(130023424&Pl)===Pl&&500>Je()-zl?fc(e,0):jl|=n),ic(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ns(e,t))&&(yt(e,t,n),ic(e,n))}function xc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cc(e,n)}function Ac(e,t){return Ge(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Rc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Dc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case I:return Mc(n.children,i,o,t);case S:a=8,i|=8;break;case T:return(e=Pc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case C:a=9;break e;case x:a=11;break e;case R:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qc(e,t,n,r,i,s,o,a,l){return e=new Vc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(s),e}function zc(e){if(!e)return Ci;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,s,o,a,l){return(e=qc(n,r,!0,e,0,s,0,a,l)).context=zc(null),n=e.current,(s=Ds(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Os(n,s,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,s=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ds(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Os(i,t,o))&&(rc(e,i,o,s),Ls(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fs();break;case 5:so(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(ki(ao,1&ao.current),null!==(e=Ha(e,t,n))?e.sibling:null);ki(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ba(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Ha(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,is&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wa(e,t),e=t.pendingProps;var i=Ri(t,xi.current);Ss(t,n),i=So(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Rs(t),i.updater=qs,t.stateNode=i,i._reactInternals=t,Hs(t,r,e,n),t=Na(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===R)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=Ea(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ps(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ra(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ha(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ka(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$s(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Ha(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ds(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Is(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Is(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ss(t,n),r=r(i=Ts(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Ia(e,t,r,i=gs(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Wa(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ss(t,n),Bs(t,r,i),Hs(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 22:return Ta(e,t,n)}throw Error(s(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Hc(o);a.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(o);s.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hc(l);a.call(e)}}var l=qc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,Je()),0===(6&Nl)&&(Bl=Je()+500,zi()))}break;case 13:hc((function(){var t=Ns(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},Et=function(e){if(13===e.tag){var t=Ns(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},It=function(e){if(13===e.tag){var t=nc(e),n=Ns(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},St=function(){return _t},Tt=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},Ee=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(s(90));G(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=uc,Ne=hc;var tu={usingClientEntryPoint:!1,Events:[_i,wi,bi,ke,Ce,uc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=qc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:(e,t,n)=>{var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:(e,t,n)=>{var r=n(791),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.jsx=c,t.jsxs=c},117:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=_.prototype=new v;w.constructor=_,m(w,y.prototype),w.isPureReactComponent=!0;var b=Array.isArray,E=Object.prototype.hasOwnProperty,I={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!S.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:I.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+x(l,0):s,b(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",b(e))for(var c=0;c<e.length;c++){var u=s+x(a=e[c],c);l+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,u=s+x(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:I};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=I.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{e.exports=n(117)},184:(e,t,n)=>{e.exports=n(374)},813:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function b(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,D(E);else{var t=r(u);null!==t&&O(b,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,v(k),k=-1),p=!0;var s=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(b,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,S=!1,T=null,k=-1,C=5,x=-1;function N(){return!(t.unstable_now()-x<C)}function A(){if(null!==T){var e=t.unstable_now();x=e;var n=!0;try{n=T(!0,e)}finally{n?I():(S=!1,T=null)}}else S=!1}if("function"===typeof _)I=function(){_(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=A,I=function(){P.postMessage(null)}}else I=function(){y(A,0)};function D(e){T=e,S||(S=!0,I())}function O(e,n){k=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(k),k=-1):g=!0,O(b,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,D(E))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:(e,t,n)=>{e.exports=n(813)},637:(e,t,n)=>{var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useSyncExternalStore,o=r.useRef,a=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,u){var h=o(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=l((function(){function e(e){if(!a){if(a=!0,s=e,e=r(e),void 0!==u&&d.hasValue){var t=d.value;if(u(t,e))return o=t}return o=e}if(t=o,i(s,e))return t;var n=r(e);return void 0!==u&&u(t,n)?t:(s=e,o=n)}var s,o,a=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,u]);var f=s(e,h[0],h[1]);return a((function(){d.hasValue=!0,d.value=f}),[f]),c(f),f}},995:(e,t,n)=>{e.exports=n(637)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".b55ca069.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="movie-app:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/github.io/bigcinemas/",(()=>{var e={179:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],c=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkmovie_app=self.webpackChunkmovie_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{var e={};n.r(e),n.d(e,{FirebaseError:()=>Ti,SDK_VERSION:()=>Vs,_DEFAULT_ENTRY_NAME:()=>xs,_addComponent:()=>Ps,_addOrOverwriteComponent:()=>Ds,_apps:()=>As,_clearComponents:()=>Fs,_components:()=>Rs,_getProvider:()=>Ls,_registerComponent:()=>Os,_removeServiceInstance:()=>Ms,deleteApp:()=>Ws,getApp:()=>zs,getApps:()=>Bs,initializeApp:()=>qs,onLog:()=>Ks,registerVersion:()=>Hs,setLogLevel:()=>Gs});var t,r=n(791),i=n.t(r,2),s=n(250),o=n(164),a=n.t(o,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,h=t.Pop,m=null,g=y();function y(){return(a.state||{idx:null}).idx}function v(){h=t.Pop;let e=y(),n=null==e?null:e-g;g=e,m&&m({action:h,location:w.location,delta:n})}function _(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(l({},a.state,{idx:g}),""));let w={get action(){return h},get location(){return e(s,a)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(c,v),m=e,()=>{s.removeEventListener(c,v),m=null}},createHref:e=>n(s,e),createURL:_,encodeLocation(e){let t=_(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){h=t.Push;let i=f(w.location,e,n);r&&r(i,e),g=y()+1;let l=d(i,g),c=w.createHref(i);try{a.pushState(l,"",c)}catch(Ph){if(Ph instanceof DOMException&&"DataCloneError"===Ph.name)throw Ph;s.location.assign(c)}o&&m&&m({action:h,location:w.location,delta:1})},replace:function(e,n){h=t.Replace;let i=f(w.location,e,n);r&&r(i,e),g=y();let s=d(i,g),l=w.createHref(i);a.replaceState(s,"",l),o&&m&&m({action:h,location:w.location,delta:0})},go:e=>a.go(e)};return w}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));const v=new Set(["lazy","caseSensitive","path","id","index","children"]);function _(e,t,n,r){return void 0===n&&(n=[]),void 0===r&&(r={}),e.map(((e,i)=>{let s=[...n,i],o="string"===typeof e.id?e.id:s.join("-");if(u(!0!==e.index||!e.children,"Cannot specify children on an index route"),u(!r[o],'Found a route id collision on id "'+o+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){let n=l({},e,t(e),{id:o});return r[o]=n,n}{let n=l({},e,t(e),{id:o,children:void 0});return r[o]=n,e.children&&(n.children=_(e.children,t,s,r)),n}}))}function w(e,t,n){void 0===n&&(n="/");let r=O(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let i=b(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o)s=R(i[o],D(r));return s}function b(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(u(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=j([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),b(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:A(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of E(e.path))i(e,t,r);else i(e,t)})),t}function E(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=E(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const I=/^:\w+$/,S=3,T=2,k=1,C=10,x=-2,N=e=>"*"===e;function A(e,t){let n=e.split("/"),r=n.length;return n.some(N)&&(r+=x),t&&(r+=T),n.filter((e=>!N(e))).reduce(((e,t)=>e+(I.test(t)?S:""===t?k:C)),r)}function R(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;s.push({params:r,pathname:j([i,c.pathname]),pathnameBase:V(j([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=j([i,c.pathnameBase]))}return s}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(Ph){return h(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+Ph+")."),e}}(l||"",r),e}),{});return{params:l,pathname:s,pathnameBase:o,pattern:e}}function D(e){try{return decodeURI(e)}catch(Ph){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Ph+")."),e}}function O(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function L(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function F(e,t){let n=M(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function U(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=l({},e),u(!i.pathname||!i.pathname.includes("?"),L("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),L("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),L("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else if(r){let e=0===t.length?[]:t[t.length-1].replace(/^\//,"").split("/");if(a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e.pop();i.pathname=t.join("/")}s="/"+e.join("/")}else{let e=t.length-1;if(a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:q(r),hash:z(i)}}(i,s),h=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}const j=e=>e.join("/").replace(/\/\/+/g,"/"),V=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;class B{constructor(e,t,n,r){void 0===r&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function W(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],K=new Set(H),G=["get",...H],Q=new Set(G),Y=new Set([301,302,303,307,308]),$=new Set([307,308]),J={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},X={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Z={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,te=e=>({hasErrorBoundary:Boolean(e.hasErrorBoundary)}),ne="remix-router-transitions";function re(e){const n=e.window?e.window:"undefined"!==typeof window?window:void 0,r="undefined"!==typeof n&&"undefined"!==typeof n.document&&"undefined"!==typeof n.document.createElement,i=!r;let s;if(u(e.routes.length>0,"You must provide a non-empty routes array to createRouter"),e.mapRouteProperties)s=e.mapRouteProperties;else if(e.detectErrorBoundary){let t=e.detectErrorBoundary;s=e=>({hasErrorBoundary:t(e)})}else s=te;let o,a,c={},d=_(e.routes,s,void 0,c),p=e.basename||"/",m=l({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},e.future),g=null,v=new Set,b=null,E=null,I=null,S=null!=e.hydrationData,T=w(d,e.history.location,p),k=null;if(null==T){let t=we(404,{pathname:e.history.location.pathname}),{matches:n,route:r}=_e(d);T=n,k={[r.id]:t}}let C,x=T.some((e=>e.route.lazy)),N=T.some((e=>e.route.loader));if(x)a=!1;else if(N)if(m.v7_partialHydration){let t=e.hydrationData?e.hydrationData.loaderData:null,n=e.hydrationData?e.hydrationData.errors:null;a=T.every((e=>e.route.loader&&!0!==e.route.loader.hydrate&&(t&&void 0!==t[e.route.id]||n&&void 0!==n[e.route.id])))}else a=null!=e.hydrationData;else a=!0;let A,R={historyAction:e.history.action,location:e.history.location,matches:T,initialized:a,navigation:J,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||k,fetchers:new Map,blockers:new Map},P=t.Pop,D=!1,L=!1,M=new Map,F=null,U=!1,j=!1,V=[],q=[],z=new Map,B=0,W=-1,H=new Map,K=new Set,G=new Map,Q=new Map,Y=new Set,re=new Map,oe=new Map,le=!1;function ce(e,t){void 0===t&&(t={}),R=l({},R,e);let n=[],r=[];m.v7_fetcherPersist&&R.fetchers.forEach(((e,t)=>{"idle"===e.state&&(Y.has(t)?r.push(t):n.push(t))})),[...v].forEach((e=>e(R,{deletedFetchers:r,unstable_viewTransitionOpts:t.viewTransitionOpts,unstable_flushSync:!0===t.flushSync}))),m.v7_fetcherPersist&&(n.forEach((e=>R.fetchers.delete(e))),r.forEach((e=>Fe(e))))}function ue(n,r,i){var s,a;let c,{flushSync:u}=void 0===i?{}:i,h=null!=R.actionData&&null!=R.navigation.formMethod&&xe(R.navigation.formMethod)&&"loading"===R.navigation.state&&!0!==(null==(s=n.state)?void 0:s._isRedirect);c=r.actionData?Object.keys(r.actionData).length>0?r.actionData:null:h?R.actionData:null;let f=r.loaderData?ye(R.loaderData,r.loaderData,r.matches||[],r.errors):R.loaderData,p=R.blockers;p.size>0&&(p=new Map(p),p.forEach(((e,t)=>p.set(t,Z))));let m,g=!0===D||null!=R.navigation.formMethod&&xe(R.navigation.formMethod)&&!0!==(null==(a=n.state)?void 0:a._isRedirect);if(o&&(d=o,o=void 0),U||P===t.Pop||(P===t.Push?e.history.push(n,n.state):P===t.Replace&&e.history.replace(n,n.state)),P===t.Pop){let e=M.get(R.location.pathname);e&&e.has(n.pathname)?m={currentLocation:R.location,nextLocation:n}:M.has(n.pathname)&&(m={currentLocation:n,nextLocation:R.location})}else if(L){let e=M.get(R.location.pathname);e?e.add(n.pathname):(e=new Set([n.pathname]),M.set(R.location.pathname,e)),m={currentLocation:R.location,nextLocation:n}}ce(l({},r,{actionData:c,loaderData:f,historyAction:P,location:n,initialized:!0,navigation:J,revalidation:"idle",restoreScrollPosition:Ge(n,r.matches||R.matches),preventScrollReset:g,blockers:p}),{viewTransitionOpts:m,flushSync:!0===u}),P=t.Pop,D=!1,L=!1,U=!1,j=!1,V=[],q=[]}async function fe(n,r,i){A&&A.abort(),A=null,P=n,U=!0===(i&&i.startUninterruptedRevalidation),function(e,t){if(b&&I){let n=Ke(e,t);b[n]=I()}}(R.location,R.matches),D=!0===(i&&i.preventScrollReset),L=!0===(i&&i.enableViewTransition);let a=o||d,u=i&&i.overrideNavigation,h=w(a,r,p),f=!0===(i&&i.flushSync);if(!h){let e=we(404,{pathname:r.pathname}),{matches:t,route:n}=_e(a);return He(),void ue(r,{matches:t,loaderData:{},errors:{[n.id]:e}},{flushSync:f})}if(R.initialized&&!j&&function(e,t){if(e.pathname!==t.pathname||e.search!==t.search)return!1;if(""===e.hash)return""!==t.hash;if(e.hash===t.hash)return!0;if(""!==t.hash)return!0;return!1}(R.location,r)&&!(i&&i.submission&&xe(i.submission.formMethod)))return void ue(r,{matches:h},{flushSync:f});A=new AbortController;let g,v,_=de(e.history,r,A.signal,i&&i.submission);if(i&&i.pendingError)v={[ve(h).route.id]:i.pendingError};else if(i&&i.submission&&xe(i.submission.formMethod)){let e=await async function(e,n,r,i,o){void 0===o&&(o={});Ee();let a,l=function(e,t){let n={state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text};return n}(n,r);ce({navigation:l},{flushSync:!0===o.flushSync});let u=Pe(i,n);if(u.route.action||u.route.lazy){if(a=await he("action",e,u,i,c,s,p,m.v7_relativeSplatPath),e.signal.aborted)return{shortCircuited:!0}}else a={type:y.error,error:we(405,{method:e.method,pathname:n.pathname,routeId:u.route.id})};if(Te(a)){let e;return e=o&&null!=o.replace?o.replace:a.location===R.location.pathname+R.location.search,await pe(R,a,{submission:r,replace:e}),{shortCircuited:!0}}if(Se(a)){let e=ve(i,u.route.id);return!0!==(o&&o.replace)&&(P=t.Push),{pendingActionData:{},pendingActionError:{[e.route.id]:a.error}}}if(Ie(a))throw we(400,{type:"defer-action"});return{pendingActionData:{[u.route.id]:a.data}}}(_,r,i.submission,h,{replace:i.replace,flushSync:f});if(e.shortCircuited)return;g=e.pendingActionData,v=e.pendingActionError,u=Oe(r,i.submission),f=!1,_=new Request(_.url,{signal:_.signal})}let{shortCircuited:E,loaderData:S,errors:T}=await async function(t,n,r,i,s,a,c,u,h,f,g){let y=i||Oe(n,s),v=s||a||De(y),_=o||d,[w,b]=ae(e.history,R,r,v,n,m.v7_partialHydration&&!0===u,j,V,q,Y,G,K,_,p,f,g);if(He((e=>!(r&&r.some((t=>t.route.id===e)))||w&&w.some((t=>t.route.id===e)))),W=++B,0===w.length&&0===b.length){let e=Ve();return ue(n,l({matches:r,loaderData:{},errors:g||null},f?{actionData:f}:{},e?{fetchers:new Map(R.fetchers)}:{}),{flushSync:h}),{shortCircuited:!0}}if(!U&&(!m.v7_partialHydration||!u)){b.forEach((e=>{let t=R.fetchers.get(e.key),n=Le(void 0,t?t.data:void 0);R.fetchers.set(e.key,n)}));let e=f||R.actionData;ce(l({navigation:y},e?0===Object.keys(e).length?{actionData:null}:{actionData:e}:{},b.length>0?{fetchers:new Map(R.fetchers)}:{}),{flushSync:h})}b.forEach((e=>{z.has(e.key)&&Ue(e.key),e.controller&&z.set(e.key,e.controller)}));let E=()=>b.forEach((e=>Ue(e.key)));A&&A.signal.addEventListener("abort",E);let{results:I,loaderResults:S,fetcherResults:T}=await me(R.matches,r,w,b,t);if(t.signal.aborted)return{shortCircuited:!0};A&&A.signal.removeEventListener("abort",E);b.forEach((e=>z.delete(e.key)));let k=be(I);if(k){if(k.idx>=w.length){let e=b[k.idx-w.length].key;K.add(e)}return await pe(R,k.result,{replace:c}),{shortCircuited:!0}}let{loaderData:C,errors:x}=ge(R,r,w,S,g,b,T,re);re.forEach(((e,t)=>{e.subscribe((n=>{(n||e.done)&&re.delete(t)}))}));let N=Ve(),P=qe(W),D=N||P||b.length>0;return l({loaderData:C,errors:x},D?{fetchers:new Map(R.fetchers)}:{})}(_,r,h,u,i&&i.submission,i&&i.fetcherSubmission,i&&i.replace,i&&!0===i.initialHydration,f,g,v);E||(A=null,ue(r,l({matches:h},g?{actionData:g}:{},{loaderData:S,errors:T})))}async function pe(i,s,o){let{submission:a,fetcherSubmission:c,replace:h}=void 0===o?{}:o;s.revalidate&&(j=!0);let d=f(i.location,s.location,{_isRedirect:!0});if(u(d,"Expected a location on the redirect navigation"),r){let t=!1;if(s.reloadDocument)t=!0;else if(ee.test(s.location)){const r=e.history.createURL(s.location);t=r.origin!==n.location.origin||null==O(r.pathname,p)}if(t)return void(h?n.location.replace(s.location):n.location.assign(s.location))}A=null;let m=!0===h?t.Replace:t.Push,{formMethod:g,formAction:y,formEncType:v}=i.navigation;!a&&!c&&g&&y&&v&&(a=De(i.navigation));let _=a||c;if($.has(s.status)&&_&&xe(_.formMethod))await fe(m,d,{submission:l({},_,{formAction:s.location}),preventScrollReset:D});else{let e=Oe(d,a);await fe(m,d,{overrideNavigation:e,fetcherSubmission:c,preventScrollReset:D})}}async function me(t,n,r,i,o){let a=await Promise.all([...r.map((e=>he("loader",o,e,n,c,s,p,m.v7_relativeSplatPath))),...i.map((t=>{if(t.matches&&t.match&&t.controller)return he("loader",de(e.history,t.path,t.controller.signal),t.match,t.matches,c,s,p,m.v7_relativeSplatPath);return{type:y.error,error:we(404,{pathname:t.path})}}))]),l=a.slice(0,r.length),u=a.slice(r.length);return await Promise.all([Ne(t,r,l,l.map((()=>o.signal)),!1,R.loaderData),Ne(t,i.map((e=>e.match)),u,i.map((e=>e.controller?e.controller.signal:null)),!0)]),{results:a,loaderResults:l,fetcherResults:u}}function Ee(){j=!0,V.push(...He()),G.forEach(((e,t)=>{z.has(t)&&(q.push(t),Ue(t))}))}function ke(e,t,n){void 0===n&&(n={}),R.fetchers.set(e,t),ce({fetchers:new Map(R.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function Ce(e,t,n,r){void 0===r&&(r={});let i=ve(R.matches,t);Fe(e),ce({errors:{[i.route.id]:n},fetchers:new Map(R.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function Re(e){return m.v7_fetcherPersist&&(Q.set(e,(Q.get(e)||0)+1),Y.has(e)&&Y.delete(e)),R.fetchers.get(e)||X}function Fe(e){let t=R.fetchers.get(e);!z.has(e)||t&&"loading"===t.state&&H.has(e)||Ue(e),G.delete(e),H.delete(e),K.delete(e),Y.delete(e),R.fetchers.delete(e)}function Ue(e){let t=z.get(e);u(t,"Expected fetch controller: "+e),t.abort(),z.delete(e)}function je(e){for(let t of e){let e=Me(Re(t).data);R.fetchers.set(t,e)}}function Ve(){let e=[],t=!1;for(let n of K){let r=R.fetchers.get(n);u(r,"Expected fetcher: "+n),"loading"===r.state&&(K.delete(n),e.push(n),t=!0)}return je(e),t}function qe(e){let t=[];for(let[n,r]of H)if(r<e){let e=R.fetchers.get(n);u(e,"Expected fetcher: "+n),"loading"===e.state&&(Ue(n),H.delete(n),t.push(n))}return je(t),t.length>0}function ze(e){R.blockers.delete(e),oe.delete(e)}function Be(e,t){let n=R.blockers.get(e)||Z;u("unblocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"proceeding"===t.state||"blocked"===n.state&&"unblocked"===t.state||"proceeding"===n.state&&"unblocked"===t.state,"Invalid blocker state transition: "+n.state+" -> "+t.state);let r=new Map(R.blockers);r.set(e,t),ce({blockers:r})}function We(e){let{currentLocation:t,nextLocation:n,historyAction:r}=e;if(0===oe.size)return;oe.size>1&&h(!1,"A router only supports one blocker at a time");let i=Array.from(oe.entries()),[s,o]=i[i.length-1],a=R.blockers.get(s);return a&&"proceeding"===a.state?void 0:o({currentLocation:t,nextLocation:n,historyAction:r})?s:void 0}function He(e){let t=[];return re.forEach(((n,r)=>{e&&!e(r)||(n.cancel(),t.push(r),re.delete(r))})),t}function Ke(e,t){if(E){return E(e,t.map((e=>function(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}(e,R.loaderData))))||e.key}return e.key}function Ge(e,t){if(b){let n=Ke(e,t),r=b[n];if("number"===typeof r)return r}return null}return C={get basename(){return p},get future(){return m},get state(){return R},get routes(){return d},get window(){return n},initialize:function(){if(g=e.history.listen((t=>{let{action:n,location:r,delta:i}=t;if(le)return void(le=!1);h(0===oe.size||null!=i,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let s=We({currentLocation:R.location,nextLocation:r,historyAction:n});return s&&null!=i?(le=!0,e.history.go(-1*i),void Be(s,{state:"blocked",location:r,proceed(){Be(s,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),e.history.go(i)},reset(){let e=new Map(R.blockers);e.set(s,Z),ce({blockers:e})}})):fe(n,r)})),r){!function(e,t){try{let n=e.sessionStorage.getItem(ne);if(n){let e=JSON.parse(n);for(let[n,r]of Object.entries(e||{}))r&&Array.isArray(r)&&t.set(n,new Set(r||[]))}}catch(n){}}(n,M);let e=()=>function(e,t){if(t.size>0){let n={};for(let[e,r]of t)n[e]=[...r];try{e.sessionStorage.setItem(ne,JSON.stringify(n))}catch(Ph){h(!1,"Failed to save applied view transitions in sessionStorage ("+Ph+").")}}}(n,M);n.addEventListener("pagehide",e),F=()=>n.removeEventListener("pagehide",e)}return R.initialized||fe(t.Pop,R.location,{initialHydration:!0}),C},subscribe:function(e){return v.add(e),()=>v.delete(e)},enableScrollRestoration:function(e,t,n){if(b=e,I=t,E=n||null,!S&&R.navigation===J){S=!0;let e=Ge(R.location,R.matches);null!=e&&ce({restoreScrollPosition:e})}return()=>{b=null,I=null,E=null}},navigate:async function n(r,i){if("number"===typeof r)return void e.history.go(r);let s=ie(R.location,R.matches,p,m.v7_prependBasename,r,m.v7_relativeSplatPath,null==i?void 0:i.fromRouteId,null==i?void 0:i.relative),{path:o,submission:a,error:c}=se(m.v7_normalizeFormMethod,!1,s,i),u=R.location,h=f(R.location,o,i&&i.state);h=l({},h,e.history.encodeLocation(h));let d=i&&null!=i.replace?i.replace:void 0,g=t.Push;!0===d?g=t.Replace:!1===d||null!=a&&xe(a.formMethod)&&a.formAction===R.location.pathname+R.location.search&&(g=t.Replace);let y=i&&"preventScrollReset"in i?!0===i.preventScrollReset:void 0,v=!0===(i&&i.unstable_flushSync),_=We({currentLocation:u,nextLocation:h,historyAction:g});if(!_)return await fe(g,h,{submission:a,pendingError:c,preventScrollReset:y,replace:i&&i.replace,enableViewTransition:i&&i.unstable_viewTransition,flushSync:v});Be(_,{state:"blocked",location:h,proceed(){Be(_,{state:"proceeding",proceed:void 0,reset:void 0,location:h}),n(r,i)},reset(){let e=new Map(R.blockers);e.set(_,Z),ce({blockers:e})}})},fetch:function(t,n,r,a){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");z.has(t)&&Ue(t);let l=!0===(a&&a.unstable_flushSync),h=o||d,f=ie(R.location,R.matches,p,m.v7_prependBasename,r,m.v7_relativeSplatPath,n,null==a?void 0:a.relative),g=w(h,f,p);if(!g)return void Ce(t,n,we(404,{pathname:f}),{flushSync:l});let{path:y,submission:v,error:_}=se(m.v7_normalizeFormMethod,!0,f,a);if(_)return void Ce(t,n,_,{flushSync:l});let b=Pe(g,y);D=!0===(a&&a.preventScrollReset),v&&xe(v.formMethod)?async function(t,n,r,i,a,l,h){if(Ee(),G.delete(t),!i.route.action&&!i.route.lazy){let e=we(405,{method:h.formMethod,pathname:r,routeId:n});return void Ce(t,n,e,{flushSync:l})}let f=R.fetchers.get(t);ke(t,function(e,t){let n={state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0};return n}(h,f),{flushSync:l});let g=new AbortController,y=de(e.history,r,g.signal,h);z.set(t,g);let v=B,_=await he("action",y,i,a,c,s,p,m.v7_relativeSplatPath);if(y.signal.aborted)return void(z.get(t)===g&&z.delete(t));if(Y.has(t))return void ke(t,Me(void 0));if(Te(_))return z.delete(t),W>v?void ke(t,Me(void 0)):(K.add(t),ke(t,Le(h)),pe(R,_,{fetcherSubmission:h}));if(Se(_))return void Ce(t,n,_.error);if(Ie(_))throw we(400,{type:"defer-action"});let b=R.navigation.location||R.location,E=de(e.history,b,g.signal),I=o||d,S="idle"!==R.navigation.state?w(I,R.navigation.location,p):R.matches;u(S,"Didn't find any matches after fetcher action");let T=++B;H.set(t,T);let k=Le(h,_.data);R.fetchers.set(t,k);let[C,x]=ae(e.history,R,S,h,b,!1,j,V,q,Y,G,K,I,p,{[i.route.id]:_.data},void 0);x.filter((e=>e.key!==t)).forEach((e=>{let t=e.key,n=R.fetchers.get(t),r=Le(void 0,n?n.data:void 0);R.fetchers.set(t,r),z.has(t)&&Ue(t),e.controller&&z.set(t,e.controller)})),ce({fetchers:new Map(R.fetchers)});let N=()=>x.forEach((e=>Ue(e.key)));g.signal.addEventListener("abort",N);let{results:D,loaderResults:O,fetcherResults:L}=await me(R.matches,S,C,x,E);if(g.signal.aborted)return;g.signal.removeEventListener("abort",N),H.delete(t),z.delete(t),x.forEach((e=>z.delete(e.key)));let M=be(D);if(M){if(M.idx>=C.length){let e=x[M.idx-C.length].key;K.add(e)}return pe(R,M.result)}let{loaderData:F,errors:U}=ge(R,R.matches,C,O,void 0,x,L,re);if(R.fetchers.has(t)){let e=Me(_.data);R.fetchers.set(t,e)}qe(T),"loading"===R.navigation.state&&T>W?(u(P,"Expected pending action"),A&&A.abort(),ue(R.navigation.location,{matches:S,loaderData:F,errors:U,fetchers:new Map(R.fetchers)})):(ce({errors:U,loaderData:ye(R.loaderData,F,S,U),fetchers:new Map(R.fetchers)}),j=!1)}(t,n,y,b,g,l,v):(G.set(t,{routeId:n,path:y}),async function(t,n,r,i,o,a,l){let h=R.fetchers.get(t);ke(t,Le(l,h?h.data:void 0),{flushSync:a});let d=new AbortController,f=de(e.history,r,d.signal);z.set(t,d);let g=B,y=await he("loader",f,i,o,c,s,p,m.v7_relativeSplatPath);Ie(y)&&(y=await Ae(y,f.signal,!0)||y);z.get(t)===d&&z.delete(t);if(f.signal.aborted)return;if(Y.has(t))return void ke(t,Me(void 0));if(Te(y))return W>g?void ke(t,Me(void 0)):(K.add(t),void await pe(R,y));if(Se(y))return void Ce(t,n,y.error);u(!Ie(y),"Unhandled fetcher deferred data"),ke(t,Me(y.data))}(t,n,y,b,g,l,v))},revalidate:function(){Ee(),ce({revalidation:"loading"}),"submitting"!==R.navigation.state&&("idle"!==R.navigation.state?fe(P||R.historyAction,R.navigation.location,{overrideNavigation:R.navigation}):fe(R.historyAction,R.location,{startUninterruptedRevalidation:!0}))},createHref:t=>e.history.createHref(t),encodeLocation:t=>e.history.encodeLocation(t),getFetcher:Re,deleteFetcher:function(e){if(m.v7_fetcherPersist){let t=(Q.get(e)||0)-1;t<=0?(Q.delete(e),Y.add(e)):Q.set(e,t)}else Fe(e);ce({fetchers:new Map(R.fetchers)})},dispose:function(){g&&g(),F&&F(),v.clear(),A&&A.abort(),R.fetchers.forEach(((e,t)=>Fe(t))),R.blockers.forEach(((e,t)=>ze(t)))},getBlocker:function(e,t){let n=R.blockers.get(e)||Z;return oe.get(e)!==t&&oe.set(e,t),n},deleteBlocker:ze,_internalFetchControllers:z,_internalActiveDeferreds:re,_internalSetRoutes:function(e){c={},o=_(e,s,void 0,c)}},C}Symbol("deferred");function ie(e,t,n,r,i,s,o,a){let l,c;if(o){l=[];for(let e of t)if(l.push(e),e.route.id===o){c=e;break}}else l=t,c=t[t.length-1];let u=U(i||".",F(l,s),O(e.pathname,n)||e.pathname,"path"===a);return null==i&&(u.search=e.search,u.hash=e.hash),null!=i&&""!==i&&"."!==i||!c||!c.route.index||Re(u.search)||(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&"/"!==n&&(u.pathname="/"===u.pathname?n:j([n,u.pathname])),p(u)}function se(e,t,n,r){if(!r||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(r))return{path:n};if(r.formMethod&&!Ce(r.formMethod))return{path:n,error:we(405,{method:r.formMethod})};let i,s,o=()=>({path:n,error:we(400,{type:"invalid-body"})}),a=r.formMethod||"get",l=e?a.toUpperCase():a.toLowerCase(),c=Ee(n);if(void 0!==r.body){if("text/plain"===r.formEncType){if(!xe(l))return o();let e="string"===typeof r.body?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce(((e,t)=>{let[n,r]=t;return""+e+n+"="+r+"\n"}),""):String(r.body);return{path:n,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:void 0,text:e}}}if("application/json"===r.formEncType){if(!xe(l))return o();try{let e="string"===typeof r.body?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:e,text:void 0}}}catch(f){return o()}}}if(u("function"===typeof FormData,"FormData is not available in this environment"),r.formData)i=fe(r.formData),s=r.formData;else if(r.body instanceof FormData)i=fe(r.body),s=r.body;else if(r.body instanceof URLSearchParams)i=r.body,s=pe(i);else if(null==r.body)i=new URLSearchParams,s=new FormData;else try{i=new URLSearchParams(r.body),s=pe(i)}catch(f){return o()}let h={formMethod:l,formAction:c,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:s,json:void 0,text:void 0};if(xe(h.formMethod))return{path:n,submission:h};let d=m(n);return t&&d.search&&Re(d.search)&&i.append("index",""),d.search="?"+i,{path:p(d),submission:h}}function oe(e,t){let n=e;if(t){let r=e.findIndex((e=>e.route.id===t));r>=0&&(n=e.slice(0,r))}return n}function ae(e,t,n,r,i,s,o,a,c,u,h,d,f,p,m,g){let y=g?Object.values(g)[0]:m?Object.values(m)[0]:void 0,v=e.createURL(t.location),_=e.createURL(i),b=g?Object.keys(g)[0]:void 0,E=oe(n,b).filter(((e,n)=>{if(s)return function(e,t){if(!t.loader)return!1;if(t.loader.hydrate)return!0;return void 0===e.loaderData[t.id]&&(!e.errors||void 0===e.errors[t.id])}(t,e.route);if(e.route.lazy)return!0;if(null==e.route.loader)return!1;if(function(e,t,n){let r=!t||n.route.id!==t.route.id,i=void 0===e[n.route.id];return r||i}(t.loaderData,t.matches[n],e)||a.some((t=>t===e.route.id)))return!0;let i=t.matches[n],c=e;return ce(e,l({currentUrl:v,currentParams:i.params,nextUrl:_,nextParams:c.params},r,{actionResult:y,defaultShouldRevalidate:o||v.pathname+v.search===_.pathname+_.search||v.search!==_.search||le(i,c)}))})),I=[];return h.forEach(((e,i)=>{if(s||!n.some((t=>t.route.id===e.routeId))||u.has(i))return;let a=w(f,e.path,p);if(!a)return void I.push({key:i,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null});let h=t.fetchers.get(i),m=Pe(a,e.path),g=!1;g=!d.has(i)&&(!!c.includes(i)||(h&&"idle"!==h.state&&void 0===h.data?o:ce(m,l({currentUrl:v,currentParams:t.matches[t.matches.length-1].params,nextUrl:_,nextParams:n[n.length-1].params},r,{actionResult:y,defaultShouldRevalidate:o})))),g&&I.push({key:i,routeId:e.routeId,path:e.path,matches:a,match:m,controller:new AbortController})})),[E,I]}function le(e,t){let n=e.route.path;return e.pathname!==t.pathname||null!=n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function ce(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if("boolean"===typeof n)return n}return t.defaultShouldRevalidate}async function ue(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let i=n[e.id];u(i,"No route found in manifest");let s={};for(let o in r){let e=void 0!==i[o]&&"hasErrorBoundary"!==o;h(!e,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+o+'" will be ignored.'),e||v.has(o)||(s[o]=r[o])}Object.assign(i,s),Object.assign(i,l({},t(i),{lazy:void 0}))}async function he(e,t,n,r,i,s,o,a,l){let c,h,d;void 0===l&&(l={});let f=e=>{let r,i=new Promise(((e,t)=>r=t));return d=()=>r(),t.signal.addEventListener("abort",d),Promise.race([e({request:t,params:n.params,context:l.requestContext}),i])};try{let r=n.route[e];if(n.route.lazy)if(r){let e,t=await Promise.all([f(r).catch((t=>{e=t})),ue(n.route,s,i)]);if(e)throw e;h=t[0]}else{if(await ue(n.route,s,i),r=n.route[e],!r){if("action"===e){let e=new URL(t.url),r=e.pathname+e.search;throw we(405,{method:t.method,pathname:r,routeId:n.route.id})}return{type:y.data,data:void 0}}h=await f(r)}else{if(!r){let e=new URL(t.url);throw we(404,{pathname:e.pathname+e.search})}h=await f(r)}u(void 0!==h,"You defined "+("action"===e?"an action":"a loader")+' for route "'+n.route.id+"\" but didn't return anything from your `"+e+"` function. Please return a value or `null`.")}catch(g){c=y.error,h=g}finally{d&&t.signal.removeEventListener("abort",d)}if(ke(h)){let e,i=h.status;if(Y.has(i)){let e=h.headers.get("Location");if(u(e,"Redirects returned/thrown from loaders/actions must have a Location header"),ee.test(e)){if(!l.isStaticRequest){let n=new URL(t.url),r=e.startsWith("//")?new URL(n.protocol+e):new URL(e),i=null!=O(r.pathname,o);r.origin===n.origin&&i&&(e=r.pathname+r.search+r.hash)}}else e=ie(new URL(t.url),r.slice(0,r.indexOf(n)+1),o,!0,e,a);if(l.isStaticRequest)throw h.headers.set("Location",e),h;return{type:y.redirect,status:i,location:e,revalidate:null!==h.headers.get("X-Remix-Revalidate"),reloadDocument:null!==h.headers.get("X-Remix-Reload-Document")}}if(l.isRouteRequest){throw{type:c===y.error?y.error:y.data,response:h}}try{let t=h.headers.get("Content-Type");e=t&&/\bapplication\/json\b/.test(t)?await h.json():await h.text()}catch(g){return{type:y.error,error:g}}return c===y.error?{type:c,error:new B(i,h.statusText,e),headers:h.headers}:{type:y.data,data:e,statusCode:h.status,headers:h.headers}}return c===y.error?{type:c,error:h}:function(e){let t=e;return t&&"object"===typeof t&&"object"===typeof t.data&&"function"===typeof t.subscribe&&"function"===typeof t.cancel&&"function"===typeof t.resolveData}(h)?{type:y.deferred,deferredData:h,statusCode:null==(p=h.init)?void 0:p.status,headers:(null==(m=h.init)?void 0:m.headers)&&new Headers(h.init.headers)}:{type:y.data,data:h};var p,m}function de(e,t,n,r){let i=e.createURL(Ee(t)).toString(),s={signal:n};if(r&&xe(r.formMethod)){let{formMethod:e,formEncType:t}=r;s.method=e.toUpperCase(),"application/json"===t?(s.headers=new Headers({"Content-Type":t}),s.body=JSON.stringify(r.json)):"text/plain"===t?s.body=r.text:"application/x-www-form-urlencoded"===t&&r.formData?s.body=fe(r.formData):s.body=r.formData}return new Request(i,s)}function fe(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,"string"===typeof r?r:r.name);return t}function pe(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function me(e,t,n,r,i){let s,o={},a=null,l=!1,c={};return n.forEach(((n,h)=>{let d=t[h].route.id;if(u(!Te(n),"Cannot handle redirect results in processLoaderData"),Se(n)){let t=ve(e,d),i=n.error;r&&(i=Object.values(r)[0],r=void 0),a=a||{},null==a[t.route.id]&&(a[t.route.id]=i),o[d]=void 0,l||(l=!0,s=W(n.error)?n.error.status:500),n.headers&&(c[d]=n.headers)}else Ie(n)?(i.set(d,n.deferredData),o[d]=n.deferredData.data):o[d]=n.data,null==n.statusCode||200===n.statusCode||l||(s=n.statusCode),n.headers&&(c[d]=n.headers)})),r&&(a=r,o[Object.keys(r)[0]]=void 0),{loaderData:o,errors:a,statusCode:s||200,loaderHeaders:c}}function ge(e,t,n,r,i,s,o,a){let{loaderData:c,errors:h}=me(t,n,r,i,a);for(let d=0;d<s.length;d++){let{key:t,match:n,controller:r}=s[d];u(void 0!==o&&void 0!==o[d],"Did not find corresponding fetcher result");let i=o[d];if(!r||!r.signal.aborted)if(Se(i)){let r=ve(e.matches,null==n?void 0:n.route.id);h&&h[r.route.id]||(h=l({},h,{[r.route.id]:i.error})),e.fetchers.delete(t)}else if(Te(i))u(!1,"Unhandled fetcher revalidation redirect");else if(Ie(i))u(!1,"Unhandled fetcher deferred data");else{let n=Me(i.data);e.fetchers.set(t,n)}}return{loaderData:c,errors:h}}function ye(e,t,n,r){let i=l({},t);for(let s of n){let n=s.route.id;if(t.hasOwnProperty(n)?void 0!==t[n]&&(i[n]=t[n]):void 0!==e[n]&&s.route.loader&&(i[n]=e[n]),r&&r.hasOwnProperty(n))break}return i}function ve(e,t){return(t?e.slice(0,e.findIndex((e=>e.route.id===t))+1):[...e]).reverse().find((e=>!0===e.route.hasErrorBoundary))||e[0]}function _e(e){let t=1===e.length?e[0]:e.find((e=>e.index||!e.path||"/"===e.path))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function we(e,t){let{pathname:n,routeId:r,method:i,type:s}=void 0===t?{}:t,o="Unknown Server Error",a="Unknown @remix-run/router error";return 400===e?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but did not provide a `loader` for route "'+r+'", so there is no way to handle the request.':"defer-action"===s?a="defer() is not supported in actions":"invalid-body"===s&&(a="Unable to encode submission body")):403===e?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):404===e?(o="Not Found",a='No route matches URL "'+n+'"'):405===e&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but did not provide an `action` for route "'+r+'", so there is no way to handle the request.':i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new B(e||500,o,new Error(a),!0)}function be(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(Te(n))return{result:n,idx:t}}}function Ee(e){return p(l({},"string"===typeof e?m(e):e,{hash:""}))}function Ie(e){return e.type===y.deferred}function Se(e){return e.type===y.error}function Te(e){return(e&&e.type)===y.redirect}function ke(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function Ce(e){return Q.has(e.toLowerCase())}function xe(e){return K.has(e.toLowerCase())}async function Ne(e,t,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=t[o];if(!l)continue;let c=e.find((e=>e.route.id===l.route.id)),h=null!=c&&!le(c,l)&&void 0!==(s&&s[l.route.id]);if(Ie(a)&&(i||h)){let e=r[o];u(e,"Expected an AbortSignal for revalidating fetcher deferred result"),await Ae(a,e,i).then((e=>{e&&(n[o]=e||n[o])}))}}}async function Ae(e,t,n){if(void 0===n&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:y.data,data:e.deferredData.unwrappedData}}catch(r){return{type:y.error,error:r}}return{type:y.data,data:e.deferredData.data}}}function Re(e){return new URLSearchParams(e).getAll("index").some((e=>""===e))}function Pe(e,t){let n="string"===typeof t?m(t).search:t.search;if(e[e.length-1].route.index&&Re(n||""))return e[e.length-1];let r=M(e);return r[r.length-1]}function De(e){let{formMethod:t,formAction:n,formEncType:r,text:i,formData:s,json:o}=e;if(t&&n&&r)return null!=i?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i}:null!=s?{formMethod:t,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0}:void 0!==o?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}:void 0}function Oe(e,t){if(t){return{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}return{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Le(e,t){if(e){return{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}}return{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Me(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fe.apply(this,arguments)}const Ue=r.createContext(null);const je=r.createContext(null);const Ve=r.createContext(null);const qe=r.createContext(null);const ze=r.createContext({outlet:null,matches:[],isDataRoute:!1});const Be=r.createContext(null);function We(){return null!=r.useContext(qe)}function He(){return We()||u(!1),r.useContext(qe).location}function Ke(e){r.useContext(Ve).static||r.useLayoutEffect(e)}function Ge(){let{isDataRoute:e}=r.useContext(ze);return e?function(){let{router:e}=rt(tt.UseNavigateStable),t=st(nt.UseNavigateStable),n=r.useRef(!1);Ke((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,Fe({fromRouteId:t},i)))}),[e,t]);return i}():function(){We()||u(!1);let e=r.useContext(Ue),{basename:t,future:n,navigator:i}=r.useContext(Ve),{matches:s}=r.useContext(ze),{pathname:o}=He(),a=JSON.stringify(F(s,n.v7_relativeSplatPath)),l=r.useRef(!1);return Ke((()=>{l.current=!0})),r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=U(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:j([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e])}()}function Qe(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(Ve),{matches:s}=r.useContext(ze),{pathname:o}=He(),a=JSON.stringify(F(s,i.v7_relativeSplatPath));return r.useMemo((()=>U(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function Ye(e,n,i,s){We()||u(!1);let{navigator:o}=r.useContext(Ve),{matches:a}=r.useContext(ze),l=a[a.length-1],c=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=He();if(n){var p;let e="string"===typeof n?m(n):n;"/"===h||(null==(p=e.pathname)?void 0:p.startsWith(h))||u(!1),d=e}else d=f;let g=d.pathname||"/",y=w(e,{pathname:"/"===h?g:g.slice(h.length)||"/"});let v=et(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:j([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:j([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,s);return n&&v?r.createElement(qe.Provider,{value:{location:Fe({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},v):v}function $e(){let e=function(){var e;let t=r.useContext(Be),n=it(nt.UseRouteError),i=st(nt.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=W(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const Je=r.createElement($e,null);class Xe extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(ze.Provider,{value:this.props.routeContext},r.createElement(Be.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ze(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(Ue);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ze.Provider,{value:t},i)}function et(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=r),e.route.loader&&e.route.id&&void 0===n.loaderData[e.route.id]&&(!n.errors||void 0===n.errors[e.route.id])){c=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}return a.reduceRight(((e,i,s)=>{let o,u=!1,d=null,f=null;var p;n&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||Je,c&&(h<0&&0===s?(p="route-fallback",!1||ot[p]||(ot[p]=!0),u=!0,f=null):h===s&&(u=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?d:u?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(Ze,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(Xe,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var tt=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(tt||{}),nt=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(nt||{});function rt(e){let t=r.useContext(Ue);return t||u(!1),t}function it(e){let t=r.useContext(je);return t||u(!1),t}function st(e){let t=function(e){let t=r.useContext(ze);return t||u(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const ot={};i.startTransition;function at(e){let{basename:n="/",children:i=null,location:s,navigationType:o=t.Pop,navigator:a,static:l=!1,future:c}=e;We()&&u(!1);let h=n.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:h,navigator:a,static:l,future:Fe({v7_relativeSplatPath:!1},c)})),[h,c,a,l]);"string"===typeof s&&(s=m(s));let{pathname:f="/",search:p="",hash:g="",state:y=null,key:v="default"}=s,_=r.useMemo((()=>{let e=O(f,h);return null==e?null:{location:{pathname:e,search:p,hash:g,state:y,key:v},navigationType:o}}),[h,f,p,g,y,v,o]);return null==_?null:r.createElement(Ve.Provider,{value:d},r.createElement(qe.Provider,{children:i,value:_}))}new Promise((()=>{}));r.Component;function lt(e){let t={hasErrorBoundary:null!=e.ErrorBoundary||null!=e.errorElement};return e.Component&&Object.assign(t,{element:r.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:r.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:r.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}function ct(){return ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ct.apply(this,arguments)}function ut(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const ht=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],dt=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"];function ft(){var e;let t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=ct({},t,{errors:pt(t.errors)})),t}function pt(e){if(!e)return null;let t=Object.entries(e),n={};for(let[i,s]of t)if(s&&"RouteErrorResponse"===s.__type)n[i]=new B(s.status,s.statusText,s.data,!0===s.internal);else if(s&&"Error"===s.__type){if(s.__subType){let e=window[s.__subType];if("function"===typeof e)try{let t=new e(s.message);t.stack="",n[i]=t}catch(r){}}if(null==n[i]){let e=new Error(s.message);e.stack="",n[i]=e}}else n[i]=s;return n}const mt=r.createContext({isTransitioning:!1});const gt=r.createContext(new Map);const yt=i.startTransition,vt=a.flushSync;function _t(e){vt?vt(e):e()}class wt{constructor(){this.status="pending",this.promise=new Promise(((e,t)=>{this.resolve=t=>{"pending"===this.status&&(this.status="resolved",e(t))},this.reject=e=>{"pending"===this.status&&(this.status="rejected",t(e))}}))}}function bt(e){let{fallbackElement:t,router:n,future:i}=e,[s,o]=r.useState(n.state),[a,l]=r.useState(),[c,u]=r.useState({isTransitioning:!1}),[h,d]=r.useState(),[f,p]=r.useState(),[m,g]=r.useState(),y=r.useRef(new Map),{v7_startTransition:v}=i||{},_=r.useCallback((e=>{v?function(e){yt?yt(e):e()}(e):e()}),[v]),w=r.useCallback(((e,t)=>{let{deletedFetchers:r,unstable_flushSync:i,unstable_viewTransitionOpts:s}=t;r.forEach((e=>y.current.delete(e))),e.fetchers.forEach(((e,t)=>{void 0!==e.data&&y.current.set(t,e.data)}));let a=null==n.window||"function"!==typeof n.window.document.startViewTransition;if(s&&!a){if(i){_t((()=>{f&&(h&&h.resolve(),f.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:s.currentLocation,nextLocation:s.nextLocation})}));let t=n.window.document.startViewTransition((()=>{_t((()=>o(e)))}));return t.finished.finally((()=>{_t((()=>{d(void 0),p(void 0),l(void 0),u({isTransitioning:!1})}))})),void _t((()=>p(t)))}f?(h&&h.resolve(),f.skipTransition(),g({state:e,currentLocation:s.currentLocation,nextLocation:s.nextLocation})):(l(e),u({isTransitioning:!0,flushSync:!1,currentLocation:s.currentLocation,nextLocation:s.nextLocation}))}else i?_t((()=>o(e))):_((()=>o(e)))}),[n.window,f,h,y,_]);r.useLayoutEffect((()=>n.subscribe(w)),[n,w]),r.useEffect((()=>{c.isTransitioning&&!c.flushSync&&d(new wt)}),[c]),r.useEffect((()=>{if(h&&a&&n.window){let e=a,t=h.promise,r=n.window.document.startViewTransition((async()=>{_((()=>o(e))),await t}));r.finished.finally((()=>{d(void 0),p(void 0),l(void 0),u({isTransitioning:!1})})),p(r)}}),[_,a,h,n.window]),r.useEffect((()=>{h&&a&&s.location.key===a.location.key&&h.resolve()}),[h,f,s.location,a]),r.useEffect((()=>{!c.isTransitioning&&m&&(l(m.state),u({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),g(void 0))}),[c.isTransitioning,m]),r.useEffect((()=>{}),[]);let b=r.useMemo((()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:e=>n.navigate(e),push:(e,t,r)=>n.navigate(e,{state:t,preventScrollReset:null==r?void 0:r.preventScrollReset}),replace:(e,t,r)=>n.navigate(e,{replace:!0,state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})})),[n]),E=n.basename||"/",I=r.useMemo((()=>({router:n,navigator:b,static:!1,basename:E})),[n,b,E]);return r.createElement(r.Fragment,null,r.createElement(Ue.Provider,{value:I},r.createElement(je.Provider,{value:s},r.createElement(gt.Provider,{value:y.current},r.createElement(mt.Provider,{value:c},r.createElement(at,{basename:E,location:s.location,navigationType:s.historyAction,navigator:b,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},s.initialized||n.future.v7_partialHydration?r.createElement(Et,{routes:n.routes,future:n.future,state:s}):t))))),null)}function Et(e){let{routes:t,future:n,state:r}=e;return Ye(t,void 0,r,n)}const It="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,St=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tt=r.forwardRef((function(e,t){let n,{onClick:i,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:h,preventScrollReset:d,unstable_viewTransition:f}=e,m=ut(e,ht),{basename:g}=r.useContext(Ve),y=!1;if("string"===typeof h&&St.test(h)&&(n=h,It))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=O(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:y=!0}catch(w){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;We()||u(!1);let{basename:i,navigator:s}=r.useContext(Ve),{hash:o,pathname:a,search:l}=Qe(e,{relative:n}),c=a;return"/"!==i&&(c="/"===a?i:j([i,a])),s.createHref({pathname:c,search:l,hash:o})}(h,{relative:s}),_=function(e,t){let{target:n,replace:i,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,c=Ge(),u=He(),h=Qe(e,{relative:a});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:p(u)===p(h);c(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l})}}),[u,c,h,i,s,n,e,o,a,l])}(h,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,unstable_viewTransition:f});return r.createElement("a",ct({},m,{href:n||v,onClick:y||o?i:function(e){i&&i(e),e.defaultPrevented||_(e)},ref:t,target:c}))}));const kt=r.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,unstable_viewTransition:c,children:h}=e,d=ut(e,dt),f=Qe(l,{relative:d.relative}),p=He(),m=r.useContext(je),{navigator:g}=r.useContext(Ve),y=null!=m&&function(e,t){void 0===t&&(t={});let n=r.useContext(mt);null==n&&u(!1);let{basename:i}=Nt(Ct.useViewTransitionState),s=Qe(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=O(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=O(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=P(s.pathname,a)||null!=P(s.pathname,o)}(f)&&!0===c,v=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,_=p.pathname,w=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(_=_.toLowerCase(),w=w?w.toLowerCase():null,v=v.toLowerCase());const b="/"!==v&&v.endsWith("/")?v.length-1:v.length;let E,I=_===v||!o&&_.startsWith(v)&&"/"===_.charAt(b),S=null!=w&&(w===v||!o&&w.startsWith(v)&&"/"===w.charAt(v.length)),T={isActive:I,isPending:S,isTransitioning:y},k=I?n:void 0;E="function"===typeof s?s(T):[s,I?"active":null,S?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let C="function"===typeof a?a(T):a;return r.createElement(Tt,ct({},d,{"aria-current":k,className:E,ref:t,style:C,to:l,unstable_viewTransition:c}),"function"===typeof h?h(T):h)}));var Ct,xt;function Nt(e){let t=r.useContext(Ue);return t||u(!1),t}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ct||(Ct={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(xt||(xt={}));var At=n(995),Rt=r,Pt=Symbol.for("react-redux-context"),Dt="undefined"!==typeof globalThis?globalThis:{};function Ot(){var e;if(!Rt.createContext)return{};const t=null!==(e=Dt[Pt])&&void 0!==e?e:Dt[Pt]=new Map;let n=t.get(Rt.createContext);return n||(n=Rt.createContext(null),t.set(Rt.createContext,n)),n}var Lt=Ot(),Mt=()=>{throw new Error("uSES not initialized!")};function Ft(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt;return function(){return Rt.useContext(e)}}var Ut=Ft(),jt=Mt,Vt=(e,t)=>e===t;function qt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt;const t=e===Lt?Ut:Ft(e);return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:r=Vt,devModeChecks:i={}}="function"===typeof n?{equalityFn:n}:n;const{store:s,subscription:o,getServerState:a,stabilityCheck:l,identityFunctionCheck:c}=t(),u=(Rt.useRef(!0),Rt.useCallback({[e.name]:t=>e(t)}[e.name],[e,l,i.stabilityCheck])),h=jt(o.addNestedSub,s.getState,a||s.getState,u,r);return Rt.useDebugValue(h),h}}var zt=qt();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");function Bt(e){e()}var Wt={notify(){},get:()=>[]};function Ht(e,t){let n,r=Wt,i=0,s=!1;function o(){c.onStateChange&&c.onStateChange()}function a(){i++,n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Bt((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){let t=[],n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0,i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function l(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=Wt)}const c={addNestedSub:function(e){a();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,a())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>r};return c}var Kt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?Rt.useLayoutEffect:Rt.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var Gt=function(e){let{store:t,context:n,children:r,serverState:i,stabilityCheck:s="once",identityFunctionCheck:o="once"}=e;const a=Rt.useMemo((()=>{const e=Ht(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0,stabilityCheck:s,identityFunctionCheck:o}}),[t,i,s,o]),l=Rt.useMemo((()=>t.getState()),[t]);Kt((()=>{const{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[a,l]);const c=n||Lt;return Rt.createElement(c.Provider,{value:a},r)};function Qt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt;const t=e===Lt?Ut:Ft(e);return function(){const{store:e}=t();return e}}var Yt=Qt();function $t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt;const t=e===Lt?Yt:Qt(e);return function(){return t().dispatch}}var Jt,Xt=$t();Jt=At.useSyncExternalStoreWithSelector,jt=Jt,(e=>{e})(r.useSyncExternalStore);var Zt=Symbol.for("immer-nothing"),en=Symbol.for("immer-draftable"),tn=Symbol.for("immer-state");function nn(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var rn=Object.getPrototypeOf;function sn(e){return!!e&&!!e[tn]}function on(e){var t;return!!e&&(ln(e)||Array.isArray(e)||!!e[en]||!(null===(t=e.constructor)||void 0===t||!t[en])||fn(e)||pn(e))}var an=Object.prototype.constructor.toString();function ln(e){if(!e||"object"!==typeof e)return!1;const t=rn(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===an}function cn(e,t){0===un(e)?Object.entries(e).forEach((n=>{let[r,i]=n;t(r,i,e)})):e.forEach(((n,r)=>t(r,n,e)))}function un(e){const t=e[tn];return t?t.type_:Array.isArray(e)?1:fn(e)?2:pn(e)?3:0}function hn(e,t){return 2===un(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function dn(e,t,n){const r=un(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function fn(e){return e instanceof Map}function pn(e){return e instanceof Set}function mn(e){return e.copy_||e.base_}function gn(e,t){if(fn(e))return new Map(e);if(pn(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&ln(e)){if(!rn(e)){const t=Object.create(null);return Object.assign(t,e)}return{...e}}const n=Object.getOwnPropertyDescriptors(e);delete n[tn];let r=Reflect.ownKeys(n);for(let i=0;i<r.length;i++){const t=r[i],s=n[t];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[t]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[t]})}return Object.create(rn(e),n)}function yn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _n(e)||sn(e)||!on(e)||(un(e)>1&&(e.set=e.add=e.clear=e.delete=vn),Object.freeze(e),t&&cn(e,((e,t)=>yn(t,!0)))),e}function vn(){nn(2)}function _n(e){return Object.isFrozen(e)}var wn,bn={};function En(e){const t=bn[e];return t||nn(0),t}function In(){return wn}function Sn(e,t){t&&(En("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Tn(e){kn(e),e.drafts_.forEach(xn),e.drafts_=null}function kn(e){e===wn&&(wn=e.parent_)}function Cn(e){return wn={drafts_:[],parent_:wn,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function xn(e){const t=e[tn];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Nn(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[tn].modified_&&(Tn(t),nn(4)),on(e)&&(e=An(t,e),t.parent_||Pn(t,e)),t.patches_&&En("Patches").generateReplacementPatches_(n[tn].base_,e,t.patches_,t.inversePatches_)):e=An(t,n,[]),Tn(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Zt?e:void 0}function An(e,t,n){if(_n(t))return t;const r=t[tn];if(!r)return cn(t,((i,s)=>Rn(e,r,t,i,s,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return Pn(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,s=!1;3===r.type_&&(i=new Set(t),t.clear(),s=!0),cn(i,((i,o)=>Rn(e,r,t,i,o,n,s))),Pn(e,t,!1),n&&e.patches_&&En("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Rn(e,t,n,r,i,s,o){if(sn(i)){const o=An(e,i,s&&t&&3!==t.type_&&!hn(t.assigned_,r)?s.concat(r):void 0);if(dn(n,r,o),!sn(o))return;e.canAutoFreeze_=!1}else o&&n.add(i);if(on(i)&&!_n(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;An(e,i),t&&t.scope_.parent_||Pn(e,i)}}function Pn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&yn(t,n)}var Dn={get(e,t){if(t===tn)return e;const n=mn(e);if(!hn(n,t))return function(e,t,n){var r;const i=Mn(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!on(r)?r:r===Ln(e.base_,t)?(Un(e),e.copy_[t]=jn(r,e)):r},has:(e,t)=>t in mn(e),ownKeys:e=>Reflect.ownKeys(mn(e)),set(e,t,n){const r=Mn(mn(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=Ln(mn(e),t),i=null===r||void 0===r?void 0:r[tn];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||hn(e.base_,t)))return!0;Un(e),Fn(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Ln(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,Un(e),Fn(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=mn(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){nn(11)},getPrototypeOf:e=>rn(e.base_),setPrototypeOf(){nn(12)}},On={};function Ln(e,t){const n=e[tn];return(n?mn(n):e)[t]}function Mn(e,t){if(!(t in e))return;let n=rn(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=rn(n)}}function Fn(e){e.modified_||(e.modified_=!0,e.parent_&&Fn(e.parent_))}function Un(e){e.copy_||(e.copy_=gn(e.base_,e.scope_.immer_.useStrictShallowCopy_))}cn(Dn,((e,t)=>{On[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),On.deleteProperty=function(e,t){return On.set.call(this,e,t,void 0)},On.set=function(e,t,n){return Dn.set.call(this,e[0],t,n,e[0])};function jn(e,t){const n=fn(e)?En("MapSet").proxyMap_(e,t):pn(e)?En("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:In(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Dn;n&&(i=[r],s=On);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}(e,t);return(t?t.scope_:In()).drafts_.push(n),n}function Vn(e){return sn(e)||nn(10),qn(e)}function qn(e){if(!on(e)||_n(e))return e;const t=e[tn];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=gn(e,t.scope_.immer_.useStrictShallowCopy_)}else n=gn(e,!0);return cn(n,((e,t)=>{dn(n,e,qn(t))})),t&&(t.finalized_=!1),n}var zn=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return r.produce(e,(e=>t.call(this,e,...s)))}}let r;if("function"!==typeof t&&nn(6),void 0!==n&&"function"!==typeof n&&nn(7),on(e)){const i=Cn(this),s=jn(e,void 0);let o=!0;try{r=t(s),o=!1}finally{o?Tn(i):kn(i)}return Sn(i,n),Nn(r,i)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===Zt&&(r=void 0),this.autoFreeze_&&yn(r,!0),n){const t=[],i=[];En("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}nn(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return t.produceWithPatches(n,(t=>e(t,...i)))};let r,i;const s=this.produce(e,n,((e,t)=>{r=e,i=t}));return[s,r,i]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){on(e)||nn(8),sn(e)&&(e=Vn(e));const t=Cn(this),n=jn(e,void 0);return n[tn].isManual_=!0,kn(t),n}finishDraft(e,t){const n=e&&e[tn];n&&n.isManual_||nn(9);const{scope_:r}=n;return Sn(r,t),Nn(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=En("Patches").applyPatches_;return sn(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},Bn=zn.produce;zn.produceWithPatches.bind(zn),zn.setAutoFreeze.bind(zn),zn.setUseStrictShallowCopy.bind(zn),zn.applyPatches.bind(zn),zn.createDraft.bind(zn),zn.finishDraft.bind(zn);function Wn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var Hn=e=>Array.isArray(e)?e:[e];function Kn(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every((e=>"function"===typeof e))){const n=e.map((e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e)).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var Gn="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}},Qn=0,Yn=1;function $n(){return{s:Qn,v:void 0,o:null,p:null}}function Jn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=$n();const{resultEqualityCheck:r}=t;let i,s=0;function o(){let t=n;const{length:o}=arguments;for(let e=0,n=o;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=$n(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=$n(),e.set(n,t)):t=r}}const a=t;let l;if(t.s===Yn?l=t.v:(l=e.apply(null,arguments),s++),a.s=Yn,r){var c,u;const e=null!==(c=null===(u=i)||void 0===u?void 0:u.deref())&&void 0!==c?c:i;null!=e&&r(e,l)&&(l=e,0!==s&&s--);i="object"===typeof l&&null!==l||"function"===typeof l?new Gn(l):l}return a.v=l,l}return o.clearCache=()=>{n=$n(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function Xn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i="function"===typeof e?{memoize:e,memoizeOptions:n}:e;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r,s=0,o=0,a={},l=t.pop();"object"===typeof l&&(a=l,l=t.pop()),Wn(l,"createSelector expects an output function after the inputs, but received: [".concat(typeof l,"]"));const c={...i,...a},{memoize:u,memoizeOptions:h=[],argsMemoize:d=Jn,argsMemoizeOptions:f=[],devModeChecks:p={}}=c,m=Hn(h),g=Hn(f),y=Kn(t),v=u((function(){return s++,l.apply(null,arguments)}),...m);const _=d((function(){o++;const e=function(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}(y,arguments);return r=v.apply(null,e),r}),...g);return Object.assign(_,{resultFunc:l,memoizedResultFunc:v,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>r,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:u,argsMemoize:d})}}function Zn(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var er=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),tr=()=>Math.random().toString(36).substring(7).split("").join("."),nr={INIT:"@@redux/INIT".concat(tr()),REPLACE:"@@redux/REPLACE".concat(tr()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(tr())};function rr(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function ir(e,t,n){if("function"!==typeof e)throw new Error(Zn(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Zn(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Zn(1));return n(ir)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach(((e,t)=>{o.set(t,e)})))}function u(){if(l)throw new Error(Zn(3));return i}function h(e){if("function"!==typeof e)throw new Error(Zn(4));if(l)throw new Error(Zn(5));let t=!0;c();const n=a++;return o.set(n,e),function(){if(t){if(l)throw new Error(Zn(6));t=!1,c(),o.delete(n),s=null}}}function d(e){if(!rr(e))throw new Error(Zn(7));if("undefined"===typeof e.type)throw new Error(Zn(8));if("string"!==typeof e.type)throw new Error(Zn(17));if(l)throw new Error(Zn(9));try{l=!0,i=r(i,e)}finally{l=!1}return(s=o).forEach((e=>{e()})),e}d({type:nr.INIT});return{dispatch:d,subscribe:h,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Zn(10));r=e,d({type:nr.REPLACE})},[er]:function(){const e=h;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(Zn(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[er](){return this}}}}}function sr(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const r=t[o];0,"function"===typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:nr.INIT}))throw new Error(Zn(12));if("undefined"===typeof n(void 0,{type:nr.PROBE_UNKNOWN_ACTION()}))throw new Error(Zn(13))}))}(n)}catch(s){i=s}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(i)throw i;let s=!1;const o={};for(let i=0;i<r.length;i++){const a=r[i],l=n[a],c=e[a],u=l(c,t);if("undefined"===typeof u){t&&t.type;throw new Error(Zn(14))}o[a]=u,s=s||u!==c}return s=s||r.length!==Object.keys(e).length,s?o:e}}function or(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}function ar(e){return t=>{let{dispatch:n,getState:r}=t;return t=>i=>"function"===typeof i?i(n,r,e):t(i)}}var lr=ar(),cr=ar,ur=(function(){const e=Xn(...arguments)}(Jn),"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?or:or.apply(null,arguments)});"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function hr(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(Ar(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>function(e){return rr(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,n}var dr=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function fr(e){return on(e)?Bn(e,(()=>{})):e}function pr(e,t,n){if(e.has(t)){let r=e.get(t);return n.update&&(r=n.update(r,t,e),e.set(t,r)),r}if(!n.insert)throw new Error(Ar(10));const r=n.insert(t,e);return e.set(t,r),r}var mr="RTK_autoBatch",gr=e=>t=>{setTimeout(t,e)},yr="undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:gr(10),vr=e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let r=new dr(e);return n&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let r=!0,i=!1,s=!1;const o=new Set,a="tick"===e.type?queueMicrotask:"raf"===e.type?yr:"callback"===e.type?e.queueNotification:gr(e.timeout),l=()=>{s=!1,i&&(i=!1,o.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){const t=n.subscribe((()=>r&&e()));return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){try{var t;return r=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[mr]),i=!r,i&&(s||(s=!0,a(l))),n.dispatch(e)}finally{r=!0}}})}}("object"===typeof n?n:void 0)),r};function _r(e){const t={},n=[];let r;const i={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(Ar(28));if(r in t)throw new Error(Ar(29));return t[r]=n,i},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(r=e,i)};return e(i),[t,n,r]}var wr=Symbol.for("rtk-slice-createasyncthunk");function br(e,t){return"".concat(e,"/").concat(t)}function Er(e,t,n,r){function i(i){let s=n.call(e,i);"undefined"===typeof s&&r&&(s=e.getInitialState());for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return t(s,...a)}return i.unwrapped=t,i}var Ir=function(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[wr];return function(e){const{name:t,reducerPath:r=t}=e;if(!t)throw new Error(Ar(11));const i=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},s=Object.keys(i),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},a={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(Ar(12));if(n in o.sliceCaseReducersByType)throw new Error(Ar(13));return o.sliceCaseReducersByType[n]=t,a},addMatcher:(e,t)=>(o.sliceMatchers.push({matcher:e,reducer:t}),a),exposeAction:(e,t)=>(o.actionCreators[e]=t,a),exposeCaseReducer:(e,t)=>(o.sliceCaseReducersByName[e]=t,a)};function l(){const[t={},n=[],r]="function"===typeof e.extraReducers?_r(e.extraReducers):[e.extraReducers],i={...t,...o.sliceCaseReducersByType};return function(e,t){let n,[r,i,s]=_r(t);if(function(e){return"function"===typeof e}(e))n=()=>fr(e());else{const t=fr(e);n=()=>t}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,o=[r[t.type],...i.filter((e=>{let{matcher:n}=e;return n(t)})).map((e=>{let{reducer:t}=e;return t}))];return 0===o.filter((e=>!!e)).length&&(o=[s]),o.reduce(((e,n)=>{if(n){if(sn(e)){const r=n(e,t);return void 0===r?e:r}if(on(e))return Bn(e,(e=>n(e,t)));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw new Error(Ar(9))}return r}}return e}),e)}return o.getInitialState=n,o}(e.initialState,(e=>{for(let t in i)e.addCase(t,i[t]);for(let t of o.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)}))}s.forEach((r=>{const s=i[r],o={reducerName:r,type:br(t,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function(e,t,n){let r,i,{type:s,reducerName:o,createNotation:a}=e;if("reducer"in t){if(a&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(Ar(17));r=t.reducer,i=t.prepare}else r=t;n.addCase(s,r).exposeCaseReducer(o,r).exposeAction(o,i?hr(s,i):hr(s))}(o,s,a):function(e,t,n,r){let{type:i,reducerName:s}=e;if(!r)throw new Error(Ar(18));const{payloadCreator:o,fulfilled:a,pending:l,rejected:c,settled:u,options:h}=t,d=r(i,o,h);n.exposeAction(s,d),a&&n.addCase(d.fulfilled,a);l&&n.addCase(d.pending,l);c&&n.addCase(d.rejected,c);u&&n.addMatcher(d.settled,u);n.exposeCaseReducer(s,{fulfilled:a||Sr,pending:l||Sr,rejected:c||Sr,settled:u||Sr})}(o,s,a,n)}));const c=e=>e,u=new WeakMap;let h;const d={name:t,reducerPath:r,reducer:(e,t)=>(h||(h=l()),h(e,t)),actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:()=>(h||(h=l()),h.getInitialState()),getSelectors(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const n=pr(u,this,{insert:()=>new WeakMap});return pr(n,t,{insert:()=>{const n={};for(const[i,s]of Object.entries(null!==(r=e.selectors)&&void 0!==r?r:{})){var r;n[i]=Er(this,s,t,this!==d)}return n}})},selectSlice(e){let t=e[this.reducerPath];return"undefined"===typeof t&&this!==d&&(t=this.getInitialState()),t},get selectors(){return this.getSelectors(this.selectSlice)},injectInto(e){let{reducerPath:t,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=null!==t&&void 0!==t?t:this.reducerPath;return e.inject({reducerPath:r,reducer:this.reducer},n),{...this,reducerPath:r}}};return d}}();function Sr(){}var Tr="listener",kr="completed",Cr="cancelled";"task-".concat(Cr),"task-".concat(kr),"".concat(Tr,"-").concat(Cr),"".concat(Tr,"-").concat(kr);var{assign:xr}=Object,Nr="listenerMiddleware";hr("".concat(Nr,"/add")),hr("".concat(Nr,"/removeAll")),hr("".concat(Nr,"/remove"));Symbol.for("rtk-state-proxy-original");function Ar(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}const Rr=Ir({name:"auth",initialState:{user:null},reducers:{setUser:(e,t)=>{e.user=t.payload,console.log("User logged in:",t.payload.email),window.localStorage.setItem("user",JSON.stringify(t.payload))},removeUser:e=>{e.user&&console.log("Logging out user:",e.user.email),e.user=null,window.localStorage.removeItem("user")},setUserFromLocalStorage:e=>{var t=window.localStorage.getItem("user");t?(t=JSON.parse(t),e.user=t):e.user=null}}}),{setUser:Pr,removeUser:Dr,setUserFromLocalStorage:Or}=Rr.actions;var Lr=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=null!==e&&void 0!==e?e:{};let s=new dr;return t&&(function(e){return"boolean"===typeof e}(t)?s.push(lr):s.push(cr(t.extraArgument))),s},{reducer:n,middleware:r,devTools:i=!0,preloadedState:s,enhancers:o}=e||{};let a,l;if("function"===typeof n)a=n;else{if(!rr(n))throw new Error(Ar(1));a=sr(n)}l="function"===typeof r?r(t):t();let c=or;i&&(c=ur({trace:!1,..."object"===typeof i&&i}));const u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(Zn(15))};const o={getState:i.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s(e,...n)}},a=t.map((e=>e(o)));return s=or(...a)(i.dispatch),{...i,dispatch:s}}}(...l),h=vr(u);let d="function"===typeof o?o(h):h();return ir(a,s,c(...d))}({reducer:{auth:Rr.reducer}});const Mr=Lr;var Fr=n(184);function Ur(){const e=Xt(),t=Ge(),n=zt((e=>e.auth.user));return(0,Fr.jsxs)("nav",{className:"navbar navbar-dark navbar-expand-sm nav",children:[(0,Fr.jsx)("div",{className:"navbar-brand",children:"BIG CINEMAS"}),(0,Fr.jsx)("div",{children:(0,Fr.jsx)("button",{className:"bts navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,Fr.jsx)("span",{className:"navbar-toggler-icon"})})}),(0,Fr.jsx)("div",{className:"collapse navbar-collapse mr-auto",id:"navbarNav",children:(0,Fr.jsxs)("ul",{className:"navbar-nav ml-auto",children:[!n||null===n.id&&"guest"!==n.username?(0,Fr.jsx)("li",{className:"nav-link",children:(0,Fr.jsx)(kt,{to:"/",className:"li",activeclassname:"active",children:"Home"})}):(0,Fr.jsx)("li",{className:"nav-link",children:(0,Fr.jsx)(kt,{to:"/Shows",className:"li",activeclassname:"active",children:"Shows"})}),(0,Fr.jsx)("li",{className:"nav-link",children:(0,Fr.jsx)(kt,{to:"/AboutUs",className:"li",activeclassname:"active",children:"About us"})}),!n&&(0,Fr.jsx)("li",{className:"nav-link",children:(0,Fr.jsx)(kt,{to:"/Signup",className:"li",activeclassname:"active",children:"Signup"})}),n?(0,Fr.jsx)("li",{className:"nav-link",children:(0,Fr.jsx)("span",{className:"li",activeclassname:"active",onClick:async()=>{try{e(Dr()),setTimeout((()=>{console.clear(),console.log("Console cleared after logout."),t("/AdminLogin"),console.log("Navigated to AdminLogin after console clear.")}),1)}catch(Ph){alert(Ph.message)}},children:"Logout"})}):(0,Fr.jsx)("li",{className:"nav-link",children:(0,Fr.jsx)(kt,{to:"/AdminLogin",className:"li",activeclassname:"active",children:"Login"})})]})})]})}function jr(){return(0,Fr.jsxs)("div",{className:"App Home",children:[(0,Fr.jsx)(Ur,{}),(0,Fr.jsx)("section",{className:"AboutUs z-index mt-5",children:(0,Fr.jsx)("div",{className:"container-fluid",children:(0,Fr.jsx)("div",{className:"row",children:(0,Fr.jsx)("div",{className:"col-sm-12",children:(0,Fr.jsx)("div",{className:"col-sm-12",children:(0,Fr.jsx)("div",{className:"mt-4",children:(0,Fr.jsx)("div",{className:"text-content",children:(0,Fr.jsx)("div",{className:"text-center",style:{marginTop:"180px"},children:(0,Fr.jsx)(kt,{className:"btn btn-dark btn-md CA",to:"/Shows",children:"Current Shows"})})})})})})})})})]})}function Vr(){return(0,Fr.jsxs)("div",{className:"App AboutUsBG",children:[(0,Fr.jsx)(Ur,{}),(0,Fr.jsx)("section",{className:"AboutUs z-index mt-5",children:(0,Fr.jsx)("div",{className:"container-fluid",children:(0,Fr.jsx)("div",{className:"row",children:(0,Fr.jsx)("div",{className:"col-sm-12",children:(0,Fr.jsxs)("div",{className:"col-sm-12",children:[(0,Fr.jsx)("div",{className:"no-paddingtop",children:(0,Fr.jsx)("div",{className:"header-holder same-ratio no-padding",children:(0,Fr.jsx)("div",{className:"left elements",children:(0,Fr.jsx)("h2",{className:"heading text-uppercase",children:"About Us"})})})}),(0,Fr.jsx)("div",{className:"mt-4",children:(0,Fr.jsxs)("div",{className:"text-content",children:[(0,Fr.jsx)("p",{children:"Welcome to BIG CINEMAS, the largest and the most premium film exhibitor in India with 1712 screens across 113 cities (India and Sri Lanka) with 359 properties and an aggregate seating capacity of 3.58 lakh seats. Over the years, we have consistently increased our screen count, both organically and inorganically, through strategic investments and acquisitions which includes \u2018Cinemax Cinemas\u2019 in November 2012, \u2018DT Cinemas\u2019 in May 2016, \u2018SPI Cinemas\u2019 in August 2018. We recently completed the merger with INOX Leisure Limited, which has added to our storied history of becoming game changers in the film exhibition industry for over 25 years and transforming the out of home entertainment in the country."}),(0,Fr.jsx)("p",{children:"Our mission is to advance and reimagine the movie-going experience by continuing to reinvent ourselves in keeping up with the times and the ever-changing entertainment landscape to make our brand aspirational and accessible. We take pride in our strategically located cinemas and we continuously invest in introducing premium formats, comfortable seating, sound, projection, ambience, and food & beverage to meet evolving consumer expectations so that our patrons have a memorable experience every time they visit our cinemas."}),(0,Fr.jsx)("p",{children:"We serve as a conduit between consumers and the film industry on one hand and the retail industry and real estate development on the other. As a leading player in the film exhibition industry, our company is spearheading the establishment of a robust ecosystem that brings together key partners, including filmmakers, studios, content providers, equipment and concession manufacturers, data and technology companies, all of whom rely on the strength of our business and the communities we serve. We engage with multiple channels to connect with our over 180 million patrons through research, loyalty, online, digital, and offline modes to provide a platform to showcase film and non-film content and identifying new trends in the film exhibition industry."}),(0,Fr.jsx)("p",{children:"Our diversified revenue stream comes mainly from box office and non-box office, which primarily includes revenue from Sale of Food and Beverages, advertisement income, convenience fees, and income from movie distribution, among others. Our leadership across key operating metrics and robust financial position is backed by experienced Promoters, Key Managerial Personnel, and a senior management team with an established track record."}),(0,Fr.jsx)("p",{children:"Thank you for choosing BIG Cinemas Limited for your entertainment needs. We look forward to welcoming you to our cinemas."})]})})]})})})})})]})}var qr={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},zr=r.createContext&&r.createContext(qr),Br=function(){return Br=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Br.apply(this,arguments)},Wr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Hr(e){return e&&e.map((function(e,t){return r.createElement(e.tag,Br({key:t},e.attr),Hr(e.child))}))}function Kr(e){return function(t){return r.createElement(Gr,Br({attr:Br({},e.attr)},t),Hr(e.child))}}function Gr(e){var t=function(t){var n,i=e.attr,s=e.size,o=e.title,a=Wr(e,["attr","size","title"]),l=s||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",Br({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,a,{className:n,style:Br(Br({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&r.createElement("title",null,o),e.children)};return void 0!==zr?r.createElement(zr.Consumer,null,(function(e){return t(e)})):t(qr)}function Qr(e){return Kr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function Yr(e){return Kr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"}}]})(e)}function $r(e){return Kr({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"}}]})(e)}function Jr(e){return Kr({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M11.5 21h-4.5a2 2 0 0 1 -2 -2v-6a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v.5"}},{tag:"path",attr:{d:"M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0"}},{tag:"path",attr:{d:"M8 11v-4a4 4 0 1 1 8 0v4"}},{tag:"path",attr:{d:"M15 19l2 2l4 -4"}}]})(e)}function Xr(e){return Kr({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M11.5 21h-4.5a2 2 0 0 1 -2 -2v-6a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2"}},{tag:"path",attr:{d:"M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0"}},{tag:"path",attr:{d:"M8 11v-4a4 4 0 1 1 8 0v4"}},{tag:"path",attr:{d:"M20 21l2 -2l-2 -2"}},{tag:"path",attr:{d:"M17 17l-2 2l2 2"}}]})(e)}const Zr=!1,ei=!1,ti="${JSCORE_VERSION}",ni=function(e,t){if(!e)throw ri(t)},ri=function(e){return new Error("Firebase Database ("+ti+") INTERNAL ASSERT FAILED: "+e)},ii=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},si={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ii(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new oi;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class oi extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ai=function(e){const t=ii(e);return si.encodeByteArray(t,!0)},li=function(e){return ai(e).replace(/\./g,"")},ci=function(e){try{return si.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ui(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ui(e[n],t[n]));return e}const hi=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,di=()=>{try{return hi()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/github.io/bigcinemas",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&ci(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},fi=e=>{const t=(e=>{var t,n;return null===(n=null===(t=di())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},pi=()=>{var e;return null===(e=di())||void 0===e?void 0:e.config};class mi{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function gi(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[li(JSON.stringify({alg:"none",type:"JWT"})),li(JSON.stringify(s)),""].join(".")}function yi(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function vi(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yi())}function _i(){var e;const t=null===(e=di())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function wi(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function bi(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ei(){const e=yi();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ii(){return!0===Zr||!0===ei}function Si(){try{return"object"===typeof indexedDB}catch(e){return!1}}class Ti extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ki.prototype.create)}}class ki{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Ci,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ti(n,s,t)}}const Ci=/\{\$([^}]+)}/g;function xi(e){return JSON.parse(e)}function Ni(e){return JSON.stringify(e)}const Ai=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=xi(ci(s[0])||""),n=xi(ci(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:r,signature:i}};function Ri(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Pi(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Di(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Oi(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Li(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Mi(n)&&Mi(s)){if(!Li(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Mi(e){return null!==e&&"object"===typeof e}function Fi(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Ui(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function ji(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Vi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function qi(e,t){const n=new zi(e,t);return n.subscribe.bind(n)}class zi{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Bi),void 0===r.error&&(r.error=Bi),void 0===r.complete&&(r.complete=Bi);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Bi(){}const Wi=function(e,t,n,r){let i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}};function Hi(e,t){return"".concat(e," failed: ").concat(t," argument ")}function Ki(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Hi(e,t)+"must be a valid function.")}function Gi(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Hi(e,t)+"must be a valid context object.")}const Qi=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Yi(e){return e&&e._delegate?e._delegate:e}class $i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ji="[DEFAULT]";class Xi{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new mi;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ji})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ji;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ji;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ji;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Ji?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ji;return this.component?this.component.multipleInstances?e:Ji:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Zi{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Xi(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const es=[];var ts;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ts||(ts={}));const ns={debug:ts.DEBUG,verbose:ts.VERBOSE,info:ts.INFO,warn:ts.WARN,error:ts.ERROR,silent:ts.SILENT},rs=ts.INFO,is={[ts.DEBUG]:"log",[ts.VERBOSE]:"log",[ts.INFO]:"info",[ts.WARN]:"warn",[ts.ERROR]:"error"},ss=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=is[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class os{constructor(e){this.name=e,this._logLevel=rs,this._logHandler=ss,this._userLogHandler=null,es.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ts))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ns[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ts.DEBUG,...t),this._logHandler(this,ts.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ts.VERBOSE,...t),this._logHandler(this,ts.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ts.INFO,...t),this._logHandler(this,ts.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ts.WARN,...t),this._logHandler(this,ts.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ts.ERROR,...t),this._logHandler(this,ts.ERROR,...t)}}const as=(e,t)=>t.some((t=>e instanceof t));let ls,cs;const us=new WeakMap,hs=new WeakMap,ds=new WeakMap,fs=new WeakMap,ps=new WeakMap;let ms={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return hs.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ds.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vs(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function gs(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(cs||(cs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(_s(this),n),vs(us.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vs(e.apply(_s(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(_s(this),t,...r);return ds.set(s,t.sort?t.sort():[t]),vs(s)}}function ys(e){return"function"===typeof e?gs(e):(e instanceof IDBTransaction&&function(e){if(hs.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));hs.set(e,t)}(e),as(e,ls||(ls=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ms):e)}function vs(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(vs(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&us.set(t,e)})).catch((()=>{})),ps.set(t,e),t}(e);if(fs.has(e))return fs.get(e);const t=ys(e);return t!==e&&(fs.set(e,t),ps.set(t,e)),t}const _s=e=>ps.get(e);const ws=["get","getKey","getAll","getAllKeys","count"],bs=["put","add","delete","clear"],Es=new Map;function Is(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Es.get(t))return Es.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=bs.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ws.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Es.set(t,s),s}ms=(e=>({...e,get:(t,n,r)=>Is(t,n)||e.get(t,n,r),has:(t,n)=>!!Is(t,n)||e.has(t,n)}))(ms);class Ss{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Ts="@firebase/app",ks="0.9.25",Cs=new os("@firebase/app"),xs="[DEFAULT]",Ns={[Ts]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},As=new Map,Rs=new Map;function Ps(e,t){try{e.container.addComponent(t)}catch(n){Cs.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ds(e,t){e.container.addOrOverwriteComponent(t)}function Os(e){const t=e.name;if(Rs.has(t))return Cs.debug("There were multiple attempts to register component ".concat(t,".")),!1;Rs.set(t,e);for(const n of As.values())Ps(n,e);return!0}function Ls(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ms(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xs;Ls(e,t).clearInstance(n)}function Fs(){Rs.clear()}const Us=new ki("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class js{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new $i("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Us.create("app-deleted",{appName:this._name})}}const Vs="10.7.1";function qs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:xs,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Us.create("bad-app-name",{appName:String(i)});if(n||(n=pi()),!n)throw Us.create("no-options");const s=As.get(i);if(s){if(Li(n,s.options)&&Li(r,s.config))return s;throw Us.create("duplicate-app",{appName:i})}const o=new Zi(i);for(const l of Rs.values())o.addComponent(l);const a=new js(n,r,o);return As.set(i,a),a}function zs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xs;const t=As.get(e);if(!t&&e===xs&&pi())return qs();if(!t)throw Us.create("no-app",{appName:e});return t}function Bs(){return Array.from(As.values())}async function Ws(e){const t=e.name;As.has(t)&&(As.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Hs(e,t,n){var r;let i=null!==(r=Ns[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Cs.warn(e.join(" "))}Os(new $i("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Ks(e,t){if(null!==e&&"function"!==typeof e)throw Us.create("invalid-log-argument");!function(e,t){for(const n of es){let r=null;t&&t.level&&(r=ns[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:ts[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Gs(e){var t;t=e,es.forEach((e=>{e.setLogLevel(t)}))}const Qs="firebase-heartbeat-database",Ys=1,$s="firebase-heartbeat-store";let Js=null;function Xs(){return Js||(Js=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=vs(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(vs(o.result),e.oldVersion,e.newVersion,vs(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Qs,Ys,{upgrade:(e,t)=>{if(0===t)e.createObjectStore($s)}}).catch((e=>{throw Us.create("idb-open",{originalErrorMessage:e.message})}))),Js}async function Zs(e,t){try{const n=(await Xs()).transaction($s,"readwrite"),r=n.objectStore($s);await r.put(t,eo(e)),await n.done}catch(n){if(n instanceof Ti)Cs.warn(n.message);else{const e=Us.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Cs.warn(e.message)}}}function eo(e){return"".concat(e.name,"!").concat(e.options.appId)}class to{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ro(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=no();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=no(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),io(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),io(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=li(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function no(){return(new Date).toISOString().substring(0,10)}class ro{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Si()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Ph){t(Ph)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Xs();return await t.transaction($s).objectStore($s).get(eo(e))}catch(t){if(t instanceof Ti)Cs.warn(t.message);else{const e=Us.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Cs.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Zs(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Zs(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function io(e){return li(JSON.stringify({version:2,heartbeats:e})).length}var so;so="",Os(new $i("platform-logger",(e=>new Ss(e)),"PRIVATE")),Os(new $i("heartbeat",(e=>new to(e)),"PRIVATE")),Hs(Ts,ks,so),Hs(Ts,ks,"esm2017"),Hs("fire-js","");class oo{constructor(e,t){this._delegate=e,this.firebase=t,Ps(e,new $i("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Ws(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xs;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xs;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Ps(this._delegate,e)}_addOrOverwriteComponent(e){Ds(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ao=new ki("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const lo=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=qs(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ri(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Hs,setLogLevel:Gs,onLog:Ks,apps:null,SDK_VERSION:Vs,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(Os(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw ao.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&ui(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ri(n,e=e||xs))throw ao.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(oo);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ui(n,e)},createSubscribe:qi,ErrorFactory:ki,deepExtend:ui}),n}(),co=new os("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){co.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&co.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const uo=lo;!function(e){Hs("@firebase/app-compat","0.2.25",e)}();uo.registerVersion("firebase","10.7.1","app-compat");function ho(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const fo={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},po="EMAIL_SIGNIN",mo="PASSWORD_RESET",go="RECOVER_EMAIL",yo="REVERT_SECOND_FACTOR_ADDITION",vo="VERIFY_AND_CHANGE_EMAIL",_o="VERIFY_EMAIL";function wo(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bo=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Eo=wo,Io=new ki("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),So=new os("@firebase/auth");function To(e){if(So.logLevel<=ts.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];So.error("Auth (".concat(Vs,"): ").concat(e),...n)}}function ko(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Ao(e,...n)}function Co(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ao(e,...n)}function xo(e,t,n){const r=Object.assign(Object.assign({},Eo()),{[t]:n});return new ki("auth","Firebase",r).create(t,{appName:e.name})}function No(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&ko(e,"argument-error"),xo(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Ao(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Io.create(e,...n)}function Ro(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Ao(t,...r)}}function Po(e){const t="INTERNAL ASSERTION FAILED: "+e;throw To(t),new Error(t)}function Do(e,t){e||Po(t)}function Oo(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Lo(){return"http:"===Mo()||"https:"===Mo()}function Mo(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Fo{constructor(e,t){this.shortDelay=e,this.longDelay=t,Do(t>e,"Short delay should be less than long delay!"),this.isMobile=vi()||bi()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Lo()||wi()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Uo(e,t){Do(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class jo{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Po("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Po("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Po("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vo={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},qo=new Fo(3e4,6e4);function zo(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Bo(e,t,n,r){return Wo(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Fi(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),jo.fetch()(Ko(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Wo(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Vo),t);try{const t=new Qo(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Yo(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Yo(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Yo(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Yo(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw xo(e,a,o);ko(e,a)}}catch(i){if(i instanceof Ti)throw i;ko(e,"network-request-failed",{message:String(i)})}}async function Ho(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Bo(e,t,n,r,i);return"mfaPendingCredential"in s&&ko(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Ko(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Uo(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Go(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Qo{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Co(this.auth,"network-request-failed"))),qo.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yo(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Co(e,t,r);return i.customData._tokenResponse=n,i}function $o(e){return void 0!==e&&void 0!==e.getResponse}function Jo(e){return void 0!==e&&void 0!==e.enterprise}class Xo{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Go(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Zo(e,t){return Bo(e,"GET","/v2/recaptchaConfig",zo(e,t))}function ea(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function ta(e){return 1e3*Number(e)}function na(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return To("JWT malformed, contained fewer than 3 sections"),null;try{const e=ci(n);return e?JSON.parse(e):(To("Failed to decode base64 JWT payload"),null)}catch(i){return To("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function ra(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof Ti&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class ia{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class sa{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ea(this.lastLoginAt),this.creationTime=ea(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function oa(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ra(e,async function(e,t){return Bo(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Ro(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=ho(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!l&&c,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new sa(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,h)}class aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ro(e.idToken,"internal-error"),Ro("undefined"!==typeof e.idToken,"internal-error"),Ro("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=na(e);return Ro(t,"internal-error"),Ro("undefined"!==typeof t.exp,"internal-error"),Ro("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ro(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Wo(e,{},(async()=>{const n=Fi({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Ko(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",jo.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new aa;return n&&(Ro("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Ro("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Ro("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new aa,this.toJSON())}_performRefresh(){return Po("not implemented")}}function la(e,t){Ro("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ca{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=ho(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ia(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new sa(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ra(this,this.stsTokenManager.getToken(this.auth,e));return Ro(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Yi(e),r=await n.getIdToken(t),i=na(r);Ro(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ea(ta(i.auth_time)),issuedAtTime:ea(ta(i.iat)),expirationTime:ea(ta(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Yi(e);await oa(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ro(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ca(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ro(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await oa(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ra(this,async function(e,t){return Bo(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:_,isAnonymous:w,providerData:b,stsTokenManager:E}=t;Ro(v&&E,e,"internal-error");const I=aa.fromJSON(this.name,E);Ro("string"===typeof v,e,"internal-error"),la(u,e.name),la(h,e.name),Ro("boolean"===typeof _,e,"internal-error"),Ro("boolean"===typeof w,e,"internal-error"),la(d,e.name),la(f,e.name),la(p,e.name),la(m,e.name),la(g,e.name),la(y,e.name);const S=new ca({uid:v,auth:e,email:h,emailVerified:_,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:y});return b&&Array.isArray(b)&&(S.providerData=b.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new aa;r.updateFromServerResponse(t);const i=new ca({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await oa(i),i}}const ua=new Map;function ha(e){Do(e instanceof Function,"Expected a class definition");let t=ua.get(e);return t?(Do(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ua.set(e,t),t)}class da{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}da.type="NONE";const fa=da;function pa(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ma{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=pa(this.userKey,r.apiKey,i),this.fullPersistenceKey=pa("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ca._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ma(ha(fa),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||ha(fa);const s=pa(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=ca._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new ma(i,e,n)):new ma(i,e,n)}}function ga(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(wa(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ya(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ea(t))return"Blackberry";if(Ia(t))return"Webos";if(va(t))return"Safari";if((t.includes("chrome/")||_a(t))&&!t.includes("edge/"))return"Chrome";if(ba(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ya(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yi();return/firefox\//i.test(e)}function va(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:yi()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yi();return/crios\//i.test(e)}function wa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yi();return/iemobile/i.test(e)}function ba(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yi();return/android/i.test(e)}function Ea(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yi();return/blackberry/i.test(e)}function Ia(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yi();return/webos/i.test(e)}function Sa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yi();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ta(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yi();return Sa(e)||ba(e)||Ia(e)||Ea(e)||/windows phone/i.test(e)||wa(e)}function ka(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ga(yi());break;case"Worker":t="".concat(ga(yi()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Vs,"/").concat(r)}class Ca{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class xa{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Na{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ra(this),this.idTokenSubscription=new Ra(this),this.beforeStateQueue=new Ca(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Io,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ha(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await ma.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ro(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await oa(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Yi(e):null;return t&&Ro(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ro(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(ha(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Bo(e,"GET","/v2/passwordPolicy",zo(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new xa(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ki("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Bo(e,"POST","/v2/accounts:revokeToken",zo(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ha(e)||this._popupRedirectResolver;Ro(t,this,"argument-error"),this.redirectPersistenceManager=await ma.create(this,[ha(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ro(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ro(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ka(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(So.logLevel<=ts.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];So.warn("Auth (".concat(Vs,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Aa(e){return Yi(e)}class Ra{constructor(e){this.auth=e,this.observer=null,this.addObserver=qi((e=>this.observer=e))}get next(){return Ro(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Pa(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Co("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Da(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Oa{constructor(e){this.type="recaptcha-enterprise",this.auth=Aa(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Jo(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Zo(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Xo(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Jo(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Pa("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function La(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Oa(e);let s;try{s=await i.verify(n)}catch(Ph){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ma(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await La(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await La(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Fa(e,t,n){const r=Aa(e);Ro(r._canInitEmulator,r,"emulator-config-failed"),Ro(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Ua(t),{host:o,port:a}=function(e){const t=Ua(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ja(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ja(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ua(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ja(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Va{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Po("not implemented")}_getIdTokenResponse(e){return Po("not implemented")}_linkToIdToken(e,t){return Po("not implemented")}_getReauthenticationResolver(e){return Po("not implemented")}}async function qa(e,t){return Bo(e,"POST","/v1/accounts:resetPassword",zo(e,t))}async function za(e,t){return Bo(e,"POST","/v1/accounts:signUp",t)}async function Ba(e,t){return Ho(e,"POST","/v1/accounts:signInWithPassword",zo(e,t))}async function Wa(e,t){return Bo(e,"POST","/v1/accounts:sendOobCode",zo(e,t))}async function Ha(e,t){return Wa(e,t)}async function Ka(e,t){return Wa(e,t)}class Ga extends Va{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ga(e,t,"password")}static _fromEmailAndCode(e,t){return new Ga(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ma(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ba);case"emailLink":return async function(e,t){return Ho(e,"POST","/v1/accounts:signInWithEmailLink",zo(e,t))}(e,{email:this._email,oobCode:this._password});default:ko(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ma(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",za);case"emailLink":return async function(e,t){return Ho(e,"POST","/v1/accounts:signInWithEmailLink",zo(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ko(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Qa(e,t){return Ho(e,"POST","/v1/accounts:signInWithIdp",zo(e,t))}class Ya extends Va{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ya(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ko("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=ho(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Ya(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Qa(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Qa(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qa(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fi(t)}return e}}const $a={USER_NOT_FOUND:"user-not-found"};class Ja extends Va{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ja({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ja({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Ho(e,"POST","/v1/accounts:signInWithPhoneNumber",zo(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Ho(e,"POST","/v1/accounts:signInWithPhoneNumber",zo(e,t));if(n.temporaryProof)throw Yo(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Ho(e,"POST","/v1/accounts:signInWithPhoneNumber",zo(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),$a)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ja({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Xa{constructor(e){var t,n,r,i,s,o;const a=Ui(ji(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Ro(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Ui(ji(e)).link,n=t?Ui(ji(t)).deep_link_id:null,r=Ui(ji(e)).deep_link_id;return(r?Ui(ji(r)).link:null)||r||n||t||e}(e);try{return new Xa(t)}catch(n){return null}}}class Za{constructor(){this.providerId=Za.PROVIDER_ID}static credential(e,t){return Ga._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Xa.parseLink(t);return Ro(n,"argument-error"),Ga._fromEmailAndCode(e,n.code,n.tenantId)}}Za.PROVIDER_ID="password",Za.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Za.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class el{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class tl extends el{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class nl extends tl{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Ro("providerId"in t&&"signInMethod"in t,"argument-error"),Ya._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Ro(e.idToken||e.accessToken,"argument-error"),Ya._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return nl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return nl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new nl(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(l){return null}}}class rl extends tl{constructor(){super("facebook.com")}static credential(e){return Ya._fromParams({providerId:rl.PROVIDER_ID,signInMethod:rl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rl.credentialFromTaggedObject(e)}static credentialFromError(e){return rl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return rl.credential(t.oauthAccessToken)}catch(n){return null}}}rl.FACEBOOK_SIGN_IN_METHOD="facebook.com",rl.PROVIDER_ID="facebook.com";class il extends tl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ya._fromParams({providerId:il.PROVIDER_ID,signInMethod:il.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return il.credentialFromTaggedObject(e)}static credentialFromError(e){return il.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return il.credential(n,r)}catch(i){return null}}}il.GOOGLE_SIGN_IN_METHOD="google.com",il.PROVIDER_ID="google.com";class sl extends tl{constructor(){super("github.com")}static credential(e){return Ya._fromParams({providerId:sl.PROVIDER_ID,signInMethod:sl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sl.credentialFromTaggedObject(e)}static credentialFromError(e){return sl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return sl.credential(t.oauthAccessToken)}catch(n){return null}}}sl.GITHUB_SIGN_IN_METHOD="github.com",sl.PROVIDER_ID="github.com";class ol extends Va{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Qa(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Qa(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qa(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new ol(n,i):null}static _create(e,t){return new ol(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class al extends el{constructor(e){Ro(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return al.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return al.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=ol.fromJSON(e);return Ro(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return ol._create(r,n)}catch(i){return null}}}class ll extends tl{constructor(){super("twitter.com")}static credential(e,t){return Ya._fromParams({providerId:ll.PROVIDER_ID,signInMethod:ll.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ll.credentialFromTaggedObject(e)}static credentialFromError(e){return ll.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ll.credential(n,r)}catch(i){return null}}}async function cl(e,t){return Ho(e,"POST","/v1/accounts:signUp",zo(e,t))}ll.TWITTER_SIGN_IN_METHOD="twitter.com",ll.PROVIDER_ID="twitter.com";class ul{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await ca._fromIdTokenResponse(e,n,r),s=hl(n);return new ul({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=hl(n);return new ul({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function hl(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class dl extends Ti{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,dl.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new dl(e,t,n,r)}}function fl(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw dl._fromErrorAndOperation(e,n,t,r);throw n}))}function pl(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function ml(e,t){const n=Yi(e);await yl(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Bo(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=pl(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function gl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ra(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ul._forOperation(e,"link",r)}async function yl(e,t,n){await oa(t);const r=!1===e?"provider-already-linked":"no-such-provider";Ro(pl(t.providerData).has(n)===e,t.auth,r)}async function vl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await ra(e,fl(r,i,t,e),n);Ro(s.idToken,r,"internal-error");const o=na(s.idToken);Ro(o,r,"internal-error");const{sub:a}=o;return Ro(e.uid===a,r,"user-mismatch"),ul._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&ko(r,"user-mismatch"),s}}async function _l(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await fl(e,r,t),s=await ul._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function wl(e,t){return _l(Aa(e),t)}async function bl(e,t){const n=Yi(e);return await yl(!1,n,t.providerId),gl(n,t)}async function El(e,t){return vl(Yi(e),t)}async function Il(e,t){const n=Aa(e),r=await async function(e,t){return Ho(e,"POST","/v1/accounts:signInWithCustomToken",zo(e,t))}(n,{token:t,returnSecureToken:!0}),i=await ul._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Sl{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Tl._fromServerResponse(e,t):"totpInfo"in t?kl._fromServerResponse(e,t):ko(e,"internal-error")}}class Tl extends Sl{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Tl(t)}}class kl extends Sl{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new kl(t)}}function Cl(e,t,n){var r;Ro((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Ro("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ro(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Ro(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function xl(e){const t=Aa(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Nl(e,t){await async function(e,t){return Bo(e,"POST","/v1/accounts:update",zo(e,t))}(Yi(e),{oobCode:t})}async function Al(e,t){const n=Yi(e),r=await qa(n,{oobCode:t}),i=r.requestType;switch(Ro(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ro(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ro(r.mfaInfo,n,"internal-error");default:Ro(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Sl._fromServerResponse(Aa(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function Rl(e,t){const n={identifier:t,continueUri:Lo()?Oo():"http://localhost"},{signinMethods:r}=await async function(e,t){return Bo(e,"POST","/v1/accounts:createAuthUri",zo(e,t))}(Yi(e),n);return r||[]}async function Pl(e,t){const n=Yi(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Cl(n.auth,r,t);const{email:i}=await async function(e,t){return Wa(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Dl(e,t,n){const r=Yi(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Cl(r.auth,i,n);const{email:s}=await async function(e,t){return Wa(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function Ol(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Yi(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await ra(i,async function(e,t){return Bo(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function Ll(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await ra(e,async function(e,t){return Bo(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class Ml{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class Fl extends Ml{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Ul extends Ml{constructor(e,t){super(e,"facebook.com",t)}}class jl extends Fl{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Vl extends Ml{constructor(e,t){super(e,"google.com",t)}}class ql extends Fl{constructor(e,t,n){super(e,"twitter.com",t,n)}}function zl(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=na(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Ml(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Ul(s,i);case"github.com":return new jl(s,i);case"google.com":return new Vl(s,i);case"twitter.com":return new ql(s,i,e.screenName||null);case"custom":case"anonymous":return new Ml(s,null);default:return new Ml(s,r,i)}}(n)}class Bl{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Bl("enroll",e,t)}static _fromMfaPendingCredential(e){return new Bl("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Bl._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Bl._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Wl{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Aa(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Sl._fromServerResponse(n,e)));Ro(r.mfaPendingCredential,n,"internal-error");const s=Bl._fromMfaPendingCredential(r.mfaPendingCredential);return new Wl(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await ul._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Ro(t.user,n,"internal-error"),ul._forOperation(t.user,t.operationType,o);default:ko(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class Hl{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Sl._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Hl(e)}async getSession(){return Bl._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await ra(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await ra(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},Bo(r,"POST","/v2/accounts/mfaEnrollment:withdraw",zo(r,i))));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(s){throw s}var r,i}}const Kl=new WeakMap;const Gl="__sak";class Ql{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Gl,"1"),this.storage.removeItem(Gl),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Yl extends Ql{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=yi();return va(e)||Sa(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Ta(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Ei()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Yl.type="LOCAL";const $l=Yl;class Jl extends Ql{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Jl.type="SESSION";const Xl=Jl;class Zl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Zl(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ec(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Zl.receivers=[];class tc{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=ec("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function nc(){return window}function rc(){return"undefined"!==typeof nc().WorkerGlobalScope&&"function"===typeof nc().importScripts}const ic="firebaseLocalStorageDb",sc="firebaseLocalStorage",oc="fbase_key";class ac{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function lc(e,t){return e.transaction([sc],t?"readwrite":"readonly").objectStore(sc)}function cc(){const e=indexedDB.open(ic,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(sc,{keyPath:oc})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(sc)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(ic);return new ac(e).toPromise()}(),t(await cc()))}))}))}async function uc(e,t,n){const r=lc(e,!0).put({[oc]:t,value:n});return new ac(r).toPromise()}function hc(e,t){const n=lc(e,!0).delete(t);return new ac(n).toPromise()}class dc{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await cc()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rc()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zl._getInstance(rc()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new tc(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cc();return await uc(e,Gl,"1"),await hc(e,Gl),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>uc(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=lc(e,!1).get(t),r=await new ac(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>hc(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=lc(e,!1).getAll();return new ac(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}dc.type="LOCAL";const fc=dc;const pc=1e12;class mc{constructor(e){this.auth=e,this.counter=pc,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new gc(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||pc;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||pc;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||pc;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class gc{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Ro(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const yc=Da("rcb"),vc=new Fo(3e4,6e4);class _c{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=nc().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Ro(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&$o(nc().grecaptcha)?Promise.resolve(nc().grecaptcha):new Promise(((n,r)=>{const i=nc().setTimeout((()=>{r(Co(e,"network-request-failed"))}),vc.get());nc()[yc]=()=>{nc().clearTimeout(i),delete nc()[yc];const s=nc().grecaptcha;if(!s||!$o(s))return void r(Co(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Pa("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Fi({onload:yc,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(Co(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=nc().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class wc{async load(e){return new mc(e)}clearedOneInstance(){}}const bc="recaptcha",Ec={theme:"light",type:"image"};class Ic{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Ec);this.parameters=n,this.type=bc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Aa(e),this.isInvisible="invisible"===this.parameters.size,Ro("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Ro(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wc:new _c,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Ro(!this.parameters.sitekey,this.auth,"argument-error"),Ro(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ro("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=nc()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Ro(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Ro(Lo()&&!rc(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Bo(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Ro(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Ro(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Sc{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Ja._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Tc(e,t,n){var r;const i=await n.verify();try{let s;if(Ro("string"===typeof i,e,"argument-error"),Ro(n.type===bc,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Ro("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Bo(e,"POST","/v2/accounts/mfaEnrollment:start",zo(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Ro("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Ro(n,e,"missing-multi-factor-info");const o=await function(e,t){return Bo(e,"POST","/v2/accounts/mfaSignIn:start",zo(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Bo(e,"POST","/v1/accounts:sendVerificationCode",zo(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class kc{constructor(e){this.providerId=kc.PROVIDER_ID,this.auth=Aa(e)}verifyPhoneNumber(e,t){return Tc(this.auth,e,Yi(t))}static credential(e,t){return Ja._fromVerification(e,t)}static credentialFromResult(e){const t=e;return kc.credentialFromTaggedObject(t)}static credentialFromError(e){return kc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ja._fromTokenResponse(n,r):null}}function Cc(e,t){return t?ha(t):(Ro(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}kc.PROVIDER_ID="phone",kc.PHONE_SIGN_IN_METHOD="phone";class xc extends Va{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Nc(e){return _l(e.auth,new xc(e),e.bypassAuthState)}function Ac(e){const{auth:t,user:n}=e;return Ro(n,t,"internal-error"),vl(n,new xc(e),e.bypassAuthState)}async function Rc(e){const{auth:t,user:n}=e;return Ro(n,t,"internal-error"),gl(n,new xc(e),e.bypassAuthState)}class Pc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Nc;case"linkViaPopup":case"linkViaRedirect":return Rc;case"reauthViaPopup":case"reauthViaRedirect":return Ac;default:ko(this.auth,"internal-error")}}resolve(e){Do(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Do(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Dc=new Fo(2e3,1e4);class Oc extends Pc{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Oc.currentPopupAction&&Oc.currentPopupAction.cancel(),Oc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ro(e,this.auth,"internal-error"),e}async onExecution(){Do(1===this.filter.length,"Popup operations only handle one event");const e=ec();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Co(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Co(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Co(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Dc.get())};e()}}Oc.currentPopupAction=null;const Lc="pendingRedirect",Mc=new Map;class Fc extends Pc{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Mc.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=qc(t),r=Vc(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Mc.set(this.auth._key(),e)}return this.bypassAuthState||Mc.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Uc(e,t){return Vc(e)._set(qc(t),"true")}function jc(e,t){Mc.set(e._key(),t)}function Vc(e){return ha(e._redirectPersistence)}function qc(e){return pa(Lc,e.config.apiKey,e.name)}function zc(e,t,n){return async function(e,t,n){const r=Aa(e);No(e,t,el),await r._initializationPromise;const i=Cc(r,n);return await Uc(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Bc(e,t,n){return async function(e,t,n){const r=Yi(e);No(r.auth,t,el),await r.auth._initializationPromise;const i=Cc(r.auth,n);await Uc(i,r.auth);const s=await Kc(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function Wc(e,t,n){return async function(e,t,n){const r=Yi(e);No(r.auth,t,el),await r.auth._initializationPromise;const i=Cc(r.auth,n);await yl(!1,r,t.providerId),await Uc(i,r.auth);const s=await Kc(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function Hc(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Aa(e),i=Cc(r,t),s=new Fc(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function Kc(e){const t=ec("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class Gc{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yc(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Yc(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Co(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qc(e))}saveEventToCache(e){this.cachedEventUids.add(Qc(e)),this.lastProcessedEventTime=Date.now()}}function Qc(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Yc(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function $c(e){return Bo(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const Jc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xc=/^https?/;function Zc(e){const t=Oo(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Xc.test(n))return!1;if(Jc.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const eu=new Fo(3e4,6e4);function tu(){const e=nc().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let nu=null;function ru(e){return nu=nu||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){tu(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{tu(),n(Co(e,"network-request-failed"))},timeout:eu.get()})}if(null===(i=null===(r=nc().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=nc().gapi)||void 0===s?void 0:s.load)){const t=Da("iframefcb");return nc()[t]=()=>{gapi.load?o():n(Co(e,"network-request-failed"))},Pa("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw nu=null,e}))}(e),nu}const iu=new Fo(5e3,15e3),su="__/auth/iframe",ou="emulator/auth/iframe",au={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cu(e){const t=e.config;Ro(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Uo(t,ou):"https://".concat(e.config.authDomain,"/").concat(su),r={apiKey:t.apiKey,appName:e.name,v:Vs},i=lu.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(Fi(r).slice(1))}const uu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class hu{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function du(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},uu),{width:r.toString(),height:i.toString(),top:s,left:o}),c=yi().toLowerCase();n&&(a=_a(c)?"_blank":n),ya(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Sa(arguments.length>0&&void 0!==arguments[0]?arguments[0]:yi())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new hu(null);const h=window.open(t||"",a,u);Ro(h,e,"popup-blocked");try{h.focus()}catch(d){}return new hu(h)}const fu="__/auth/handler",pu="emulator/auth/handler",mu=encodeURIComponent("fac");async function gu(e,t,n,r,i,s){Ro(e.config.authDomain,e,"auth-domain-config-required"),Ro(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Vs,eventId:i};if(t instanceof el){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Di(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof tl){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(mu,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(fu);return Uo(t,pu)}(e),"?").concat(Fi(a).slice(1)).concat(c)}const yu="webStorageSupport";const vu=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xl,this._completeRedirectFn=Hc,this._overrideRedirectResult=jc}async _openPopup(e,t,n,r){var i;Do(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return du(e,await gu(e,t,n,Oo(),r),ec())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){nc().location.href=e}(await gu(e,t,n,Oo(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Do(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await ru(e),n=nc().gapi;return Ro(n,e,"internal-error"),t.open({where:document.body,url:cu(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:au,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Co(e,"network-request-failed"),s=nc().setTimeout((()=>{r(i)}),iu.get());function o(){nc().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new Gc(e);return t.register("authEvent",(t=>{Ro(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yu,{type:yu},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[yu];void 0!==i&&t(!!i),ko(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await $c(e);for(const r of t)try{if(Zc(r))return}catch(n){}ko(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ta()||va()||Sa()}};class _u{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Po("unexpected MultiFactorSessionType")}}}class wu extends _u{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new wu(e)}_finalizeEnroll(e,t,n){return function(e,t){return Bo(e,"POST","/v2/accounts/mfaEnrollment:finalize",zo(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Bo(e,"POST","/v2/accounts/mfaSignIn:finalize",zo(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class bu{constructor(){}static assertion(e){return wu._fromCredential(e)}}bu.FACTOR_ID="phone";var Eu="@firebase/auth",Iu="1.5.1";class Su{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ro(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=di())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var Tu;function ku(){return window}Tu="Browser",Os(new $i("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ro(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Tu,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ka(Tu)},c=new Na(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ha);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Os(new $i("auth-internal",(e=>(e=>new Su(e))(Aa(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Hs(Eu,Iu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Tu)),Hs(Eu,Iu,"esm2017");async function Cu(e,t,n){var r;const{BuildInfo:i}=ku();Do(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Do(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return Sa()?o.ibi=i.packageName:ba()?o.apn=i.packageName:ko(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,gu(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function xu(e){const{cordova:t}=ku();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yi();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const Nu=20;class Au extends Gc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Ru(e){const t=await Ou()._get(Lu(e));return t&&await Ou()._remove(Lu(e)),t}function Pu(e,t){var n,r;const i=function(e){const t=Mu(e),n=t.link?decodeURIComponent(t.link):void 0,r=Mu(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Mu(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Mu(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Co(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Du(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Nu;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function Ou(){return ha($l)}function Lu(e){return pa("authEvent",e.config.apiKey,e.name)}function Mu(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Ui(n.join("?"))}const Fu=class{constructor(){this._redirectPersistence=Xl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Hc,this._overrideRedirectResult=jc}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Au(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){ko(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=ku();Ro("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ro("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ro("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ro("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ro("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),Mc.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Du(),postBody:null,tenantId:e.tenantId,error:Co(e,"no-auth-event")}}(e,n,r);await function(e,t){return Ou()._set(Lu(e),t)}(e,s);const o=await Cu(e,s,t);return async function(e,t,n){const{cordova:r}=ku();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(Co(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),ba()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await xu(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=ku(),n={};Sa()?n.iosBundleId=t.packageName:ba()?n.androidPackageName=t.packageName:ko(e,"operation-not-supported-in-this-environment"),await $c(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=ku(),s=setTimeout((async()=>{await Ru(e),t.onEvent(Uu())}),500),o=async n=>{clearTimeout(s);const r=await Ru(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=Pu(r,n.url)),t.onEvent(i||Uu())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");ku().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function Uu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Co("no-auth-event")}}function ju(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Vu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yi();return!("file:"!==ju()&&"ionic:"!==ju()&&"capacitor:"!==ju()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function qu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yi();return Ei()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yi();return/Edge\/\d+/.test(e)}(e)}function zu(){try{const e=self.localStorage,t=ec();if(e)return e.setItem(t,"1"),e.removeItem(t),!qu()||Si()}catch(e){return Bu()&&Si()}return!1}function Bu(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Wu(){return("http:"===ju()||"https:"===ju()||wi()||Vu())&&!(bi()||_i())&&zu()&&!Bu()}function Hu(){return Vu()&&"undefined"!==typeof document}const Ku={LOCAL:"local",NONE:"none",SESSION:"session"},Gu=Ro,Qu="persistence";async function Yu(e){await e._initializationPromise;const t=$u(),n=pa(Qu,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function $u(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const Ju=Ro;class Xu{constructor(){this.browserResolver=ha(vu),this.cordovaResolver=ha(Fu),this.underlyingResolver=null,this._redirectPersistence=Xl,this._completeRedirectFn=Hc,this._overrideRedirectResult=jc}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Hu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ju(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Hu()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function Zu(e){return e.unwrap()}function eh(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new ih(e,function(e,t){var n;const r=Yi(e),i=t;return Ro(t.customData.operationType,r,"argument-error"),Ro(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Wl._fromError(r,i)}(e,t))}else if(r){const e=th(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function th(e){const{_tokenResponse:t}=e instanceof Ti?e.customData:e;if(!t)return null;if(!(e instanceof Ti)&&"temporaryProof"in t&&"phoneNumber"in t)return kc.credentialFromResult(e);const n=t.providerId;if(!n||n===fo.PASSWORD)return null;let r;switch(n){case fo.GOOGLE:r=il;break;case fo.FACEBOOK:r=rl;break;case fo.GITHUB:r=sl;break;case fo.TWITTER:r=ll;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?ol._create(n,o):Ya._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new nl(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Ti?r.credentialFromError(e):r.credentialFromResult(e)}function nh(e,t){return t.catch((t=>{throw t instanceof Ti&&eh(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,th(r)),additionalUserInfo:zl(e),user:sh.getOrCreate(n)};var r}))}async function rh(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>nh(e,n.confirm(t))}}class ih{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return nh(Zu(this.auth),this.resolver.resolveSignIn(e))}}class sh{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Yi(e);return Kl.has(t)||Kl.set(t,Hl._fromUser(t)),Kl.get(t)}(e)}static getOrCreate(e){return sh.USER_MAP.has(e)||sh.USER_MAP.set(e,new sh(e)),sh.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return nh(this.auth,bl(this._delegate,e))}async linkWithPhoneNumber(e,t){return rh(this.auth,async function(e,t,n){const r=Yi(e);await yl(!1,r,"phone");const i=await Tc(r.auth,t,Yi(n));return new Sc(i,(e=>bl(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return nh(this.auth,async function(e,t,n){const r=Yi(e);No(r.auth,t,el);const i=Cc(r.auth,n);return new Oc(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Xu))}async linkWithRedirect(e){return await Yu(Aa(this.auth)),Wc(this._delegate,e,Xu)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return nh(this.auth,El(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return rh(this.auth,async function(e,t,n){const r=Yi(e),i=await Tc(r.auth,t,Yi(n));return new Sc(i,(e=>El(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return nh(this.auth,async function(e,t,n){const r=Yi(e);No(r.auth,t,el);const i=Cc(r.auth,n);return new Oc(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Xu))}async reauthenticateWithRedirect(e){return await Yu(Aa(this.auth)),Bc(this._delegate,e,Xu)}sendEmailVerification(e){return Pl(this._delegate,e)}async unlink(e){return await ml(this._delegate,e),this}updateEmail(e){return function(e,t){return Ll(Yi(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return Ll(Yi(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await gl(Yi(e),t)}(this._delegate,e)}updateProfile(e){return Ol(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Dl(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}sh.USER_MAP=new WeakMap;const oh=Ro;class ah{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;oh(n,"invalid-api-key",{appName:e.name}),oh(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?Xu:void 0;this._delegate=t.initialize({options:{persistence:ch(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(bo),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?sh.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){Fa(this._delegate,e,t)}applyActionCode(e){return Nl(this._delegate,e)}checkActionCode(e){return Al(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await qa(Yi(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&xl(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return nh(this._delegate,async function(e,t,n){const r=Aa(e),i=Ma(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cl),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&xl(e),t})),o=await ul._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Rl(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Xa.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){oh(Wu(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Aa(e)._initializationPromise,Hc(e,t,!1)}(this._delegate,Xu);return e?nh(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Aa(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=lh(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=lh(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=Aa(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Ro(t.handleCodeInApp,r,"argument-error"),t&&Cl(r,e,t)}(i,n),await Ma(r,i,"getOobCode",Ka)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=Aa(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Cl(r,i,n),await Ma(r,i,"getOobCode",Ha)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){Gu(Object.values(Ku).includes(t),e,"invalid-persistence-type"),bi()?Gu(t!==Ku.SESSION,e,"unsupported-persistence-type"):_i()?Gu(t===Ku.NONE,e,"unsupported-persistence-type"):Bu()?Gu(t===Ku.NONE||t===Ku.LOCAL&&Si(),e,"unsupported-persistence-type"):Gu(t===Ku.NONE||zu(),e,"unsupported-persistence-type")}(this._delegate,e),e){case Ku.SESSION:t=Xl;break;case Ku.LOCAL:t=await ha(fc)._isAvailable()?fc:$l;break;case Ku.NONE:t=fa;break;default:return ko("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return nh(this._delegate,async function(e){var t;const n=Aa(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new ul({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await cl(n,{returnSecureToken:!0}),i=await ul._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return nh(this._delegate,wl(this._delegate,e))}signInWithCustomToken(e){return nh(this._delegate,Il(this._delegate,e))}signInWithEmailAndPassword(e,t){return nh(this._delegate,function(e,t,n){return wl(Yi(e),Za.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&xl(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return nh(this._delegate,async function(e,t,n){const r=Yi(e),i=Za.credentialWithLink(t,n||Oo());return Ro(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),wl(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return rh(this._delegate,async function(e,t,n){const r=Aa(e),i=await Tc(r,t,Yi(n));return new Sc(i,(e=>wl(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return oh(Wu(),this._delegate,"operation-not-supported-in-this-environment"),nh(this._delegate,async function(e,t,n){const r=Aa(e);No(e,t,el);const i=Cc(r,n);return new Oc(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,Xu))}async signInWithRedirect(e){return oh(Wu(),this._delegate,"operation-not-supported-in-this-environment"),await Yu(this._delegate),zc(this._delegate,e,Xu)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Al(Yi(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function lh(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&sh.getOrCreate(e)),error:t,complete:n}}function ch(e,t){const n=function(e,t){const n=$u();if(!n)return[];const r=pa(Qu,e,t);switch(n.getItem(r)){case Ku.NONE:return[fa];case Ku.LOCAL:return[fc,Xl];case Ku.SESSION:return[Xl];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(fc)||n.push(fc),"undefined"!==typeof window)for(const r of[$l,Xl])n.includes(r)||n.push(r);return n.includes(fa)||n.push(fa),n}ah.Persistence=Ku;class uh{constructor(){this.providerId="phone",this._delegate=new kc(Zu(uo.auth()))}static credential(e,t){return kc.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}uh.PHONE_SIGN_IN_METHOD=kc.PHONE_SIGN_IN_METHOD,uh.PROVIDER_ID=kc.PROVIDER_ID;const hh=Ro;class dh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uo.app();var r;hh(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Ic(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var fh;(fh=uo).INTERNAL.registerComponent(new $i("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new ah(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:po,PASSWORD_RESET:mo,RECOVER_EMAIL:go,REVERT_SECOND_FACTOR_ADDITION:yo,VERIFY_AND_CHANGE_EMAIL:vo,VERIFY_EMAIL:_o}},EmailAuthProvider:Za,FacebookAuthProvider:rl,GithubAuthProvider:sl,GoogleAuthProvider:il,OAuthProvider:nl,SAMLAuthProvider:al,PhoneAuthProvider:uh,PhoneMultiFactorGenerator:bu,RecaptchaVerifier:dh,TwitterAuthProvider:ll,Auth:ah,AuthCredential:Va,Error:Ti}).setInstantiationMode("LAZY").setMultipleInstances(!1)),fh.registerVersion("@firebase/auth-compat","0.5.1");const ph="@firebase/database",mh="1.0.2";let gh="";function yh(e){gh=e}class vh{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ni(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:xi(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class _h{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ri(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const wh=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new vh(t)}}catch(t){}return new _h},bh=wh("localStorage"),Eh=wh("sessionStorage"),Ih=new os("@firebase/database"),Sh=function(){let e=1;return function(){return e++}}(),Th=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,ni(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Vi;n.update(t);const r=n.digest();return si.encodeByteArray(r)},kh=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=kh.apply(null,n):e+="object"===typeof n?Ni(n):n,e+=" "}return e};let Ch=null,xh=!0;const Nh=function(e,t){ni(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Ih.logLevel=ts.VERBOSE,Ch=Ih.log.bind(Ih),t&&Eh.set("logging_enabled",!0)):"function"===typeof e?Ch=e:(Ch=null,Eh.remove("logging_enabled"))},Ah=function(){if(!0===xh&&(xh=!1,null===Ch&&!0===Eh.get("logging_enabled")&&Nh(!0)),Ch){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=kh.apply(null,t);Ch(r)}},Rh=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Ah(e,...n)}},Ph=function(){const e="FIREBASE INTERNAL ERROR: "+kh(...arguments);Ih.error(e)},Dh=function(){const e="FIREBASE FATAL ERROR: ".concat(kh(...arguments));throw Ih.error(e),new Error(e)},Oh=function(){const e="FIREBASE WARNING: "+kh(...arguments);Ih.warn(e)},Lh=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Mh="[MIN_NAME]",Fh="[MAX_NAME]",Uh=function(e,t){if(e===t)return 0;if(e===Mh||t===Fh)return-1;if(t===Mh||e===Fh)return 1;{const n=Kh(e),r=Kh(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},jh=function(e,t){return e===t?0:e<t?-1:1},Vh=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ni(t))},qh=function(e){if("object"!==typeof e||null===e)return Ni(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=Ni(t[r]),n+=":",n+=qh(e[t[r]]);return n+="}",n},zh=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Bh(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Wh=function(e){ni(!Lh(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Hh=new RegExp("^-?(0*)\\d{1,10}$"),Kh=function(e){if(Hh.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Gh=function(e){try{e()}catch(t){setTimeout((()=>{const e=t.stack||"";throw Oh("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Qh=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Yh{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Oh('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class $h{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Ah("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Oh(e)}}class Jh{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Jh.OWNER="owner";const Xh="5",Zh=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ed="ac",td="websocket",nd="long_polling";class rd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bh.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&bh.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function id(e,t,n){let r;if(ni("string"===typeof t,"typeof type must == string"),ni("object"===typeof n,"typeof params must == object"),t===td)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==nd)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return Bh(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class sd{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Ri(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return ui(void 0,this.counters_)}}const od={},ad={};function ld(e){const t=e.toString();return od[t]||(od[t]=new sd),od[t]}class cd{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Gh((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const ud="start";class hd{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Rh(e),this.stats_=ld(t),this.urlFn=e=>(this.appCheckToken&&(e[ed]=this.appCheckToken),id(t,nd,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new cd(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Ii()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new dd((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===ud)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[ud]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Xh,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[ed]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Zh.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){hd.forceAllow_=!0}static forceDisallow(){hd.forceDisallow_=!0}static isAvailable(){return!Ii()&&(!!hd.forceAllow_||!hd.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Ni(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=ai(t),r=zh(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Ii())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Ni(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class dd{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Ii())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Sh(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=dd.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(i){Ah("frame writing exception"),i.stack&&Ah(i.stack),Ah(i)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ah("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){Ii()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Ah("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}}),Math.floor(1))}}let fd=null;"undefined"!==typeof MozWebSocket?fd=MozWebSocket:"undefined"!==typeof WebSocket&&(fd=WebSocket);class pd{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Rh(this.connId),this.stats_=ld(t),this.connURL=pd.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=Xh,!Ii()&&"undefined"!==typeof location&&location.hostname&&Zh.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[ed]=r),i&&(s.p=i),id(e,td,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bh.set("previous_websocket_failure",!0);try{let e;if(Ii()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(Xh,"/").concat(gh,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/github.io/bigcinemas",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new fd(this.connURL,[],e)}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){pd.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==fd&&!pd.forceDisallow_}static previouslyFailed(){return bh.isInMemoryStorage||!0===bh.get("previous_websocket_failure")}markConnectionHealthy(){bh.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=xi(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ni(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=Ni(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=zh(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}pd.responsesRequiredToBeHealthy=2,pd.healthyTimeout=3e4;class md{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[hd,pd]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=pd&&pd.isAvailable();let n=t&&!pd.previouslyFailed();if(e.webSocketOnly&&(t||Oh("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[pd];else{const e=this.transports_=[];for(const t of md.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);md.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}md.globalTransportInitialized_=!1;class gd{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Rh("c:"+this.id+":"),this.transportManager_=new md(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Qh((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Vh("t",e),n=Vh("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Vh("t",e),n=Vh("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Vh("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Ph("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ph("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Xh!==n&&Oh("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Qh((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qh((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bh.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class yd{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class vd{constructor(e){this.allowedEvents_=e,this.listeners_={},ni(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){ni(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class _d extends vd{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||vi()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new _d}getInitialEvent(e){return ni("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const wd=32,bd=768;class Ed{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Id(){return new Ed("")}function Sd(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Td(e){return e.pieces_.length-e.pieceNum_}function kd(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Ed(e.pieces_,t)}function Cd(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function xd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Nd(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Ed(t,0)}function Ad(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Ed)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new Ed(n,0)}function Rd(e){return e.pieceNum_>=e.pieces_.length}function Pd(e,t){const n=Sd(e),r=Sd(t);if(null===n)return t;if(n===r)return Pd(kd(e),kd(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Dd(e,t){const n=xd(e,0),r=xd(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=Uh(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function Od(e,t){if(Td(e)!==Td(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ld(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Td(e)>Td(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Md{constructor(e,t){this.errorPrefix_=t,this.parts_=xd(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Qi(this.parts_[n]);Fd(this)}}function Fd(e){if(e.byteLength_>bd)throw new Error(e.errorPrefix_+"has a key path longer than "+bd+" bytes ("+e.byteLength_+").");if(e.parts_.length>wd)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+wd+") or object contains a cycle "+Ud(e))}function Ud(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class jd extends vd{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new jd}getInitialEvent(e){return ni("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Vd=1e3;class qd extends yd{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=qd.nextPersistentConnectionId_++,this.log_=Rh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Vd,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Ii())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");jd.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&_d.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Ni(i)),ni(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new mi,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),ni(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ni(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;qd.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&Ri(e,"w")){const n=Pi(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Oh("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Ai(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Ai(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),ni(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ni(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Ph("Unrecognized action received from server: "+Ni(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ni(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Vd,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Vd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Vd),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+qd.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){ni(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?Ah("getToken() completed but was canceled"):(Ah("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new gd(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Oh(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(Ph){this.log_("Failed to get token: "+Ph),s||(this.repoInfo_.nodeAdmin&&Oh(Ph),a())}}}interrupt(e){Ah("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ah("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Di(this.interruptReasons_)&&(this.reconnectDelay_=Vd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>qh(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new Ed(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Ah("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Ah("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";Ii()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+gh.replace(/\./g,"-")]=1,vi()?e["framework.cordova"]=1:bi()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=_d.getInstance().currentlyOnline();return Di(this.interruptReasons_)&&e}}qd.nextPersistentConnectionId_=0,qd.nextConnectionId_=0;class zd{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new zd(e,t)}}class Bd{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new zd(Mh,e),r=new zd(Mh,t);return 0!==this.compare(n,r)}minPost(){return zd.MIN}}let Wd;class Hd extends Bd{static get __EMPTY_NODE(){return Wd}static set __EMPTY_NODE(e){Wd=e}compare(e,t){return Uh(e.name,t.name)}isDefinedOn(e){throw ri("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return zd.MIN}maxPost(){return new zd(Fh,Wd)}makePost(e,t){return ni("string"===typeof e,"KeyIndex indexValue must always be a string."),new zd(e,Wd)}toString(){return".key"}}const Kd=new Hd;class Gd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Qd{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Qd.RED,this.left=null!=r?r:Yd.EMPTY_NODE,this.right=null!=i?i:Yd.EMPTY_NODE}copy(e,t,n,r,i){return new Qd(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Yd.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Yd.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Qd.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Qd.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Qd.RED=!0,Qd.BLACK=!1;class Yd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yd.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Yd(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Qd.BLACK,null,null))}remove(e){return new Yd(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Qd.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Gd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Gd(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Gd(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Gd(this.root_,null,this.comparator_,!0,e)}}function $d(e,t){return Uh(e.name,t.name)}function Jd(e,t){return Uh(e,t)}let Xd;Yd.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Qd(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Zd=function(e){return"number"===typeof e?"number:"+Wh(e):"string:"+e},ef=function(e){if(e.isLeafNode()){const t=e.val();ni("string"===typeof t||"number"===typeof t||"object"===typeof t&&Ri(t,".sv"),"Priority must be a string or number.")}else ni(e===Xd||e.isEmpty(),"priority of unexpected type.");ni(e===Xd||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let tf,nf,rf;class sf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sf.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ni(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ef(this.priorityNode_)}static set __childrenNodeConstructor(e){tf=e}static get __childrenNodeConstructor(){return tf}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new sf(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:sf.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Rd(e)?this:".priority"===Sd(e)?this.priorityNode_:sf.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:sf.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=Sd(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(ni(".priority"!==n||1===Td(e),".priority must be the last token in a path"),this.updateImmediateChild(n,sf.__childrenNodeConstructor.EMPTY_NODE.updateChild(kd(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Zd(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Wh(this.value_):this.value_,this.lazyHash_=Th(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===sf.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof sf.__childrenNodeConstructor?-1:(ni(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=sf.VALUE_TYPE_ORDER.indexOf(t),i=sf.VALUE_TYPE_ORDER.indexOf(n);return ni(r>=0,"Unknown leaf type: "+t),ni(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}sf.VALUE_TYPE_ORDER=["object","boolean","number","string"];const of=new class extends Bd{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Uh(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return zd.MIN}maxPost(){return new zd(Fh,new sf("[PRIORITY-POST]",rf))}makePost(e,t){const n=nf(e);return new zd(t,new sf("[PRIORITY-POST]",n))}toString(){return".priority"}},af=Math.log(2);class lf{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/af,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const cf=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Qd(a,o.node,Qd.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new Qd(a,o.node,Qd.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new Qd(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,Qd.BLACK):(a(r,Qd.BLACK),a(r,Qd.RED))}return s}(new lf(e.length));return new Yd(r||t,s)};let uf;const hf={};class df{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return ni(hf&&of,"ChildrenNode.ts has not been loaded"),uf=uf||new df({".priority":hf},{".priority":of}),uf}get(e){const t=Pi(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Yd?t:null}hasIndex(e){return Ri(this.indexSet_,e.toString())}addIndex(e,t){ni(e!==Kd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(zd.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?cf(n,e.getCompare()):hf;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new df(c,l)}addToIndexes(e,t){const n=Oi(this.indexes_,((n,r)=>{const i=Pi(this.indexSet_,r);if(ni(i,"Missing index implementation for "+r),n===hf){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(zd.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),cf(n,i.getCompare())}return hf}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new zd(e.name,r))),i.insert(e,e.node)}}));return new df(n,this.indexSet_)}removeFromIndexes(e,t){const n=Oi(this.indexes_,(n=>{if(n===hf)return n;{const r=t.get(e.name);return r?n.remove(new zd(e.name,r)):n}}));return new df(n,this.indexSet_)}}let ff;class pf{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ef(this.priorityNode_),this.children_.isEmpty()&&ni(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ff||(ff=new pf(new Yd(Jd),null,df.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ff}updatePriority(e){return this.children_.isEmpty()?this:new pf(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?ff:t}}getChild(e){const t=Sd(e);return null===t?this:this.getImmediateChild(t).getChild(kd(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(ni(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new zd(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?ff:this.priorityNode_;return new pf(r,s,i)}}updateChild(e,t){const n=Sd(e);if(null===n)return t;{ni(".priority"!==Sd(e)||1===Td(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(kd(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(of,((s,o)=>{t[s]=o.val(e),n++,i&&pf.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Zd(this.getPriority().val())+":"),this.forEachChild(of,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Th(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new zd(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new zd(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new zd(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,zd.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,zd.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===mf?-1:0}withIndex(e){if(e===Kd||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new pf(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Kd||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(of),n=t.getIterator(of);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Kd?null:this.indexMap_.get(e.toString())}}pf.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const mf=new class extends pf{constructor(){super(new Yd(Jd),pf.EMPTY_NODE,df.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return pf.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(zd,{MIN:{value:new zd(Mh,pf.EMPTY_NODE)},MAX:{value:new zd(Fh,mf)}}),Hd.__EMPTY_NODE=pf.EMPTY_NODE,sf.__childrenNodeConstructor=pf,Xd=mf,function(e){rf=e}(mf);const gf=!0;function yf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return pf.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),ni(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new sf(e,yf(t))}if(e instanceof Array||!gf){let n=pf.EMPTY_NODE;return Bh(e,((t,r)=>{if(Ri(e,t)&&"."!==t.substring(0,1)){const e=yf(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(yf(t))}{const n=[];let r=!1;if(Bh(e,((e,t)=>{if("."!==e.substring(0,1)){const i=yf(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new zd(e,i)))}})),0===n.length)return pf.EMPTY_NODE;const i=cf(n,$d,(e=>e.name),Jd);if(r){const e=cf(n,of.getCompare());return new pf(i,yf(t),new df({".priority":e},{".priority":of}))}return new pf(i,yf(t),df.Default)}}!function(e){nf=e}(yf);class vf extends Bd{constructor(e){super(),this.indexPath_=e,ni(!Rd(e)&&".priority"!==Sd(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Uh(e.name,t.name):i}makePost(e,t){const n=yf(e),r=pf.EMPTY_NODE.updateChild(this.indexPath_,n);return new zd(t,r)}maxPost(){const e=pf.EMPTY_NODE.updateChild(this.indexPath_,mf);return new zd(Fh,e)}toString(){return xd(this.indexPath_,0).join("/")}}const _f=new class extends Bd{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Uh(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return zd.MIN}maxPost(){return zd.MAX}makePost(e,t){const n=yf(e);return new zd(t,n)}toString(){return".value"}};function wf(e){return{type:"value",snapshotNode:e}}function bf(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ef(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function If(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Sf{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){ni(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Ef(t,o)):ni(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(bf(t,n)):s.trackChildChange(If(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(of,((e,r)=>{t.hasChild(e)||n.trackChildChange(Ef(e,r))})),t.isLeafNode()||t.forEachChild(of,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(If(t,r,i))}else n.trackChildChange(bf(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?pf.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Tf{constructor(e){this.indexedFilter_=new Sf(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Tf.getStartPost_(e),this.endPost_=Tf.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new zd(t,n))||(n=pf.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=pf.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(pf.EMPTY_NODE);const i=this;return t.forEachChild(of,((e,t)=>{i.matches(new zd(e,t))||(r=r.updateImmediateChild(e,pf.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class kf{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Tf(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new zd(t,n))||(n=pf.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=pf.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=pf.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(pf.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,pf.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;ni(o.numChildren()===this.limit_,"");const a=new zd(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:s(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(If(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(Ef(t,e));const n=o.updateImmediateChild(t,pf.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(bf(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=i&&(i.trackChildChange(Ef(l.name,l.node)),i.trackChildChange(bf(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,pf.EMPTY_NODE)):e}}class Cf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=of}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return ni(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ni(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Mh}hasEnd(){return this.endSet_}getIndexEndValue(){return ni(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ni(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return ni(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===of}copy(){const e=new Cf;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function xf(e,t,n){const r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Nf(e,t,n){const r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Af(e,t){const n=e.copy();return n.index_=t,n}function Rf(e){const t={};if(e.isDefault())return t;let n;if(e.index_===of?n="$priority":e.index_===_f?n="$value":e.index_===Kd?n="$key":(ni(e.index_ instanceof vf,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Ni(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=Ni(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Ni(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Ni(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Ni(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Pf(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==of&&(t.i=e.index_.toString()),t}class Df extends yd{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Rh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(ni(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=Df.getListenId_(e,n),o={};this.listens_[s]=o;const a=Rf(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),Pi(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=Df.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Rf(e._queryParams),n=e._path.toString(),r=new mi;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Fi(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let t=null;if(a.status>=200&&a.status<300){try{t=xi(a.responseText)}catch(e){Oh("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&Oh("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class Of{constructor(){this.rootNode_=pf.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Lf(){return{value:null,children:new Map}}function Mf(e,t,n){if(Rd(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=Sd(t);e.children.has(r)||e.children.set(r,Lf());Mf(e.children.get(r),t=kd(t),n)}}function Ff(e,t){if(Rd(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(of,((t,n)=>{Mf(e,new Ed(t),n)})),Ff(e,t)}}if(e.children.size>0){const n=Sd(t);if(t=kd(t),e.children.has(n)){Ff(e.children.get(n),t)&&e.children.delete(n)}return 0===e.children.size}return!0}function Uf(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{Uf(r,new Ed(t.toString()+"/"+e),n)}))}class jf{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Bh(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Vf{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new jf(e);const n=1e4+2e4*Math.random();Qh(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Bh(e,((e,r)=>{r>0&&Ri(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),Qh(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var qf;function zf(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(qf||(qf={}));class Bf{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=qf.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Rd(this.path)){if(null!=this.affectedTree.value)return ni(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ed(e));return new Bf(Id(),t,this.revert)}}return ni(Sd(this.path)===e,"operationForChild called for unrelated child."),new Bf(kd(this.path),this.affectedTree,this.revert)}}class Wf{constructor(e,t){this.source=e,this.path=t,this.type=qf.LISTEN_COMPLETE}operationForChild(e){return Rd(this.path)?new Wf(this.source,Id()):new Wf(this.source,kd(this.path))}}class Hf{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=qf.OVERWRITE}operationForChild(e){return Rd(this.path)?new Hf(this.source,Id(),this.snap.getImmediateChild(e)):new Hf(this.source,kd(this.path),this.snap)}}class Kf{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=qf.MERGE}operationForChild(e){if(Rd(this.path)){const t=this.children.subtree(new Ed(e));return t.isEmpty()?null:t.value?new Hf(this.source,Id(),t.value):new Kf(this.source,Id(),t)}return ni(Sd(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Kf(this.source,kd(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Gf{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Rd(e))return this.isFullyInitialized()&&!this.filtered_;const t=Sd(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Qf{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Yf(e,t,n,r,i,s){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw ri("Should only compare child_ events.");const r=new zd(t.childName,t.snapshotNode),i=new zd(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function $f(e,t){return{eventCache:e,serverCache:t}}function Jf(e,t,n,r){return $f(new Gf(t,n,r),e.serverCache)}function Xf(e,t,n,r){return $f(e.eventCache,new Gf(t,n,r))}function Zf(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ep(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let tp;class np{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(tp||(tp=new Yd(jh)),tp);this.value=e,this.children=t}static fromObject(e){let t=new np(null);return Bh(e,((e,n)=>{t=t.set(new Ed(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Id(),value:this.value};if(Rd(e))return null;{const n=Sd(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(kd(e),t);if(null!=i){return{path:Ad(new Ed(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Rd(e))return this;{const t=Sd(e),n=this.children.get(t);return null!==n?n.subtree(kd(e)):new np(null)}}set(e,t){if(Rd(e))return new np(t,this.children);{const n=Sd(e),r=(this.children.get(n)||new np(null)).set(kd(e),t),i=this.children.insert(n,r);return new np(this.value,i)}}remove(e){if(Rd(e))return this.children.isEmpty()?new np(null):new np(null,this.children);{const t=Sd(e),n=this.children.get(t);if(n){const r=n.remove(kd(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new np(null):new np(this.value,i)}return this}}get(e){if(Rd(e))return this.value;{const t=Sd(e),n=this.children.get(t);return n?n.get(kd(e)):null}}setTree(e,t){if(Rd(e))return t;{const n=Sd(e),r=(this.children.get(n)||new np(null)).setTree(kd(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new np(this.value,i)}}fold(e){return this.fold_(Id(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(Ad(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,Id(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(Rd(e))return null;{const r=Sd(e),i=this.children.get(r);return i?i.findOnPath_(kd(e),Ad(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Id(),t)}foreachOnPath_(e,t,n){if(Rd(e))return this;{this.value&&n(t,this.value);const r=Sd(e),i=this.children.get(r);return i?i.foreachOnPath_(kd(e),Ad(t,r),n):new np(null)}}foreach(e){this.foreach_(Id(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(Ad(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class rp{constructor(e){this.writeTree_=e}static empty(){return new rp(new np(null))}}function ip(e,t,n){if(Rd(t))return new rp(new np(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=Pd(i,t);return s=s.updateChild(o,n),new rp(e.writeTree_.set(i,s))}{const r=new np(n),i=e.writeTree_.setTree(t,r);return new rp(i)}}}function sp(e,t,n){let r=e;return Bh(n,((e,n)=>{r=ip(r,Ad(t,e),n)})),r}function op(e,t){if(Rd(t))return rp.empty();{const n=e.writeTree_.setTree(t,new np(null));return new rp(n)}}function ap(e,t){return null!=lp(e,t)}function lp(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Pd(n.path,t)):null}function cp(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(of,((e,n)=>{t.push(new zd(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new zd(e,n.value))})),t}function up(e,t){if(Rd(t))return e;{const n=lp(e,t);return new rp(null!=n?new np(n):e.writeTree_.subtree(t))}}function hp(e){return e.writeTree_.isEmpty()}function dp(e,t){return fp(Id(),e.writeTree_,t)}function fp(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(ni(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=fp(Ad(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Ad(e,".priority"),r)),n}}function pp(e,t){return Cp(t,e)}function mp(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));ni(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&gp(t,r.path)?i=!1:Ld(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=vp(e.allWrites,yp,Id()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=op(e.visibleWrites,r.path);else{Bh(r.children,(t=>{e.visibleWrites=op(e.visibleWrites,Ad(r.path,t))}))}return!0}return!1}function gp(e,t){if(e.snap)return Ld(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Ld(Ad(e.path,n),t))return!0;return!1}function yp(e){return e.visible}function vp(e,t,n){let r=rp.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)Ld(n,e)?(t=Pd(n,e),r=ip(r,t,s.snap)):Ld(e,n)&&(t=Pd(e,n),r=ip(r,Id(),s.snap.getChild(t)));else{if(!s.children)throw ri("WriteRecord should have .snap or .children");if(Ld(n,e))t=Pd(n,e),r=sp(r,t,s.children);else if(Ld(e,n))if(t=Pd(e,n),Rd(t))r=sp(r,Id(),s.children);else{const e=Pi(s.children,Sd(t));if(e){const n=e.getChild(kd(t));r=ip(r,Id(),n)}}}}}return r}function _p(e,t,n,r,i){if(r||i){const s=up(e.visibleWrites,t);if(!i&&hp(s))return n;if(i||null!=n||ap(s,Id())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Ld(e.path,t)||Ld(t,e.path))};return dp(vp(e.allWrites,s,t),n||pf.EMPTY_NODE)}return null}{const r=lp(e.visibleWrites,t);if(null!=r)return r;{const r=up(e.visibleWrites,t);if(hp(r))return n;if(null!=n||ap(r,Id())){return dp(r,n||pf.EMPTY_NODE)}return null}}}function wp(e,t,n,r){return _p(e.writeTree,e.treePath,t,n,r)}function bp(e,t){return function(e,t,n){let r=pf.EMPTY_NODE;const i=lp(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(of,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=up(e.visibleWrites,t);return n.forEachChild(of,((e,t)=>{const n=dp(up(i,new Ed(e)),t);r=r.updateImmediateChild(e,n)})),cp(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return cp(up(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Ep(e,t,n,r){return function(e,t,n,r,i){ni(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Ad(t,n);if(ap(e.visibleWrites,s))return null;{const t=up(e.visibleWrites,s);return hp(t)?i.getChild(n):dp(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function Ip(e,t){return function(e,t){return lp(e.visibleWrites,t)}(e.writeTree,Ad(e.treePath,t))}function Sp(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=up(e.visibleWrites,t),c=lp(l,Id());if(null!=c)a=c;else{if(null==n)return[];a=dp(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function Tp(e,t,n){return function(e,t,n,r){const i=Ad(t,n),s=lp(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return dp(up(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function kp(e,t){return Cp(Ad(e.treePath,t),e.writeTree)}function Cp(e,t){return{treePath:e,writeTree:t}}class xp{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;ni("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),ni(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,If(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Ef(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,bf(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw ri("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,If(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const Np=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class Ap{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Gf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Tp(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ep(this.viewCache_),i=Sp(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function Rp(e,t,n,r,i){const s=new xp;let o,a;if(n.type===qf.OVERWRITE){const l=n;l.source.fromUser?o=Op(e,t,l.path,l.snap,r,i,s):(ni(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!Rd(l.path),o=Dp(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===qf.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const c=Ad(n,r);Lp(t,Sd(c))&&(a=Op(e,a,c,l,i,s,o))})),r.foreach(((r,l)=>{const c=Ad(n,r);Lp(t,Sd(c))||(a=Op(e,a,c,l,i,s,o))})),a}(e,t,l.path,l.children,r,i,s):(ni(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=Fp(e,t,l.path,l.children,r,i,a,s))}else if(n.type===qf.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=Ip(r,n))return t;{const a=new Ap(r,t,i),l=t.eventCache.getNode();let c;if(Rd(n)||".priority"===Sd(n)){let n;if(t.serverCache.isFullyInitialized())n=wp(r,ep(t));else{const e=t.serverCache.getNode();ni(e instanceof pf,"serverChildren would be complete if leaf node"),n=bp(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=Sd(n);let u=Tp(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,kd(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,pf.EMPTY_NODE,kd(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=wp(r,ep(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=Ip(r,Id()),Jf(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=Ip(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(Rd(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Dp(e,t,n,l.getNode().getChild(n),i,s,a,o);if(Rd(n)){let r=new np(null);return l.getNode().forEachChild(Kd,((e,t)=>{r=r.set(new Ed(e),t)})),Fp(e,t,n,r,i,s,a,o)}return t}{let c=new np(null);return r.foreach(((e,t)=>{const r=Ad(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),Fp(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==qf.LISTEN_COMPLETE)throw ri("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=Xf(t,s.getNode(),s.isFullyInitialized()||Rd(n),s.isFiltered());return Pp(e,o,n,r,Np,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Zf(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(wf(Zf(t)))}}(t,o,l),{viewCache:o,changes:l}}function Pp(e,t,n,r,i,s){const o=t.eventCache;if(null!=Ip(r,n))return t;{let a,l;if(Rd(n))if(ni(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=ep(t),i=bp(r,n instanceof pf?n:pf.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=wp(r,ep(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=Sd(n);if(".priority"===c){ni(1===Td(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=Ep(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const u=kd(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Ep(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=Tp(r,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return Jf(t,a,o.isFullyInitialized()||Rd(n),e.filter.filtersNodes())}}function Dp(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(Rd(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=Sd(n);if(!l.isCompleteForPath(n)&&Td(n)>1)return t;const i=kd(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,Np,null)}const h=Xf(t,c,l.isFullyInitialized()||Rd(n),u.filtersNodes());return Pp(e,h,n,i,new Ap(i,h,s),a)}function Op(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new Ap(i,t,s);if(Rd(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=Jf(t,c,!0,e.filter.filtersNodes());else{const i=Sd(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Jf(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=kd(n),c=a.getNode().getImmediateChild(i);let h;if(Rd(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===Cd(s)&&e.getChild(Nd(s)).isEmpty()?e:e.updateChild(s,r):pf.EMPTY_NODE}if(c.equals(h))l=t;else{l=Jf(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function Lp(e,t){return e.eventCache.isCompleteForChild(t)}function Mp(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Fp(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=Rd(n)?r:new np(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=Mp(0,t.serverCache.getNode().getImmediateChild(n),r);c=Dp(e,c,new Ed(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=Mp(0,t.serverCache.getNode().getImmediateChild(n),r);c=Dp(e,c,new Ed(n),l,i,s,o,a)}})),c}class Up{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new Sf(n.getIndex()),i=(s=n).loadsAllData()?new Sf(s.getIndex()):s.hasLimit()?new kf(s):new Tf(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(pf.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(pf.EMPTY_NODE,a.getNode(),null),u=new Gf(l,o.isFullyInitialized(),r.filtersNodes()),h=new Gf(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=$f(h,u),this.eventGenerator_=new Qf(this.query_)}get query(){return this.query_}}function jp(e,t){const n=ep(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Rd(t)&&!n.getImmediateChild(Sd(t)).isEmpty())?n.getChild(t):null}function Vp(e){return 0===e.eventRegistrations_.length}function qp(e,t,n){const r=[];if(n){ni(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function zp(e,t,n,r){t.type===qf.MERGE&&null!==t.source.queryId&&(ni(ep(e.viewCache_),"We should always have a full cache before handling merges"),ni(Zf(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=Rp(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,ni(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),ni(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),ni(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Bp(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Bp(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Yf(e,i,"child_removed",t,r,n),Yf(e,i,"child_added",t,r,n),Yf(e,i,"child_moved",s,r,n),Yf(e,i,"child_changed",t,r,n),Yf(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let Wp,Hp;class Kp{constructor(){this.views=new Map}}function Gp(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return ni(null!=s,"SyncTree gave us an op for an invalid query."),zp(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(zp(s,t,n,r));return i}}function Qp(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=wp(n,i?r:null),s=!1;e?s=!0:r instanceof pf?(e=bp(n,r),s=!1):(e=pf.EMPTY_NODE,s=!1);const o=$f(new Gf(e,s,!1),new Gf(r,i,!1));return new Up(t,o)}return o}function Yp(e,t,n,r,i,s){const o=Qp(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(of,((e,t)=>{r.push(bf(e,t))}));return n.isFullyInitialized()&&r.push(wf(n.getNode())),Bp(e,r,n.getNode(),t)}(o,n)}function $p(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=tm(e);if("default"===i)for(const[l,c]of e.views.entries())o=o.concat(qp(c,n,r)),Vp(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(o=o.concat(qp(t,n,r)),Vp(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!tm(e)&&s.push(new(ni(Wp,"Reference.ts has not been loaded"),Wp)(t._repo,t._path)),{removed:s,events:o}}function Jp(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Xp(e,t){let n=null;for(const r of e.views.values())n=n||jp(r,t);return n}function Zp(e,t){if(t._queryParams.loadsAllData())return nm(e);{const n=t._queryIdentifier;return e.views.get(n)}}function em(e,t){return null!=Zp(e,t)}function tm(e){return null!=nm(e)}function nm(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let rm=1;class im{constructor(e){this.listenProvider_=e,this.syncPointTree_=new np(null),this.pendingWriteTree_={visibleWrites:rp.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function sm(e,t,n,r,i){return function(e,t,n,r,i){ni(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=ip(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?pm(e,new Hf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function om(e,t,n,r){!function(e,t,n,r){ni(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=sp(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=np.fromObject(n);return pm(e,new Kf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function am(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(mp(e.pendingWriteTree_,t)){let t=new np(null);return null!=r.snap?t=t.set(Id(),!0):Bh(r.children,(e=>{t=t.set(new Ed(e),!0)})),pm(e,new Bf(r.path,t,n))}return[]}function lm(e,t,n){return pm(e,new Hf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function cm(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||em(o,t))){const l=$p(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>tm(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&tm(t)){return[nm(t)]}{let e=[];return t&&(e=Jp(t)),Bh(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=ym(e,r);e.listenProvider_.startListening(Im(i),vm(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(Im(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(_m(t));e.listenProvider_.stopListening(Im(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=_m(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function um(e,t,n,r){const i=wm(e,r);if(null!=i){const r=bm(i),s=r.path,o=r.queryId,a=Pd(s,t);return Em(e,s,new Hf(zf(o),a,n))}return[]}function hm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=Pd(e,i);s=s||Xp(t,n),o=o||tm(t)}));let a,l=e.syncPointTree_.get(i);if(l?(o=o||tm(l),s=s||Xp(l,Id())):(l=new Kp,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)a=!0;else{a=!1,s=pf.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=Xp(t,Id());n&&(s=s.updateImmediateChild(e,n))}))}const c=em(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=_m(t);ni(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=rm++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=Yp(l,t,n,pp(e.pendingWriteTree_,i),s,a);if(!c&&!o&&!r){const n=Zp(l,t);u=u.concat(function(e,t,n){const r=t._path,i=vm(e,t),s=ym(e,n),o=e.listenProvider_.startListening(Im(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)ni(!tm(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!Rd(e)&&t&&tm(t))return[nm(t).query];{let e=[];return t&&(e=e.concat(Jp(t).map((e=>e.query)))),Bh(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(Im(r),vm(e,r))}}return o}(e,t,n))}return u}function dm(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=Xp(n,Pd(e,t));if(r)return r}));return _p(r,t,i,n,!0)}function fm(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=Pd(e,n);r=r||Xp(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||Xp(i,Id()):(i=new Kp,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new Gf(r,!0,!1):null;return function(e){return Zf(e.viewCache_)}(Qp(i,t,pp(e.pendingWriteTree_,t._path),s?o.getNode():pf.EMPTY_NODE,s))}function pm(e,t){return mm(t,e.syncPointTree_,null,pp(e.pendingWriteTree_,Id()))}function mm(e,t,n,r){if(Rd(e.path))return gm(e,t,n,r);{const i=t.get(Id());null==n&&null!=i&&(n=Xp(i,Id()));let s=[];const o=Sd(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=kp(r,o);s=s.concat(mm(a,l,e,t))}return i&&(s=s.concat(Gp(i,e,r,n))),s}}function gm(e,t,n,r){const i=t.get(Id());null==n&&null!=i&&(n=Xp(i,Id()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=kp(r,t),l=e.operationForChild(t);l&&(s=s.concat(gm(l,i,o,a)))})),i&&(s=s.concat(Gp(i,e,r,n))),s}function ym(e,t){const n=t.query,r=vm(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||pf.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=wm(e,n);if(r){const n=bm(r),i=n.path,s=n.queryId,o=Pd(i,t);return Em(e,i,new Wf(zf(s),o))}return[]}(e,n._path,r):function(e,t){return pm(e,new Wf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return cm(e,n,null,r)}}}}function vm(e,t){const n=_m(t);return e.queryToTagMap.get(n)}function _m(e){return e._path.toString()+"$"+e._queryIdentifier}function wm(e,t){return e.tagToQueryMap.get(t)}function bm(e){const t=e.indexOf("$");return ni(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Ed(e.substr(0,t))}}function Em(e,t,n){const r=e.syncPointTree_.get(t);ni(r,"Missing sync point for query tag that we're tracking");return Gp(r,n,pp(e.pendingWriteTree_,t),null)}function Im(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(ni(Hp,"Reference.ts has not been loaded"),Hp)(e._repo,e._path):e}class Sm{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Sm(t)}node(){return this.node_}}class Tm{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ad(this.path_,e);return new Tm(this.syncTree_,t)}node(){return dm(this.syncTree_,this.path_)}}const km=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},Cm=function(e,t,n){return e&&"object"===typeof e?(ni(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?xm(e[".sv"],t,n):"object"===typeof e[".sv"]?Nm(e[".sv"],t):void ni(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},xm=function(e,t,n){if("timestamp"===e)return n.timestamp;ni(!1,"Unexpected server value: "+e)},Nm=function(e,t,n){e.hasOwnProperty("increment")||ni(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&ni(!1,"Unexpected increment value: "+r);const i=t.node();if(ni(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},Am=function(e,t,n,r){return Pm(t,new Tm(n,e),r)},Rm=function(e,t,n){return Pm(e,new Sm(t),n)};function Pm(e,t,n){const r=e.getPriority().val(),i=Cm(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=Cm(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new sf(s,yf(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new sf(i))),r.forEachChild(of,((e,r)=>{const i=Pm(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class Dm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function Om(e,t){let n=t instanceof Ed?t:new Ed(t),r=e,i=Sd(n);for(;null!==i;){const e=Pi(r.node.children,i)||{children:{},childCount:0};r=new Dm(i,r,e),n=kd(n),i=Sd(n)}return r}function Lm(e){return e.node.value}function Mm(e,t){e.node.value=t,qm(e)}function Fm(e){return e.node.childCount>0}function Um(e,t){Bh(e.node.children,((n,r)=>{t(new Dm(n,e,r))}))}function jm(e,t,n,r){n&&!r&&t(e),Um(e,(e=>{jm(e,t,!0,r)})),n&&r&&t(e)}function Vm(e){return new Ed(null===e.parent?e.name:Vm(e.parent)+"/"+e.name)}function qm(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===Lm(e)&&!Fm(e)}(n),i=Ri(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,qm(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,qm(e))}(e.parent,e.name,e)}const zm=/[\[\].#$\/\u0000-\u001F\u007F]/,Bm=/[\[\].#$\u0000-\u001F\u007F]/,Wm=10485760,Hm=function(e){return"string"===typeof e&&0!==e.length&&!zm.test(e)},Km=function(e){return"string"===typeof e&&0!==e.length&&!Bm.test(e)},Gm=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Lh(e)||e&&"object"===typeof e&&Ri(e,".sv")},Qm=function(e,t,n,r){r&&void 0===t||Ym(Hi(e,"value"),t,n)},Ym=function(e,t,n){const r=n instanceof Ed?new Md(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Ud(r));if("function"===typeof t)throw new Error(e+"contains a function "+Ud(r)+" with contents = "+t.toString());if(Lh(t))throw new Error(e+"contains "+t.toString()+" "+Ud(r));if("string"===typeof t&&t.length>Wm/3&&Qi(t)>Wm)throw new Error(e+"contains a string greater than "+Wm+" utf8 bytes "+Ud(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(Bh(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!Hm(t)))throw new Error(e+" contains an invalid key ("+t+") "+Ud(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Qi(t),Fd(e)}(r,t),Ym(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=Qi(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+Ud(r)+" in addition to actual children.")}},$m=function(e,t,n,r){if(r&&void 0===t)return;const i=Hi(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];Bh(t,((e,t)=>{const r=new Ed(e);if(Ym(i,t,Ad(n,r)),".priority"===Cd(r)&&!Gm(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=xd(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!Hm(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Dd);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&Ld(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},Jm=function(e,t,n){if(!n||void 0!==t){if(Lh(t))throw new Error(Hi(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Gm(t))throw new Error(Hi(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Xm=function(e,t,n,r){if((!r||void 0!==n)&&!Hm(n))throw new Error(Hi(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Zm=function(e,t,n,r){if((!r||void 0!==n)&&!Km(n))throw new Error(Hi(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},eg=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Zm(e,t,n,r)},tg=function(e,t){if(".info"===Sd(t))throw new Error(e+" failed = Can't modify data under /.info/")},ng=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Hm(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Km(e)}(n))throw new Error(Hi(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class rg{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ig(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||Od(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function sg(e,t,n){ig(e,n),ag(e,(e=>Od(e,t)))}function og(e,t,n){ig(e,n),ag(e,(e=>Ld(e,t)||Ld(t,e)))}function ag(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(lg(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function lg(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();Ch&&Ah("event: "+n.toString()),Gh(r)}}}const cg="repo_interrupt",ug=25;class hg{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rg,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Lf(),this.transactionQueueTree_=new Dm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dg(e,t,n){if(e.stats_=ld(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Df(e.repoInfo_,((t,n,r,i)=>{mg(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>gg(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ni(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new qd(e.repoInfo_,t,((t,n,r,i)=>{mg(e,t,n,r,i)}),(t=>{gg(e,t)}),(t=>{!function(e,t){Bh(t,((t,n)=>{yg(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return ad[n]||(ad[n]=t()),ad[n]}(e.repoInfo_,(()=>new Vf(e.stats_,e.server_))),e.infoData_=new Of,e.infoSyncTree_=new im({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=lm(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),yg(e,"connected",!1),e.serverSyncTree_=new im({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);og(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function fg(e){const t=e.infoData_.getNode(new Ed(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function pg(e){return km({timestamp:fg(e)})}function mg(e,t,n,r,i){e.dataUpdateCount++;const s=new Ed(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=Oi(n,(e=>yf(e)));o=function(e,t,n,r){const i=wm(e,r);if(i){const r=bm(i),s=r.path,o=r.queryId,a=Pd(s,t),l=np.fromObject(n);return Em(e,s,new Kf(zf(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=yf(n);o=um(e.serverSyncTree_,s,t,i)}else if(r){const t=Oi(n,(e=>yf(e)));o=function(e,t,n){const r=np.fromObject(n);return pm(e,new Kf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=yf(n);o=lm(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=xg(e,s)),og(e.eventQueue_,a,o)}function gg(e,t){yg(e,"connected",t),!1===t&&function(e){Sg(e,"onDisconnectEvents");const t=pg(e),n=Lf();Uf(e.onDisconnect_,Id(),((r,i)=>{const s=Am(r,i,e.serverSyncTree_,t);Mf(n,r,s)}));let r=[];Uf(n,Id(),((t,n)=>{r=r.concat(lm(e.serverSyncTree_,t,n));const i=Dg(e,t);xg(e,i)})),e.onDisconnect_=Lf(),og(e.eventQueue_,Id(),r)}(e)}function yg(e,t,n){const r=new Ed("/.info/"+t),i=yf(n);e.infoData_.updateSnapshot(r,i);const s=lm(e.infoSyncTree_,r,i);og(e.eventQueue_,r,s)}function vg(e){return e.nextWriteId_++}function _g(e,t,n,r,i){Sg(e,"set",{path:t.toString(),value:n,priority:r});const s=pg(e),o=yf(n,r),a=dm(e.serverSyncTree_,t),l=Rm(o,a,s),c=vg(e),u=sm(e.serverSyncTree_,t,l,c,!0);ig(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),((n,r)=>{const s="ok"===n;s||Oh("set at "+t+" failed: "+n);const o=am(e.serverSyncTree_,c,!s);og(e.eventQueue_,t,o),Tg(e,i,n,r)}));const h=Dg(e,t);xg(e,h),og(e.eventQueue_,h,[])}function wg(e,t,n){e.server_.onDisconnectCancel(t.toString(),((r,i)=>{"ok"===r&&Ff(e.onDisconnect_,t),Tg(e,n,r,i)}))}function bg(e,t,n,r){const i=yf(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),((n,s)=>{"ok"===n&&Mf(e.onDisconnect_,t,i),Tg(e,r,n,s)}))}function Eg(e,t,n){let r;r=".info"===Sd(t._path)?cm(e.infoSyncTree_,t,n):cm(e.serverSyncTree_,t,n),sg(e.eventQueue_,t._path,r)}function Ig(e){e.persistentConnection_&&e.persistentConnection_.interrupt(cg)}function Sg(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Ah(t,...r)}function Tg(e,t,n,r){t&&Gh((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}function kg(e,t,n){return dm(e.serverSyncTree_,t,n)||pf.EMPTY_NODE}function Cg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Pg(e,t),Lm(t)){const n=Ag(e,t);ni(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=kg(e,t,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const e=n[c];ni(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=Pd(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{Sg(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(am(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();Pg(e,Om(e.transactionQueueTree_,t)),Cg(e,e.transactionQueueTree_),og(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Gh(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Oh("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}xg(e,t)}}),o)}(e,Vm(t),n)}else Fm(t)&&Um(t,(t=>{Cg(e,t)}))}function xg(e,t){const n=Ng(e,t),r=Vm(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),o=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],c=Pd(n,s.path);let u,h=!1;if(ni(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)h=!0,u=s.abortReason,i=i.concat(am(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=ug)h=!0,u="maxretry",i=i.concat(am(e.serverSyncTree_,s.currentWriteId,!0));else{const n=kg(e,s.path,o);s.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){Ym("transaction failed: Data returned ",r,s.path);let t=yf(r);"object"===typeof r&&null!=r&&Ri(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=pg(e),c=Rm(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=vg(e),o.splice(o.indexOf(a),1),i=i.concat(sm(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(am(e.serverSyncTree_,a,!0))}else h=!0,u="nodata",i=i.concat(am(e.serverSyncTree_,s.currentWriteId,!0))}og(e.eventQueue_,n,i),i=[],h&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var a;Pg(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)Gh(r[l]);Cg(e,e.transactionQueueTree_)}(e,Ag(e,n),r),r}function Ng(e,t){let n,r=e.transactionQueueTree_;for(n=Sd(t);null!==n&&void 0===Lm(r);)r=Om(r,n),n=Sd(t=kd(t));return r}function Ag(e,t){const n=[];return Rg(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function Rg(e,t,n){const r=Lm(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Um(t,(t=>{Rg(e,t,n)}))}function Pg(e,t){const n=Lm(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Mm(t,n.length>0?n:void 0)}Um(t,(t=>{Pg(e,t)}))}function Dg(e,t){const n=Vm(Ng(e,t)),r=Om(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{Og(e,t)})),Og(e,r),jm(r,(t=>{Og(e,t)})),n}function Og(e,t){const n=Lm(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(ni(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(ni(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(am(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Mm(t,void 0):n.length=s+1,og(e.eventQueue_,Vm(t),i);for(let e=0;e<r.length;e++)Gh(r[e])}}const Lg=function(e,t){const n=Mg(e),r=n.namespace;"firebase.com"===n.domain&&Dh(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Dh("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Oh("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new rd(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Ed(n.pathString)}},Mg=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let e=n[i];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(r){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Oh("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},Fg="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ug=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Fg.charAt(n%64),n=Math.floor(n/64);ni(0===n,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=Fg.charAt(t[i]);return ni(20===o.length,"nextPushId: Length should be 20."),o}}();class jg{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ni(this.snapshot.exportVal())}}class Vg{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class qg{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ni(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class zg{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new mi;return wg(this._repo,this._path,e.wrapCallback((()=>{}))),e.promise}remove(){tg("OnDisconnect.remove",this._path);const e=new mi;return bg(this._repo,this._path,null,e.wrapCallback((()=>{}))),e.promise}set(e){tg("OnDisconnect.set",this._path),Qm("OnDisconnect.set",e,this._path,!1);const t=new mi;return bg(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}setWithPriority(e,t){tg("OnDisconnect.setWithPriority",this._path),Qm("OnDisconnect.setWithPriority",e,this._path,!1),Jm("OnDisconnect.setWithPriority",t,!1);const n=new mi;return function(e,t,n,r,i){const s=yf(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),((n,r)=>{"ok"===n&&Mf(e.onDisconnect_,t,s),Tg(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((()=>{}))),n.promise}update(e){tg("OnDisconnect.update",this._path),$m("OnDisconnect.update",e,this._path,!1);const t=new mi;return function(e,t,n,r){if(Di(n))return Ah("onDisconnect().update() called with empty data.  Don't do anything."),void Tg(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,((i,s)=>{"ok"===i&&Bh(n,((n,r)=>{const i=yf(r);Mf(e.onDisconnect_,Ad(t,n),i)})),Tg(0,r,i,s)}))}(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}}class Bg{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return Rd(this._path)?null:Cd(this._path)}get ref(){return new Gg(this._repo,this._path)}get _queryIdentifier(){const e=Pf(this._queryParams),t=qh(e);return"{}"===t?"default":t}get _queryObject(){return Pf(this._queryParams)}isEqual(e){if(!((e=Yi(e))instanceof Bg))return!1;const t=this._repo===e._repo,n=Od(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function Wg(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Hg(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Kd){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Mh)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Fh)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===of){if(null!=t&&!Gm(t)||null!=n&&!Gm(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ni(e.getIndex()instanceof vf||e.getIndex()===_f,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Kg(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Gg extends Bg{constructor(e,t){super(e,t,new Cf,!1)}get parent(){const e=Nd(this._path);return null===e?null:new Gg(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Qg{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Ed(e),n=Jg(this.ref,e);return new Qg(this._node.getChild(t),n,of)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new Qg(n,Jg(this.ref,t),of))))}hasChild(e){const t=new Ed(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Yg(e,t){return(e=Yi(e))._checkNotDeleted("ref"),void 0!==t?Jg(e._root,t):e._root}function $g(e,t){(e=Yi(e))._checkNotDeleted("refFromURL");const n=Lg(t,e._repo.repoInfo_.nodeAdmin);ng("refFromURL",n);const r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||Dh("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Yg(e,n.path.toString())}function Jg(e,t){return null===Sd((e=Yi(e))._path)?eg("child","path",t,!1):Zm("child","path",t,!1),new Gg(e._repo,Ad(e._path,t))}function Xg(e,t){e=Yi(e),tg("set",e._path),Qm("set",t,e._path,!1);const n=new mi;return _g(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function Zg(e,t){$m("update",t,e._path,!1);const n=new mi;return function(e,t,n,r){Sg(e,"update",{path:t.toString(),value:n});let i=!0;const s=pg(e),o={};if(Bh(n,((n,r)=>{i=!1,o[n]=Am(Ad(t,n),yf(r),e.serverSyncTree_,s)})),i)Ah("update() called with empty data.  Don't do anything."),Tg(0,r,"ok",void 0);else{const i=vg(e),s=om(e.serverSyncTree_,t,o,i);ig(e.eventQueue_,s),e.server_.merge(t.toString(),n,((n,s)=>{const o="ok"===n;o||Oh("update at "+t+" failed: "+n);const a=am(e.serverSyncTree_,i,!o),l=a.length>0?xg(e,t):t;og(e.eventQueue_,l,a),Tg(0,r,n,s)})),Bh(n,(n=>{const r=Dg(e,Ad(t,n));xg(e,r)})),og(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}function ey(e){e=Yi(e);const t=new qg((()=>{})),n=new ty(t);return function(e,t,n){const r=fm(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((r=>{const i=yf(r).withIndex(t._queryParams.getIndex());let s;if(hm(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=lm(e.serverSyncTree_,t._path,i);else{const n=vm(e.serverSyncTree_,t);s=um(e.serverSyncTree_,t._path,i,n)}return og(e.eventQueue_,t._path,s),cm(e.serverSyncTree_,t,n,null,!0),i}),(n=>(Sg(e,"get for query "+Ni(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new Qg(t,new Gg(e._repo,e._path),e._queryParams.getIndex())))}class ty{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new jg("value",this,new Qg(e.snapshotNode,new Gg(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Vg(this,e,t):null}matches(e){return e instanceof ty&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ny{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Vg(this,e,t):null}createEvent(e,t){ni(null!=e.childName,"Child events should have a childName.");const n=Jg(new Gg(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new jg(e.type,this,new Qg(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof ny&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function ry(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{Eg(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new qg(n,s||void 0),a="value"===t?new ty(o):new ny(t,o);return function(e,t,n){let r;r=".info"===Sd(t._path)?hm(e.infoSyncTree_,t,n):hm(e.serverSyncTree_,t,n),sg(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>Eg(e._repo,e,a)}function iy(e,t,n,r){return ry(e,"value",t,n,r)}function sy(e,t,n,r){return ry(e,"child_added",t,n,r)}function oy(e,t,n,r){return ry(e,"child_changed",t,n,r)}function ay(e,t,n,r){return ry(e,"child_moved",t,n,r)}function ly(e,t,n,r){return ry(e,"child_removed",t,n,r)}function cy(e,t,n){let r=null;const i=n?new qg(n):null;"value"===t?r=new ty(i):t&&(r=new ny(t,i)),Eg(e._repo,e,r)}class uy{}class hy extends uy{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Qm("endAt",this._value,e._path,!0);const t=Nf(e._queryParams,this._value,this._key);if(Kg(t),Hg(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Bg(e._repo,e._path,t,e._orderByCalled)}}class dy extends uy{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Qm("endBefore",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===Kd||n?Nf(e,t,n):Nf(e,t,Mh),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(Kg(t),Hg(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Bg(e._repo,e._path,t,e._orderByCalled)}}class fy extends uy{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Qm("startAt",this._value,e._path,!0);const t=xf(e._queryParams,this._value,this._key);if(Kg(t),Hg(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Bg(e._repo,e._path,t,e._orderByCalled)}}class py extends uy{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Qm("startAfter",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===Kd||n?xf(e,t,n):xf(e,t,Fh),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Kg(t),Hg(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Bg(e._repo,e._path,t,e._orderByCalled)}}class my extends uy{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Bg(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class gy extends uy{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Bg(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class yy extends uy{constructor(e){super(),this._path=e}_apply(e){Wg(e,"orderByChild");const t=new Ed(this._path);if(Rd(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new vf(t),r=Af(e._queryParams,n);return Hg(r),new Bg(e._repo,e._path,r,!0)}}class vy extends uy{_apply(e){Wg(e,"orderByKey");const t=Af(e._queryParams,Kd);return Hg(t),new Bg(e._repo,e._path,t,!0)}}class _y extends uy{_apply(e){Wg(e,"orderByPriority");const t=Af(e._queryParams,of);return Hg(t),new Bg(e._repo,e._path,t,!0)}}class wy extends uy{_apply(e){Wg(e,"orderByValue");const t=Af(e._queryParams,_f);return Hg(t),new Bg(e._repo,e._path,t,!0)}}class by extends uy{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Qm("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new hy(this._value,this._key)._apply(new fy(this._value,this._key)._apply(e))}}function Ey(e){let t=Yi(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const s of r)t=s._apply(t);return t}!function(e){ni(!Wp,"__referenceConstructor has already been defined"),Wp=e}(Gg),function(e){ni(!Hp,"__referenceConstructor has already been defined"),Hp=e}(Gg);const Iy="FIREBASE_DATABASE_EMULATOR_HOST",Sy={};let Ty=!1;function ky(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||Dh("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ah("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,l=Lg(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"/github.io/bigcinemas",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[Iy]),a?(o=!0,s="http://".concat(a,"?ns=").concat(c.namespace),l=Lg(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new Jh(Jh.OWNER):new $h(e.name,e.options,t);ng("Invalid Firebase Database URL",l),Rd(l.path)||Dh("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=Sy[t.name];i||(i={},Sy[t.name]=i);let s=i[e.toURLString()];s&&Dh("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new hg(e,Ty,n,r),i[e.toURLString()]=s,s}(c,e,u,new Yh(e.name,n));return new Cy(h,e)}class Cy{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(dg(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Gg(this._repo,Id())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=Sy[t];n&&n[e.key]===e||Dh("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Ig(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Dh("Cannot call "+e+" on a deleted database.")}}function xy(){md.IS_TRANSPORT_INITIALIZED&&Oh("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Ny(){xy(),hd.forceDisallow()}function Ay(){xy(),pd.forceDisallow(),hd.forceAllow()}function Ry(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Yi(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Dh("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Dh('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Jh(Jh.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:gi(r.mockUserToken,e.app.options.projectId);s=new Jh(t)}!function(e,t,n,r){e.repoInfo_=new rd("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,s)}function Py(e){var t;(e=Yi(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(cg)}function Dy(e,t){Nh(e,t)}const Oy={".sv":"timestamp"};class Ly{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function My(e,t,n){var r;if(e=Yi(e),tg("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,s=new mi,o=iy(e,(()=>{}));return function(e,t,n,r,i,s){Sg(e,"transaction on "+t);const o={path:t,update:n,onComplete:r,status:null,order:Sh(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=kg(e,t,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Ym("transaction failed: Data returned ",l,o.path),o.status=0;const n=Om(e.transactionQueueTree_,t),r=Lm(n)||[];let i;r.push(o),Mm(n,r),"object"===typeof l&&null!==l&&Ri(l,".priority")?(i=Pi(l,".priority"),ni(Gm(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(dm(e.serverSyncTree_,t)||pf.EMPTY_NODE).getPriority().val();const s=pg(e),c=yf(l,i),u=Rm(c,a,s);o.currentOutputSnapshotRaw=c,o.currentOutputSnapshotResolved=u,o.currentWriteId=vg(e);const h=sm(e.serverSyncTree_,t,u,o.currentWriteId,o.applyLocally);og(e.eventQueue_,t,h),Cg(e,e.transactionQueueTree_)}}(e._repo,e._path,t,((t,n,r)=>{let i=null;t?s.reject(t):(i=new Qg(r,new Gg(e._repo,e._path),of),s.resolve(new Ly(n,i)))}),o,i),s.promise}qd.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},qd.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){yh(Vs),Os(new $i("database",((e,t)=>{let{instanceIdentifier:n}=t;return ky(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Hs(ph,mh,e),Hs(ph,mh,"esm2017")}();const Fy=new os("@firebase/database-compat"),Uy=function(e){const t="FIREBASE WARNING: "+e;Fy.warn(t)};class jy{constructor(e){this._delegate=e}cancel(e){Wi("OnDisconnect.cancel",0,1,arguments.length),Ki("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then((()=>e(null)),(t=>e(t))),t}remove(e){Wi("OnDisconnect.remove",0,1,arguments.length),Ki("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then((()=>e(null)),(t=>e(t))),t}set(e,t){Wi("OnDisconnect.set",1,2,arguments.length),Ki("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){Wi("OnDisconnect.setWithPriority",2,3,arguments.length),Ki("OnDisconnect.setWithPriority","onComplete",n,!0);const r=this._delegate.setWithPriority(e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}update(e,t){if(Wi("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,Uy("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ki("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}}class Vy{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return Wi("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class qy{constructor(e,t){this._database=e,this._delegate=t}val(){return Wi("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return Wi("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return Wi("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return Wi("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return Wi("DataSnapshot.child",0,1,arguments.length),e=String(e),Zm("DataSnapshot.child","path",e,!1),new qy(this._database,this._delegate.child(e))}hasChild(e){return Wi("DataSnapshot.hasChild",1,1,arguments.length),Zm("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return Wi("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return Wi("DataSnapshot.forEach",1,1,arguments.length),Ki("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((t=>e(new qy(this._database,t))))}hasChildren(){return Wi("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return Wi("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return Wi("DataSnapshot.ref",0,0,arguments.length),new By(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class zy{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,r){var i;Wi("Query.on",2,4,arguments.length),Ki("Query.on","callback",t,!1);const s=zy.getCancelAndContextArgs_("Query.on",n,r),o=(e,n)=>{t.call(s.context,new qy(this.database,e),n)};o.userCallback=t,o.context=s.context;const a=null===(i=s.cancel)||void 0===i?void 0:i.bind(s.context);switch(e){case"value":return iy(this._delegate,o,a),t;case"child_added":return sy(this._delegate,o,a),t;case"child_removed":return ly(this._delegate,o,a),t;case"child_changed":return oy(this._delegate,o,a),t;case"child_moved":return ay(this._delegate,o,a),t;default:throw new Error(Hi("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if(Wi("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Hi(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),Ki("Query.off","callback",t,!0),Gi("Query.off","context",n,!0),t){const r=()=>{};r.userCallback=t,r.context=n,cy(this._delegate,e,r)}else cy(this._delegate,e)}get(){return ey(this._delegate).then((e=>new qy(this.database,e)))}once(e,t,n,r){Wi("Query.once",1,4,arguments.length),Ki("Query.once","callback",t,!0);const i=zy.getCancelAndContextArgs_("Query.once",n,r),s=new mi,o=(e,n)=>{const r=new qy(this.database,e);t&&t.call(i.context,r,n),s.resolve(r)};o.userCallback=t,o.context=i.context;const a=e=>{i.cancel&&i.cancel.call(i.context,e),s.reject(e)};switch(e){case"value":iy(this._delegate,o,a,{onlyOnce:!0});break;case"child_added":sy(this._delegate,o,a,{onlyOnce:!0});break;case"child_removed":ly(this._delegate,o,a,{onlyOnce:!0});break;case"child_changed":oy(this._delegate,o,a,{onlyOnce:!0});break;case"child_moved":ay(this._delegate,o,a,{onlyOnce:!0});break;default:throw new Error(Hi("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return Wi("Query.limitToFirst",1,1,arguments.length),new zy(this.database,Ey(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new my(e)}(e)))}limitToLast(e){return Wi("Query.limitToLast",1,1,arguments.length),new zy(this.database,Ey(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new gy(e)}(e)))}orderByChild(e){return Wi("Query.orderByChild",1,1,arguments.length),new zy(this.database,Ey(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Zm("orderByChild","path",e,!1),new yy(e)}(e)))}orderByKey(){return Wi("Query.orderByKey",0,0,arguments.length),new zy(this.database,Ey(this._delegate,new vy))}orderByPriority(){return Wi("Query.orderByPriority",0,0,arguments.length),new zy(this.database,Ey(this._delegate,new _y))}orderByValue(){return Wi("Query.orderByValue",0,0,arguments.length),new zy(this.database,Ey(this._delegate,new wy))}startAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Wi("Query.startAt",0,2,arguments.length),new zy(this.database,Ey(this._delegate,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Xm("startAt","key",t,!0),new fy(e,t)}(e,t)))}startAfter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Wi("Query.startAfter",0,2,arguments.length),new zy(this.database,Ey(this._delegate,function(e,t){return Xm("startAfter","key",t,!0),new py(e,t)}(e,t)))}endAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Wi("Query.endAt",0,2,arguments.length),new zy(this.database,Ey(this._delegate,function(e,t){return Xm("endAt","key",t,!0),new hy(e,t)}(e,t)))}endBefore(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Wi("Query.endBefore",0,2,arguments.length),new zy(this.database,Ey(this._delegate,function(e,t){return Xm("endBefore","key",t,!0),new dy(e,t)}(e,t)))}equalTo(e,t){return Wi("Query.equalTo",1,2,arguments.length),new zy(this.database,Ey(this._delegate,function(e,t){return Xm("equalTo","key",t,!0),new by(e,t)}(e,t)))}toString(){return Wi("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return Wi("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(Wi("Query.isEqual",1,1,arguments.length),!(e instanceof zy)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Ki(e,"cancel",r.cancel,!0),r.context=n,Gi(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Hi(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new By(this.database,new Gg(this._delegate._repo,this._delegate._path))}}class By extends zy{constructor(e,t){super(e,new Bg(t._repo,t._path,new Cf,!1)),this.database=e,this._delegate=t}getKey(){return Wi("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return Wi("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new By(this.database,Jg(this._delegate,e))}getParent(){Wi("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new By(this.database,e):null}getRoot(){return Wi("Reference.root",0,0,arguments.length),new By(this.database,this._delegate.root)}set(e,t){Wi("Reference.set",1,2,arguments.length),Ki("Reference.set","onComplete",t,!0);const n=Xg(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}update(e,t){if(Wi("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,Uy("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}tg("Reference.update",this._delegate._path),Ki("Reference.update","onComplete",t,!0);const n=Zg(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){Wi("Reference.setWithPriority",2,3,arguments.length),Ki("Reference.setWithPriority","onComplete",n,!0);const r=function(e,t,n){if(tg("setWithPriority",e._path),Qm("setWithPriority",t,e._path,!1),Jm("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const r=new mi;return _g(e._repo,e._path,t,n,r.wrapCallback((()=>{}))),r.promise}(this._delegate,e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}remove(e){Wi("Reference.remove",0,1,arguments.length),Ki("Reference.remove","onComplete",e,!0);const t=function(e){return tg("remove",e._path),Xg(e,null)}(this._delegate);return e&&t.then((()=>e(null)),(t=>e(t))),t}transaction(e,t,n){Wi("Reference.transaction",1,3,arguments.length),Ki("Reference.transaction","transactionUpdate",e,!1),Ki("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Hi(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);const r=My(this._delegate,e,{applyLocally:n}).then((e=>new Vy(e.committed,new qy(this.database,e.snapshot))));return t&&r.then((e=>t(null,e.committed,e.snapshot)),(e=>t(e,!1,null))),r}setPriority(e,t){Wi("Reference.setPriority",1,2,arguments.length),Ki("Reference.setPriority","onComplete",t,!0);const n=function(e,t){e=Yi(e),tg("setPriority",e._path),Jm("setPriority",t,!1);const n=new mi;return _g(e._repo,Ad(e._path,".priority"),t,null,n.wrapCallback((()=>{}))),n.promise}(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}push(e,t){Wi("Reference.push",0,2,arguments.length),Ki("Reference.push","onComplete",t,!0);const n=function(e,t){e=Yi(e),tg("push",e._path),Qm("push",t,e._path,!0);const n=fg(e._repo),r=Ug(n),i=Jg(e,r),s=Jg(e,r);let o;return o=null!=t?Xg(s,t).then((()=>s)):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),r=n.then((e=>new By(this.database,e)));t&&r.then((()=>t(null)),(e=>t(e)));const i=new By(this.database,n);return i.then=r.then.bind(r),i.catch=r.catch.bind(r,void 0),i}onDisconnect(){return tg("Reference.onDisconnect",this._delegate._path),new jy(new zg(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Wy{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Ny,forceLongPolling:Ay}}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ry(this._delegate,e,t,n)}ref(e){if(Wi("database.ref",0,1,arguments.length),e instanceof By){const t=$g(this._delegate,e.toString());return new By(this,t)}{const t=Yg(this._delegate,e);return new By(this,t)}}refFromURL(e){Wi("database.refFromURL",1,1,arguments.length);const t=$g(this._delegate,e);return new By(this,t)}goOffline(){return Wi("database.goOffline",0,0,arguments.length),function(e){(e=Yi(e))._checkNotDeleted("goOffline"),Ig(e._repo)}(this._delegate)}goOnline(){return Wi("database.goOnline",0,0,arguments.length),Py(this._delegate)}}Wy.ServerValue={TIMESTAMP:Oy,increment:e=>function(e){return{".sv":{increment:e}}}(e)};var Hy=Object.freeze({__proto__:null,initStandalone:function(e){let{app:t,url:n,version:r,customAuthImpl:i,customAppCheckImpl:s,namespace:o,nodeAdmin:a=!1}=e;yh(r);const l=new Zi("database-standalone"),c=new Xi("auth-internal",l);let u;return c.setComponent(new $i("auth-internal",(()=>i),"PRIVATE")),s&&(u=new Xi("app-check-internal",l),u.setComponent(new $i("app-check-internal",(()=>s),"PRIVATE"))),{instance:new Wy(ky(t,c,u,n,a),t),namespace:o}}});const Ky=Wy.ServerValue;!function(e){e.INTERNAL.registerComponent(new $i("database-compat",((e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Wy(i,r)}),"PUBLIC").setServiceProps({Reference:By,Query:zy,Database:Wy,DataSnapshot:qy,enableLogging:Dy,INTERNAL:Hy,ServerValue:Ky}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","1.0.2")}(uo);var Gy,Qy="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Yy={},$y=$y||{},Jy=Qy||self;function Xy(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Zy(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ev="closure_uid_"+(1e9*Math.random()>>>0),tv=0;function nv(e,t,n){return e.call.apply(e.bind,arguments)}function rv(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function iv(e,t,n){return(iv=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?nv:rv).apply(null,arguments)}function sv(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ov(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function av(){this.s=this.s,this.o=this.o}av.prototype.s=!1,av.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,ev)&&e[ev]||(e[ev]=++tv))},av.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lv=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function cv(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function uv(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Xy(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function hv(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}hv.prototype.h=function(){this.defaultPrevented=!0};var dv=function(){if(!Jy.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Jy.addEventListener("test",e,t),Jy.removeEventListener("test",e,t)}catch(n){}return e}();function fv(e){return/^[\s\xa0]*$/.test(e)}function pv(){var e=Jy.navigator;return e&&(e=e.userAgent)?e:""}function mv(e){return-1!=pv().indexOf(e)}function gv(e){return gv[" "](e),e}gv[" "]=function(){};var yv,vv,_v=mv("Opera"),wv=mv("Trident")||mv("MSIE"),bv=mv("Edge"),Ev=bv||wv,Iv=mv("Gecko")&&!(-1!=pv().toLowerCase().indexOf("webkit")&&!mv("Edge"))&&!(mv("Trident")||mv("MSIE"))&&!mv("Edge"),Sv=-1!=pv().toLowerCase().indexOf("webkit")&&!mv("Edge");function Tv(){var e=Jy.document;return e?e.documentMode:void 0}e:{var kv="",Cv=function(){var e=pv();return Iv?/rv:([^\);]+)(\)|;)/.exec(e):bv?/Edge\/([\d\.]+)/.exec(e):wv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Sv?/WebKit\/(\S+)/.exec(e):_v?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Cv&&(kv=Cv?Cv[1]:""),wv){var xv=Tv();if(null!=xv&&xv>parseFloat(kv)){yv=String(xv);break e}}yv=kv}if(Jy.document&&wv){var Nv=Tv();vv=Nv||(parseInt(yv,10)||void 0)}else vv=void 0;var Av=vv;function Rv(e,t){if(hv.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Iv){e:{try{gv(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Pv[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Rv.$.h.call(this)}}ov(Rv,hv);var Pv={2:"touch",3:"pen",4:"mouse"};Rv.prototype.h=function(){Rv.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Dv="closure_listenable_"+(1e6*Math.random()|0),Ov=0;function Lv(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Ov,this.fa=this.ia=!1}function Mv(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Fv(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Uv(e){const t={};for(const n in e)t[n]=e[n];return t}const jv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vv(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<jv.length;t++)n=jv[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function qv(e){this.src=e,this.g={},this.h=0}function zv(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=lv(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Mv(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Bv(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}qv.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Bv(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Lv(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Wv="closure_lm_"+(1e6*Math.random()|0),Hv={};function Kv(e,t,n,r,i){if(r&&r.once)return Qv(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Kv(e,t[s],n,r,i);return null}return n=t_(n),e&&e[Dv]?e.O(t,n,Zy(r)?!!r.capture:!!r,i):Gv(e,t,n,!1,r,i)}function Gv(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Zy(i)?!!i.capture:!!i,a=Zv(e);if(a||(e[Wv]=a=new qv(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Xv;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)dv||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Jv(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Qv(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Qv(e,t[s],n,r,i);return null}return n=t_(n),e&&e[Dv]?e.P(t,n,Zy(r)?!!r.capture:!!r,i):Gv(e,t,n,!0,r,i)}function Yv(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Yv(e,t[s],n,r,i);else r=Zy(r)?!!r.capture:!!r,n=t_(n),e&&e[Dv]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Bv(s=e.g[t],n,r,i))&&(Mv(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Zv(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Bv(t,n,r,i)),(n=-1<e?t[e]:null)&&$v(n))}function $v(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Dv])zv(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Jv(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Zv(t))?(zv(n,e),0==n.h&&(n.src=null,t[Wv]=null)):Mv(e)}}}function Jv(e){return e in Hv?Hv[e]:Hv[e]="on"+e}function Xv(e,t){if(e.fa)e=!0;else{t=new Rv(t,this);var n=e.listener,r=e.la||e.src;e.ia&&$v(e),e=n.call(r,t)}return e}function Zv(e){return(e=e[Wv])instanceof qv?e:null}var e_="__closure_events_fn_"+(1e9*Math.random()>>>0);function t_(e){return"function"===typeof e?e:(e[e_]||(e[e_]=function(t){return e.handleEvent(t)}),e[e_])}function n_(){av.call(this),this.i=new qv(this),this.S=this,this.J=null}function r_(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new hv(t,e);else if(t instanceof hv)t.target=t.target||e;else{var i=t;Vv(t=new hv(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=i_(o,r,!0,t)&&i}if(i=i_(o=t.g=e,r,!0,t)&&i,i=i_(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=i_(o=t.g=n[s],r,!1,t)&&i}function i_(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&zv(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}ov(n_,av),n_.prototype[Dv]=!0,n_.prototype.removeEventListener=function(e,t,n,r){Yv(this,e,t,n,r)},n_.prototype.N=function(){if(n_.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Mv(n[r]);delete t.g[e],t.h--}}this.J=null},n_.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},n_.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var s_=Jy.JSON.stringify;function o_(){var e=f_;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var a_=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new l_),(e=>e.reset()));class l_{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function c_(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function u_(e){Jy.setTimeout((()=>{throw e}),0)}let h_,d_=!1,f_=new class{constructor(){this.h=this.g=null}add(e,t){const n=a_.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},p_=()=>{const e=Jy.Promise.resolve(void 0);h_=()=>{e.then(m_)}};var m_=()=>{for(var e;e=o_();){try{e.h.call(e.g)}catch(n){u_(n)}var t=a_;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}d_=!1};function g_(e,t){n_.call(this),this.h=e||1,this.g=t||Jy,this.j=iv(this.qb,this),this.l=Date.now()}function y_(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function v_(e,t,n){if("function"===typeof e)n&&(e=iv(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=iv(e.handleEvent,e)}return 2147483647<Number(t)?-1:Jy.setTimeout(e,t||0)}function __(e){e.g=v_((()=>{e.g=null,e.i&&(e.i=!1,__(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}ov(g_,n_),(Gy=g_.prototype).ga=!1,Gy.T=null,Gy.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),r_(this,"tick"),this.ga&&(y_(this),this.start()))}},Gy.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Gy.N=function(){g_.$.N.call(this),y_(this),delete this.g};class w_ extends av{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:__(this)}N(){super.N(),this.g&&(Jy.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function b_(e){av.call(this),this.h=e,this.g={}}ov(b_,av);var E_=[];function I_(e,t,n,r){Array.isArray(n)||(n&&(E_[0]=n.toString()),n=E_);for(var i=0;i<n.length;i++){var s=Kv(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function S_(e){Fv(e.g,(function(e,t){this.g.hasOwnProperty(t)&&$v(e)}),e),e.g={}}function T_(){this.g=!0}function k_(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return s_(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}b_.prototype.N=function(){b_.$.N.call(this),S_(this)},b_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},T_.prototype.Ea=function(){this.g=!1},T_.prototype.info=function(){};var C_={},x_=null;function N_(){return x_=x_||new n_}function A_(e){hv.call(this,C_.Ta,e)}function R_(e){const t=N_();r_(t,new A_(t))}function P_(e,t){hv.call(this,C_.STAT_EVENT,e),this.stat=t}function D_(e){const t=N_();r_(t,new P_(t,e))}function O_(e,t){hv.call(this,C_.Ua,e),this.size=t}function L_(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Jy.setTimeout((function(){e()}),t)}C_.Ta="serverreachability",ov(A_,hv),C_.STAT_EVENT="statevent",ov(P_,hv),C_.Ua="timingevent",ov(O_,hv);var M_={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},F_={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function U_(){}function j_(e){return e.h||(e.h=e.i())}function V_(){}U_.prototype.h=null;var q_,z_={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function B_(){hv.call(this,"d")}function W_(){hv.call(this,"c")}function H_(){}function K_(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new b_(this),this.P=Q_,e=Ev?125:void 0,this.V=new g_(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new G_}function G_(){this.i=null,this.g="",this.h=!1}ov(B_,hv),ov(W_,hv),ov(H_,U_),H_.prototype.g=function(){return new XMLHttpRequest},H_.prototype.i=function(){return{}},q_=new H_;var Q_=45e3,Y_={},$_={};function J_(e,t,n){e.L=1,e.A=gw(hw(t)),e.u=n,e.S=!0,X_(e,null)}function X_(e,t){e.G=Date.now(),nw(e),e.B=hw(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Nw(n.i,"t",r),e.o=0,n=e.l.J,e.h=new G_,e.g=Ab(e.l,n?t:null,!e.u),0<e.O&&(e.M=new w_(iv(e.Pa,e,e.g),e.O)),I_(e.U,e.g,"readystatechange",e.nb),t=e.I?Uv(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),R_(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Z_(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function ew(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=tw(e,n),r==$_){4==t&&(e.s=4,D_(14),i=!1),k_(e.j,e.m,null,"[Incomplete Response]");break}if(r==Y_){e.s=4,D_(15),k_(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}k_(e.j,e.m,r,null),aw(e,r)}Z_(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,D_(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Eb(t),t.M=!0,D_(11))):(k_(e.j,e.m,n,"[Invalid Chunked Response]"),ow(e),sw(e))}function tw(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?$_:(n=Number(t.substring(n,r)),isNaN(n)?Y_:(r+=1)+n>t.length?$_:(t=t.slice(r,r+n),e.o=r+n,t))}function nw(e){e.Y=Date.now()+e.P,rw(e,e.P)}function rw(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=L_(iv(e.lb,e),t)}function iw(e){e.C&&(Jy.clearTimeout(e.C),e.C=null)}function sw(e){0==e.l.H||e.J||Tb(e.l,e)}function ow(e){iw(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,y_(e.V),S_(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function aw(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Mw(n.i,e)))if(!e.K&&Mw(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Sb(n),pb(n)}bb(n),D_(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=L_(iv(n.ib,n),6e3));if(1>=Lw(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Cb(n,11)}else if((e.K||n.g==e)&&Sb(n),!fv(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Fw(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,mw(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Nb(r,r.J?r.pa:null,r.Y),o.K){Uw(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(iw(a),nw(a)),r.g=o}else wb(r);0<n.j.length&&gb(n)}else"stop"!=c[0]&&"close"!=c[0]||Cb(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Cb(n,7):fb(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}R_()}catch(c){}}function lw(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Xy(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Xy(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Xy(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Gy=K_.prototype).setTimeout=function(e){this.P=e},Gy.nb=function(e){e=e.target;const t=this.M;t&&3==ab(e)?t.l():this.Pa(e)},Gy.Pa=function(e){try{if(e==this.g)e:{const u=ab(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Ev||this.g&&(this.h.h||this.g.ja()||lb(this.g)))){this.J||4!=u||7==t||R_(),iw(this);var n=this.g.da();this.ca=n;t:if(Z_(this)){var r=lb(this.g);e="";var i=r.length,s=4==ab(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ow(this),sw(this);var o="";break t}this.h.i=new Jy.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fv(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,D_(12),ow(this),sw(this);break e}k_(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,aw(this,n)}this.S?(ew(this,u,o),Ev&&this.i&&3==u&&(I_(this.U,this.V,"tick",this.mb),this.V.start())):(k_(this.j,this.m,o,null),aw(this,o)),4==u&&ow(this),this.i&&!this.J&&(4==u?Tb(this.l,this):(this.i=!1,nw(this)))}else(function(e){const t={};e=(e.g&&2<=ab(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(fv(e[r]))continue;var n=c_(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,D_(12)):(this.s=0,D_(13)),ow(this),sw(this)}}}catch(u){}},Gy.mb=function(){if(this.g){var e=ab(this.g),t=this.g.ja();this.o<t.length&&(iw(this),ew(this,e,t),this.i&&4!=e&&nw(this))}},Gy.cancel=function(){this.J=!0,ow(this)},Gy.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(R_(),D_(17)),ow(this),this.s=2,sw(this)):rw(this,this.Y-e)};var cw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uw(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof uw){this.h=e.h,dw(this,e.j),this.s=e.s,this.g=e.g,fw(this,e.m),this.l=e.l;var t=e.i,n=new Tw;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),pw(this,n),this.o=e.o}else e&&(t=String(e).match(cw))?(this.h=!1,dw(this,t[1]||"",!0),this.s=yw(t[2]||""),this.g=yw(t[3]||"",!0),fw(this,t[4]),this.l=yw(t[5]||"",!0),pw(this,t[6]||"",!0),this.o=yw(t[7]||"")):(this.h=!1,this.i=new Tw(null,this.h))}function hw(e){return new uw(e)}function dw(e,t,n){e.j=n?yw(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function fw(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function pw(e,t,n){t instanceof Tw?(e.i=t,function(e,t){t&&!e.j&&(kw(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Cw(this,t),Nw(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=vw(t,Iw)),e.i=new Tw(t,e.h))}function mw(e,t,n){e.i.set(t,n)}function gw(e){return mw(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function yw(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function vw(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,_w),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function _w(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}uw.prototype.toString=function(){var e=[],t=this.j;t&&e.push(vw(t,ww,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(vw(t,ww,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(vw(n,"/"==n.charAt(0)?Ew:bw,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",vw(n,Sw)),e.join("")};var ww=/[#\/\?@]/g,bw=/[#\?:]/g,Ew=/[#\?]/g,Iw=/[#\?@]/g,Sw=/#/g;function Tw(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function kw(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Cw(e,t){kw(e),t=Aw(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function xw(e,t){return kw(e),t=Aw(e,t),e.g.has(t)}function Nw(e,t,n){Cw(e,t),0<n.length&&(e.i=null,e.g.set(Aw(e,t),cv(n)),e.h+=n.length)}function Aw(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Gy=Tw.prototype).add=function(e,t){kw(this),this.i=null,e=Aw(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Gy.forEach=function(e,t){kw(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Gy.ta=function(){kw(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Gy.Z=function(e){kw(this);let t=[];if("string"===typeof e)xw(this,e)&&(t=t.concat(this.g.get(Aw(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Gy.set=function(e,t){return kw(this),this.i=null,xw(this,e=Aw(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Gy.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Gy.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Rw=class{constructor(e,t){this.g=e,this.map=t}};function Pw(e){this.l=e||Dw,Jy.PerformanceNavigationTiming?e=0<(e=Jy.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Jy.g&&Jy.g.Ka&&Jy.g.Ka()&&Jy.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Dw=10;function Ow(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Lw(e){return e.h?1:e.g?e.g.size:0}function Mw(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Fw(e,t){e.g?e.g.add(t):e.h=t}function Uw(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function jw(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return cv(e.i)}Pw.prototype.cancel=function(){if(this.i=jw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Vw,qw=class{stringify(e){return Jy.JSON.stringify(e,void 0)}parse(e){return Jy.JSON.parse(e,void 0)}};function zw(){this.g=new qw}function Bw(e,t,n){const r=n||"";try{lw(e,(function(e,n){let i=e;Zy(e)&&(i=s_(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ww(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function Hw(e){this.l=e.ec||null,this.j=e.ob||!1}function Kw(e,t){n_.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Gw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ov(Hw,U_),Hw.prototype.g=function(){return new Kw(this.l,this.j)},Hw.prototype.i=(Vw={},function(){return Vw}),ov(Kw,n_);var Gw=0;function Qw(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Yw(e){e.readyState=4,e.l=null,e.j=null,e.A=null,$w(e)}function $w(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Gy=Kw.prototype).open=function(e,t){if(this.readyState!=Gw)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,$w(this)},Gy.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Jy).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Gy.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yw(this)),this.readyState=Gw},Gy.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,$w(this)),this.g&&(this.readyState=3,$w(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Jy.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Qw(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Gy.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Yw(this):$w(this),3==this.readyState&&Qw(this)}},Gy.Za=function(e){this.g&&(this.response=this.responseText=e,Yw(this))},Gy.Ya=function(e){this.g&&(this.response=e,Yw(this))},Gy.ka=function(){this.g&&Yw(this)},Gy.setRequestHeader=function(e,t){this.v.append(e,t)},Gy.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Gy.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Kw.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Jw=Jy.JSON.parse;function Xw(e){n_.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Zw,this.L=this.M=!1}ov(Xw,n_);var Zw="",eb=/^https?$/i,tb=["POST","PUT"];function nb(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,rb(e),sb(e)}function rb(e){e.F||(e.F=!0,r_(e,"complete"),r_(e,"error"))}function ib(e){if(e.h&&"undefined"!=typeof $y&&(!e.C[1]||4!=ab(e)||2!=e.da()))if(e.v&&4==ab(e))v_(e.La,0,e);else if(r_(e,"readystatechange"),4==ab(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(cw)[1]||null;!i&&Jy.self&&Jy.self.location&&(i=Jy.self.location.protocol.slice(0,-1)),r=!eb.test(i?i.toLowerCase():"")}n=r}if(n)r_(e,"complete"),r_(e,"success");else{e.m=6;try{var s=2<ab(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",rb(e)}}finally{sb(e)}}}function sb(e,t){if(e.g){ob(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||r_(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function ob(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Jy.clearTimeout(e.A),e.A=null)}function ab(e){return e.g?e.g.readyState:0}function lb(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Zw:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(mE){return null}}function cb(e){let t="";return Fv(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ub(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=cb(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):mw(e,t,n))}function hb(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function db(e){this.Ga=0,this.j=[],this.l=new T_,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=hb("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=hb("baseRetryDelayMs",5e3,e),this.hb=hb("retryDelaySeedMs",1e4,e),this.eb=hb("forwardChannelMaxRetries",2,e),this.xa=hb("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Pw(e&&e.concurrentRequestLimit),this.Ja=new zw,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function fb(e){if(mb(e),3==e.H){var t=e.W++,n=hw(e.I);if(mw(n,"SID",e.K),mw(n,"RID",t),mw(n,"TYPE","terminate"),vb(e,n),(t=new K_(e,e.l,t)).L=2,t.A=gw(hw(n)),n=!1,Jy.navigator&&Jy.navigator.sendBeacon)try{n=Jy.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&Jy.Image&&((new Image).src=t.A,n=!0),n||(t.g=Ab(t.l,null),t.g.ha(t.A)),t.G=Date.now(),nw(t)}xb(e)}function pb(e){e.g&&(Eb(e),e.g.cancel(),e.g=null)}function mb(e){pb(e),e.u&&(Jy.clearTimeout(e.u),e.u=null),Sb(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Jy.clearTimeout(e.m),e.m=null)}function gb(e){if(!Ow(e.i)&&!e.m){e.m=!0;var t=e.Na;h_||p_(),d_||(h_(),d_=!0),f_.add(t,e),e.C=0}}function yb(e,t){var n;n=t?t.m:e.W++;const r=hw(e.I);mw(r,"SID",e.K),mw(r,"RID",n),mw(r,"AID",e.V),vb(e,r),e.o&&e.s&&ub(r,e.o,e.s),n=new K_(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=_b(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Fw(e.i,n),J_(n,r,t)}function vb(e,t){e.na&&Fv(e.na,(function(e,n){mw(t,n,e)})),e.h&&lw({},(function(e,n){mw(t,n,e)}))}function _b(e,t,n){n=Math.min(e.j.length,n);var r=e.h?iv(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Bw(a,e,"req"+n+"_")}catch(PI){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function wb(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;h_||p_(),d_||(h_(),d_=!0),f_.add(t,e),e.A=0}}function bb(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=L_(iv(e.Ma,e),kb(e,e.A)),e.A++,!0)}function Eb(e){null!=e.B&&(Jy.clearTimeout(e.B),e.B=null)}function Ib(e){e.g=new K_(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=hw(e.wa);mw(t,"RID","rpc"),mw(t,"SID",e.K),mw(t,"AID",e.V),mw(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&mw(t,"TO",e.qa),mw(t,"TYPE","xmlhttp"),vb(e,t),e.o&&e.s&&ub(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=gw(hw(t)),n.u=null,n.S=!0,X_(n,e)}function Sb(e){null!=e.v&&(Jy.clearTimeout(e.v),e.v=null)}function Tb(e,t){var n=null;if(e.g==t){Sb(e),Eb(e),e.g=null;var r=2}else{if(!Mw(e.i,t))return;n=t.F,Uw(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;r_(r=N_(),new O_(r,n)),gb(e)}else wb(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Lw(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=L_(iv(e.Na,e,t),kb(e,e.C)),e.C++,!0))}(e,t)||2==r&&bb(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Cb(e,5);break;case 4:Cb(e,10);break;case 3:Cb(e,6);break;default:Cb(e,2)}}function kb(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Cb(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=iv(e.pb,e);n||(n=new uw("//www.google.com/images/cleardot.gif"),Jy.location&&"http"==Jy.location.protocol||dw(n,"https"),gw(n)),function(e,t){const n=new T_;if(Jy.Image){const r=new Image;r.onload=sv(Ww,n,r,"TestLoadImage: loaded",!0,t),r.onerror=sv(Ww,n,r,"TestLoadImage: error",!1,t),r.onabort=sv(Ww,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=sv(Ww,n,r,"TestLoadImage: timeout",!1,t),Jy.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else D_(2);e.H=0,e.h&&e.h.za(t),xb(e),mb(e)}function xb(e){if(e.H=0,e.ma=[],e.h){const t=jw(e.i);0==t.length&&0==e.j.length||(uv(e.ma,t),uv(e.ma,e.j),e.i.i.length=0,cv(e.j),e.j.length=0),e.h.ya()}}function Nb(e,t,n){var r=n instanceof uw?hw(n):new uw(n);if(""!=r.g)t&&(r.g=t+"."+r.g),fw(r,r.m);else{var i=Jy.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new uw(null);r&&dw(s,r),t&&(s.g=t),i&&fw(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&mw(r,n,t),mw(r,"VER",e.ra),vb(e,r),r}function Ab(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Xw(new Hw({ob:n})):new Xw(e.va)).Oa(e.J),t}function Rb(){}function Pb(){if(wv&&!(10<=Number(Av)))throw Error("Environmental error: no available transport.")}function Db(e,t){n_.call(this),this.g=new db(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!fv(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!fv(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Mb(this)}function Ob(e){B_.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Lb(){W_.call(this),this.status=1}function Mb(e){this.g=e}function Fb(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ub(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function jb(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Gy=Xw.prototype).Oa=function(e){this.M=e},Gy.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():q_.g(),this.C=this.u?j_(this.u):j_(q_),this.g.onreadystatechange=iv(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void nb(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Jy.FormData&&e instanceof Jy.FormData,!(0<=lv(tb,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ob(this),0<this.B&&((this.L=function(e){return wv&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=iv(this.ua,this)):this.A=v_(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){nb(this,s)}},Gy.ua=function(){"undefined"!=typeof $y&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,r_(this,"timeout"),this.abort(8))},Gy.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,r_(this,"complete"),r_(this,"abort"),sb(this))},Gy.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),sb(this,!0)),Xw.$.N.call(this)},Gy.La=function(){this.s||(this.G||this.v||this.l?ib(this):this.kb())},Gy.kb=function(){ib(this)},Gy.isActive=function(){return!!this.g},Gy.da=function(){try{return 2<ab(this)?this.g.status:-1}catch(Vw){return-1}},Gy.ja=function(){try{return this.g?this.g.responseText:""}catch(Vw){return""}},Gy.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Jw(t)}},Gy.Ia=function(){return this.m},Gy.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Gy=db.prototype).ra=8,Gy.H=1,Gy.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new K_(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Uv(s),Vv(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=_b(this,i,t),mw(n=hw(this.I),"RID",e),mw(n,"CVER",22),this.F&&mw(n,"X-HTTP-Session-Id",this.F),vb(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(cb(s)))+"&"+t:this.o&&ub(n,this.o,s)),Fw(this.i,i),this.bb&&mw(n,"TYPE","init"),this.P?(mw(n,"$req",t),mw(n,"SID","null"),i.aa=!0,J_(i,n,null)):J_(i,n,t),this.H=2}}else 3==this.H&&(e?yb(this,e):0==this.j.length||Ow(this.i)||yb(this))},Gy.Ma=function(){if(this.u=null,Ib(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=L_(iv(this.jb,this),e)}},Gy.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,D_(10),pb(this),Ib(this))},Gy.ib=function(){null!=this.v&&(this.v=null,pb(this),bb(this),D_(19))},Gy.pb=function(e){e?(this.l.info("Successfully pinged google.com"),D_(2)):(this.l.info("Failed to ping google.com"),D_(1))},Gy.isActive=function(){return!!this.h&&this.h.isActive(this)},(Gy=Rb.prototype).Ba=function(){},Gy.Aa=function(){},Gy.za=function(){},Gy.ya=function(){},Gy.isActive=function(){return!0},Gy.Va=function(){},Pb.prototype.g=function(e,t){return new Db(e,t)},ov(Db,n_),Db.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;D_(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Nb(e,null,e.Y),gb(e)},Db.prototype.close=function(){fb(this.g)},Db.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=s_(e),e=n);t.j.push(new Rw(t.fb++,e)),3==t.H&&gb(t)},Db.prototype.N=function(){this.g.h=null,delete this.j,fb(this.g),delete this.g,Db.$.N.call(this)},ov(Ob,B_),ov(Lb,W_),ov(Mb,Rb),Mb.prototype.Ba=function(){r_(this.g,"a")},Mb.prototype.Aa=function(e){r_(this.g,new Ob(e))},Mb.prototype.za=function(e){r_(this.g,new Lb)},Mb.prototype.ya=function(){r_(this.g,"b")},ov(Fb,(function(){this.blockSize=-1})),Fb.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Fb.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Ub(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Ub(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Ub(this,r),i=0;break}}this.h=i,this.i+=t},Fb.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Vb={};function qb(e){return-128<=e&&128>e?function(e,t){var n=Vb;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new jb([0|e],0>e?-1:0)})):new jb([0|e],0>e?-1:0)}function zb(e){if(isNaN(e)||!isFinite(e))return Wb;if(0>e)return Yb(zb(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Bb;return new jb(t,0)}var Bb=4294967296,Wb=qb(0),Hb=qb(1),Kb=qb(16777216);function Gb(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Qb(e){return-1==e.h}function Yb(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new jb(n,~e.h).add(Hb)}function $b(e,t){return e.add(Yb(t))}function Jb(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Xb(e,t){this.g=e,this.h=t}function Zb(e,t){if(Gb(t))throw Error("division by zero");if(Gb(e))return new Xb(Wb,Wb);if(Qb(e))return t=Zb(Yb(e),t),new Xb(Yb(t.g),Yb(t.h));if(Qb(t))return t=Zb(e,Yb(t)),new Xb(Yb(t.g),t.h);if(30<e.g.length){if(Qb(e)||Qb(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Hb,r=t;0>=r.X(e);)n=eE(n),r=eE(r);var i=tE(n,1),s=tE(r,1);for(r=tE(r,2),n=tE(n,2);!Gb(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=tE(r,1),n=tE(n,1)}return t=$b(e,i.R(t)),new Xb(i,t)}for(i=Wb;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=zb(n)).R(t);Qb(o)||0<o.X(e);)o=(s=zb(n-=r)).R(t);Gb(s)&&(s=Hb),i=i.add(s),e=$b(e,o)}return new Xb(i,e)}function eE(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new jb(n,e.h)}function tE(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new jb(i,e.h)}(Gy=jb.prototype).ea=function(){if(Qb(this))return-Yb(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Bb+r)*t,t*=Bb}return e},Gy.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Gb(this))return"0";if(Qb(this))return"-"+Yb(this).toString(e);for(var t=zb(Math.pow(e,6)),n=this,r="";;){var i=Zb(n,t).g,s=((0<(n=$b(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Gb(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Gy.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Gy.X=function(e){return Qb(e=$b(this,e))?-1:Gb(e)?0:1},Gy.abs=function(){return Qb(this)?Yb(this):this},Gy.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new jb(n,-2147483648&n[n.length-1]?-1:0)},Gy.R=function(e){if(Gb(this)||Gb(e))return Wb;if(Qb(this))return Qb(e)?Yb(this).R(Yb(e)):Yb(Yb(this).R(e));if(Qb(e))return Yb(this.R(Yb(e)));if(0>this.X(Kb)&&0>e.X(Kb))return zb(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,Jb(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Jb(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Jb(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Jb(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new jb(n,0)},Gy.gb=function(e){return Zb(this,e).h},Gy.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new jb(n,this.h&e.h)},Gy.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new jb(n,this.h|e.h)},Gy.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new jb(n,this.h^e.h)},Pb.prototype.createWebChannel=Pb.prototype.g,Db.prototype.send=Db.prototype.u,Db.prototype.open=Db.prototype.m,Db.prototype.close=Db.prototype.close,M_.NO_ERROR=0,M_.TIMEOUT=8,M_.HTTP_ERROR=6,F_.COMPLETE="complete",V_.EventType=z_,z_.OPEN="a",z_.CLOSE="b",z_.ERROR="c",z_.MESSAGE="d",n_.prototype.listen=n_.prototype.O,Xw.prototype.listenOnce=Xw.prototype.P,Xw.prototype.getLastError=Xw.prototype.Sa,Xw.prototype.getLastErrorCode=Xw.prototype.Ia,Xw.prototype.getStatus=Xw.prototype.da,Xw.prototype.getResponseJson=Xw.prototype.Wa,Xw.prototype.getResponseText=Xw.prototype.ja,Xw.prototype.send=Xw.prototype.ha,Xw.prototype.setWithCredentials=Xw.prototype.Oa,Fb.prototype.digest=Fb.prototype.l,Fb.prototype.reset=Fb.prototype.reset,Fb.prototype.update=Fb.prototype.j,jb.prototype.add=jb.prototype.add,jb.prototype.multiply=jb.prototype.R,jb.prototype.modulo=jb.prototype.gb,jb.prototype.compare=jb.prototype.X,jb.prototype.toNumber=jb.prototype.ea,jb.prototype.toString=jb.prototype.toString,jb.prototype.getBits=jb.prototype.D,jb.fromNumber=zb,jb.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Yb(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=zb(Math.pow(n,8)),i=Wb,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=zb(Math.pow(n,o)),i=i.R(o).add(zb(a))):i=(i=i.R(r)).add(zb(a))}return i};var nE=Yy.createWebChannelTransport=function(){return new Pb},rE=Yy.getStatEventTarget=function(){return N_()},iE=Yy.ErrorCode=M_,sE=Yy.EventType=F_,oE=Yy.Event=C_,aE=Yy.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},lE=(Yy.FetchXmlHttpFactory=Hw,Yy.WebChannel=V_),cE=Yy.XhrIo=Xw,uE=Yy.Md5=Fb,hE=Yy.Integer=jb;const dE="@firebase/firestore";class fE{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fE.UNAUTHENTICATED=new fE(null),fE.GOOGLE_CREDENTIALS=new fE("google-credentials-uid"),fE.FIRST_PARTY=new fE("first-party-uid"),fE.MOCK_USER=new fE("mock-user");let pE="10.7.0";const mE=new os("@firebase/firestore");function gE(){return mE.logLevel}function yE(e){if(mE.logLevel<=ts.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(wE);mE.debug("Firestore (".concat(pE,"): ").concat(e),...i)}}function vE(e){if(mE.logLevel<=ts.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(wE);mE.error("Firestore (".concat(pE,"): ").concat(e),...i)}}function _E(e){if(mE.logLevel<=ts.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(wE);mE.warn("Firestore (".concat(pE,"): ").concat(e),...i)}}function wE(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function bE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(pE,") INTERNAL ASSERTION FAILED: ")+e;throw vE(t),new Error(t)}function EE(e,t){e||bE()}function IE(e,t){return e}const SE={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class TE extends Ti{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class kE{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class CE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class xE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(fE.UNAUTHENTICATED)))}shutdown(){}}class NE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class AE{constructor(e){this.t=e,this.currentUser=fE.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new kE;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new kE,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{yE("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(yE("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new kE)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(yE("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(EE("string"==typeof t.accessToken),new CE(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return EE(null===e||"string"==typeof e),new fE(e)}}class RE{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=fE.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class PE{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new RE(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(fE.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class DE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OE{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&yE("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,yE("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{yE("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):yE("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(EE("string"==typeof e.token),this.R=e.token,new DE(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function LE(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class ME{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=LE(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function FE(e,t){return e<t?-1:e>t?1:0}function UE(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function jE(e){return e+"\0"}class VE{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new TE(SE.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new TE(SE.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new TE(SE.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new TE(SE.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return VE.fromMillis(Date.now())}static fromDate(e){return VE.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new VE(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?FE(this.nanoseconds,e.nanoseconds):FE(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qE{constructor(e){this.timestamp=e}static fromTimestamp(e){return new qE(e)}static min(){return new qE(new VE(0,0))}static max(){return new qE(new VE(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class zE{constructor(e,t,n){void 0===t?t=0:t>e.length&&bE(),void 0===n?n=e.length-t:n>e.length-t&&bE(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===zE.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zE?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class BE extends zE{construct(e,t,n){return new BE(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new TE(SE.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new BE(e)}static emptyPath(){return new BE([])}}const WE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class HE extends zE{construct(e,t,n){return new HE(e,t,n)}static isValidIdentifier(e){return WE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),HE.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new HE(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new TE(SE.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new TE(SE.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new TE(SE.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new TE(SE.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new HE(t)}static emptyPath(){return new HE([])}}class KE{constructor(e){this.path=e}static fromPath(e){return new KE(BE.fromString(e))}static fromName(e){return new KE(BE.fromString(e).popFirst(5))}static empty(){return new KE(BE.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===BE.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return BE.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new KE(new BE(e.slice()))}}class GE{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function QE(e){return e.fields.find((e=>2===e.kind))}function YE(e){return e.fields.filter((e=>2!==e.kind))}GE.UNKNOWN_ID=-1;class $E{constructor(e,t){this.fieldPath=e,this.kind=t}}class JE{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new JE(0,eI.min())}}function XE(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=qE.fromTimestamp(1e9===r?new VE(n+1,0):new VE(n,r));return new eI(i,KE.empty(),t)}function ZE(e){return new eI(e.readTime,e.key,-1)}class eI{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new eI(qE.min(),KE.empty(),-1)}static max(){return new eI(qE.max(),KE.empty(),-1)}}function tI(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=KE.comparator(e.documentKey,t.documentKey),0!==n?n:FE(e.largestBatchId,t.largestBatchId))}const nI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function iI(e){if(e.code!==SE.FAILED_PRECONDITION||e.message!==nI)throw e;yE("LocalStore","Unexpectedly lost primary lease")}class sI{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&bE(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new sI(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof sI?t:sI.resolve(t)}catch(e){return sI.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):sI.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):sI.reject(t)}static resolve(e){return new sI(((t,n)=>{t(e)}))}static reject(e){return new sI(((t,n)=>{n(e)}))}static waitFor(e){return new sI(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=sI.resolve(!1);for(const n of e)t=t.next((e=>e?sI.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new sI(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new sI(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class oI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new kE,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new cI(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=pI(t.target.error);this.V.reject(new cI(e,n))}}static open(e,t,n,r){try{return new oI(t,e.transaction(r,n))}catch(e){throw new cI(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(yE("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new hI(t)}}class aI{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===aI.S(yi())&&vE("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return yE("SimpleDb","Removing database:",e),dI(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Si())return!1;if(aI.C())return!0;const e=yi(),t=aI.S(e),n=0<t&&t<10,r=aI.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/github.io/bigcinemas",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(yE("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new cI(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new TE(SE.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new TE(SE.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new cI(e,r))},r.onupgradeneeded=e=>{yE("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{yE("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=oI.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),sI.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(yE("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class lI{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return dI(this.k.delete())}}class cI extends TE{constructor(e,t){super(SE.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function uI(e){return"IndexedDbTransactionError"===e.name}class hI{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(yE("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(yE("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),dI(n)}add(e){return yE("SimpleDb","ADD",this.store.name,e,e),dI(this.store.add(e))}get(e){return dI(this.store.get(e)).next((t=>(void 0===t&&(t=null),yE("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return yE("SimpleDb","DELETE",this.store.name,e),dI(this.store.delete(e))}count(){return yE("SimpleDb","COUNT",this.store.name),dI(this.store.count())}W(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new sI(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new sI(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){yE("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new sI(((n,r)=>{t.onerror=e=>{const t=pI(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new sI(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new lI(i),o=t(i.primaryKey,i.value,s);if(o instanceof sI){const e=o.catch((e=>(s.done(),sI.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>sI.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function dI(e){return new sI(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=pI(e.target.error);n(t)}}))}let fI=!1;function pI(e){const t=aI.S(yi());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new TE("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return fI||(fI=!0,setTimeout((()=>{throw e}),0)),e}}return e}class mI{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){yE("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{yE("IndexBackiller","Documents written: ".concat(await this.X.te()))}catch(e){uI(e)?yE("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await iI(e)}await this.ee(6e4)}))}}class gI{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return sI.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return yE("IndexBackiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(yE("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=ZE(t);tI(r,n)>0&&(n=r)})),new eI(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class yI{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function vI(e){return null==e}function _I(e){return 0===e&&1/e==-1/0}function wI(e){return"number"==typeof e&&Number.isInteger(e)&&!_I(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function bI(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=II(t)),t=EI(e.get(n),t);return II(t)}function EI(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function II(e){return e+"\x01\x01"}function SI(e){const t=e.length;if(EE(t>=2),2===t)return EE("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),BE.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&bE(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:bE()}s=t+2}return new BE(r)}yI._e=-1;const TI=["userId","batchId"];function kI(e,t){return[e,bI(t)]}function CI(e,t,n){return[e,bI(t),n]}const xI={},NI=["prefixPath","collectionGroup","readTime","documentId"],AI=["prefixPath","collectionGroup","documentId"],RI=["collectionGroup","readTime","prefixPath","documentId"],PI=["canonicalId","targetId"],DI=["targetId","path"],OI=["path","targetId"],LI=["collectionId","parent"],MI=["indexId","uid"],FI=["uid","sequenceNumber"],UI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jI=["indexId","uid","orderedDocumentKey"],VI=["userId","collectionPath","documentId"],qI=["userId","collectionPath","largestBatchId"],zI=["userId","collectionGroup","largestBatchId"],BI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],WI=[...BI,"documentOverlays"],HI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],KI=HI,GI=[...KI,"indexConfiguration","indexState","indexEntries"];class QI extends rI{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function YI(e,t){const n=IE(e);return aI.M(n.ae,t)}function $I(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function JI(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function XI(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ZI{constructor(e,t){this.comparator=e,this.root=t||tS.EMPTY}insert(e,t){return new ZI(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tS.BLACK,null,null))}remove(e){return new ZI(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tS.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eS(this.root,e,this.comparator,!1)}getReverseIterator(){return new eS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eS(this.root,e,this.comparator,!0)}}class eS{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tS{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:tS.RED,this.left=null!=r?r:tS.EMPTY,this.right=null!=i?i:tS.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new tS(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return tS.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return tS.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tS.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tS.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw bE();if(this.right.isRed())throw bE();const e=this.left.check();if(e!==this.right.check())throw bE();return e+(this.isRed()?0:1)}}tS.EMPTY=null,tS.RED=!0,tS.BLACK=!1,tS.EMPTY=new class{constructor(){this.size=0}get key(){throw bE()}get value(){throw bE()}get color(){throw bE()}get left(){throw bE()}get right(){throw bE()}copy(e,t,n,r,i){return this}insert(e,t,n){return new tS(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nS{constructor(e){this.comparator=e,this.data=new ZI(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rS(this.data.getIterator())}getIteratorFrom(e){return new rS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof nS))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new nS(this.comparator);return t.data=e,t}}class rS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function iS(e){return e.hasNext()?e.getNext():void 0}class sS{constructor(e){this.fields=e,e.sort(HE.comparator)}static empty(){return new sS([])}unionWith(e){let t=new nS(HE.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new sS(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return UE(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class oS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class aS{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new oS("Invalid base64 string: "+e):e}}(e);return new aS(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new aS(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return FE(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}aS.EMPTY_BYTE_STRING=new aS("");const lS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cS(e){if(EE(!!e),"string"==typeof e){let t=0;const n=lS.exec(e);if(EE(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:uS(e.seconds),nanos:uS(e.nanos)}}function uS(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function hS(e){return"string"==typeof e?aS.fromBase64String(e):aS.fromUint8Array(e)}function dS(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function fS(e){const t=e.mapValue.fields.__previous_value__;return dS(t)?fS(t):t}function pS(e){const t=cS(e.mapValue.fields.__local_write_time__.timestampValue);return new VE(t.seconds,t.nanos)}class mS{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class gS{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new gS("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof gS&&e.projectId===this.projectId&&e.database===this.database}}const yS={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},vS={nullValue:"NULL_VALUE"};function _S(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?dS(e)?4:DS(e)?9007199254740991:10:bE()}function wS(e,t){if(e===t)return!0;const n=_S(e);if(n!==_S(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return pS(e).isEqual(pS(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=cS(e.timestampValue),r=cS(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return hS(e.bytesValue).isEqual(hS(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return uS(e.geoPointValue.latitude)===uS(t.geoPointValue.latitude)&&uS(e.geoPointValue.longitude)===uS(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return uS(e.integerValue)===uS(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=uS(e.doubleValue),r=uS(t.doubleValue);return n===r?_I(n)===_I(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return UE(e.arrayValue.values||[],t.arrayValue.values||[],wS);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if($I(n)!==$I(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!wS(n[i],r[i])))return!1;return!0}(e,t);default:return bE()}}function bS(e,t){return void 0!==(e.values||[]).find((e=>wS(e,t)))}function ES(e,t){if(e===t)return 0;const n=_S(e),r=_S(t);if(n!==r)return FE(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return FE(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=uS(e.integerValue||e.doubleValue),r=uS(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return IS(e.timestampValue,t.timestampValue);case 4:return IS(pS(e),pS(t));case 5:return FE(e.stringValue,t.stringValue);case 6:return function(e,t){const n=hS(e),r=hS(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=FE(n[i],r[i]);if(0!==e)return e}return FE(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=FE(uS(e.latitude),uS(t.latitude));return 0!==n?n:FE(uS(e.longitude),uS(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=ES(n[i],r[i]);if(e)return e}return FE(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===yS.mapValue&&t===yS.mapValue)return 0;if(e===yS.mapValue)return 1;if(t===yS.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=FE(r[o],s[o]);if(0!==e)return e;const t=ES(n[r[o]],i[s[o]]);if(0!==t)return t}return FE(r.length,s.length)}(e.mapValue,t.mapValue);default:throw bE()}}function IS(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return FE(e,t);const n=cS(e),r=cS(t),i=FE(n.seconds,r.seconds);return 0!==i?i:FE(n.nanos,r.nanos)}function SS(e){return TS(e)}function TS(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=cS(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return hS(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return KE.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=TS(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(TS(e.fields[i]));return n+"}"}(e.mapValue):bE()}function kS(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function CS(e){return!!e&&"integerValue"in e}function xS(e){return!!e&&"arrayValue"in e}function NS(e){return!!e&&"nullValue"in e}function AS(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function RS(e){return!!e&&"mapValue"in e}function PS(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return JI(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=PS(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=PS(e.arrayValue.values[n]);return t}return Object.assign({},e)}function DS(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function OS(e){return"nullValue"in e?vS:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?kS(gS.empty(),KE.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:bE()}function LS(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?kS(gS.empty(),KE.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?yS:bE()}function MS(e,t){const n=ES(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function FS(e,t){const n=ES(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class US{constructor(e){this.value=e}static empty(){return new US({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!RS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=PS(t)}setAll(e){let t=HE.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=PS(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());RS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wS(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];RS(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){JI(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new US(PS(this.value))}}function jS(e){const t=[];return JI(e.fields,((e,n)=>{const r=new HE([e]);if(RS(n)){const e=jS(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new sS(t)}class VS{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new VS(e,0,qE.min(),qE.min(),qE.min(),US.empty(),0)}static newFoundDocument(e,t,n,r){return new VS(e,1,t,qE.min(),n,r,0)}static newNoDocument(e,t){return new VS(e,2,t,qE.min(),qE.min(),US.empty(),0)}static newUnknownDocument(e,t){return new VS(e,3,t,qE.min(),qE.min(),US.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qE.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=US.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=US.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qE.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof VS&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new VS(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class qS{constructor(e,t){this.position=e,this.inclusive=t}}function zS(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?KE.comparator(KE.fromName(o.referenceValue),n.key):ES(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function BS(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!wS(e.position[n],t.position[n]))return!1;return!0}class WS{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function HS(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class KS{}class GS extends KS{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new rT(e,t,n):"array-contains"===t?new aT(e,n):"in"===t?new lT(e,n):"not-in"===t?new cT(e,n):"array-contains-any"===t?new uT(e,n):new GS(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new iT(e,n):new sT(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ES(t,this.value)):null!==t&&_S(this.value)===_S(t)&&this.matchesComparison(ES(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return bE()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class QS extends KS{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new QS(e,t)}matches(e){return YS(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function YS(e){return"and"===e.op}function $S(e){return"or"===e.op}function JS(e){return XS(e)&&YS(e)}function XS(e){for(const t of e.filters)if(t instanceof QS)return!1;return!0}function ZS(e){if(e instanceof GS)return e.field.canonicalString()+e.op.toString()+SS(e.value);if(JS(e))return e.filters.map((e=>ZS(e))).join(",");{const t=e.filters.map((e=>ZS(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function eT(e,t){return e instanceof GS?function(e,t){return t instanceof GS&&e.op===t.op&&e.field.isEqual(t.field)&&wS(e.value,t.value)}(e,t):e instanceof QS?function(e,t){return t instanceof QS&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&eT(n,t.filters[r])),!0)}(e,t):void bE()}function tT(e,t){const n=e.filters.concat(t);return QS.create(n,e.op)}function nT(e){return e instanceof GS?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(SS(e.value))}(e):e instanceof QS?function(e){return e.op.toString()+" {"+e.getFilters().map(nT).join(" ,")+"}"}(e):"Filter"}class rT extends GS{constructor(e,t,n){super(e,t,n),this.key=KE.fromName(n.referenceValue)}matches(e){const t=KE.comparator(e.key,this.key);return this.matchesComparison(t)}}class iT extends GS{constructor(e,t){super(e,"in",t),this.keys=oT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class sT extends GS{constructor(e,t){super(e,"not-in",t),this.keys=oT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function oT(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>KE.fromName(e.referenceValue)))}class aT extends GS{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xS(t)&&bS(t.arrayValue,this.value)}}class lT extends GS{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&bS(this.value.arrayValue,t)}}class cT extends GS{constructor(e,t){super(e,"not-in",t)}matches(e){if(bS(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!bS(this.value.arrayValue,t)}}class uT extends GS{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xS(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>bS(this.value.arrayValue,e)))}}class hT{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function dT(e){return new hT(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function fT(e){const t=IE(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ZS(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),vI(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>SS(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>SS(e))).join(",")),t.ce=e}return t.ce}function pT(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!HS(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!eT(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!BS(e.startAt,t.startAt)&&BS(e.endAt,t.endAt)}function mT(e){return KE.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function gT(e,t){return e.filters.filter((e=>e instanceof GS&&e.field.isEqual(t)))}function yT(e,t,n){let r=vS,i=!0;for(const s of gT(e,t)){let e=vS,t=!0;switch(s.op){case"<":case"<=":e=OS(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=vS}MS({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];MS({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function vT(e,t,n){let r=yS,i=!0;for(const s of gT(e,t)){let e=yS,t=!0;switch(s.op){case">=":case">":e=LS(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=yS}FS({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];FS({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class _T{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function wT(e,t,n,r,i,s,o,a){return new _T(e,t,n,r,i,s,o,a)}function bT(e){return new _T(e)}function ET(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function IT(e){return null!==e.collectionGroup}function ST(e){const t=IE(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new nS(HE.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new WS(r,n))})),e.has(HE.keyField().canonicalString())||t.le.push(new WS(HE.keyField(),n))}return t.le}function TT(e){const t=IE(e);return t.he||(t.he=kT(t,ST(e))),t.he}function kT(e,t){if("F"===e.limitType)return dT(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new WS(e.field,t)}));const n=e.endAt?new qS(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new qS(e.startAt.position,e.startAt.inclusive):null;return dT(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function CT(e,t){const n=e.filters.concat([t]);return new _T(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function xT(e,t,n){return new _T(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function NT(e,t){return pT(TT(e),TT(t))&&e.limitType===t.limitType}function AT(e){return"".concat(fT(TT(e)),"|lt:").concat(e.limitType)}function RT(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>nT(e))).join(", "),"]")),vI(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>SS(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>SS(e))).join(",")),"Target(".concat(t,")")}(TT(e)),"; limitType=").concat(e.limitType,")")}function PT(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):KE.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of ST(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=zS(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ST(e),t))&&!(e.endAt&&!function(e,t,n){const r=zS(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ST(e),t))}(e,t)}function DT(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function OT(e){return(t,n)=>{let r=!1;for(const i of ST(e)){const e=LT(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function LT(e,t,n){const r=e.field.isKeyField()?KE.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ES(r,i):bE()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return bE()}}class MT{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){JI(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return XI(this.inner)}size(){return this.innerSize}}const FT=new ZI(KE.comparator);function UT(){return FT}const jT=new ZI(KE.comparator);function VT(){let e=jT;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function qT(e){let t=jT;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function zT(){return WT()}function BT(){return WT()}function WT(){return new MT((e=>e.toString()),((e,t)=>e.isEqual(t)))}const HT=new ZI(KE.comparator),KT=new nS(KE.comparator);function GT(){let e=KT;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const QT=new nS(FE);function YT(){return QT}function $T(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_I(t)?"-0":t}}function JT(e){return{integerValue:""+e}}function XT(e,t){return wI(t)?JT(t):$T(e,t)}class ZT{constructor(){this._=void 0}}function ek(e,t,n){return e instanceof rk?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&dS(t)&&(t=fS(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ik?sk(e,t):e instanceof ok?ak(e,t):function(e,t){const n=nk(e,t),r=ck(n)+ck(e.Ie);return CS(n)&&CS(e.Ie)?JT(r):$T(e.serializer,r)}(e,t)}function tk(e,t,n){return e instanceof ik?sk(e,t):e instanceof ok?ak(e,t):n}function nk(e,t){return e instanceof lk?function(e){return CS(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class rk extends ZT{}class ik extends ZT{constructor(e){super(),this.elements=e}}function sk(e,t){const n=uk(t);for(const r of e.elements)n.some((e=>wS(e,r)))||n.push(r);return{arrayValue:{values:n}}}class ok extends ZT{constructor(e){super(),this.elements=e}}function ak(e,t){let n=uk(t);for(const r of e.elements)n=n.filter((e=>!wS(e,r)));return{arrayValue:{values:n}}}class lk extends ZT{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function ck(e){return uS(e.integerValue||e.doubleValue)}function uk(e){return xS(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class hk{constructor(e,t){this.field=e,this.transform=t}}class dk{constructor(e,t){this.version=e,this.transformResults=t}}class fk{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fk}static exists(e){return new fk(void 0,e)}static updateTime(e){return new fk(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pk(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class mk{}function gk(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new kk(e.key,fk.none()):new bk(e.key,e.data,fk.none());{const n=e.data,r=US.empty();let i=new nS(HE.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Ek(e.key,r,new sS(i.toArray()),fk.none())}}function yk(e,t,n){e instanceof bk?function(e,t,n){const r=e.value.clone(),i=Sk(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ek?function(e,t,n){if(!pk(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Sk(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ik(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function vk(e,t,n,r){return e instanceof bk?function(e,t,n,r){if(!pk(e.precondition,t))return n;const i=e.value.clone(),s=Tk(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ek?function(e,t,n,r){if(!pk(e.precondition,t))return n;const i=Tk(e.fieldTransforms,r,t),s=t.data;return s.setAll(Ik(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return pk(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function _k(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=nk(r.transform,e||null);null!=i&&(null===n&&(n=US.empty()),n.set(r.field,i))}return n||null}function wk(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&UE(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ik&&t instanceof ik||e instanceof ok&&t instanceof ok?UE(e.elements,t.elements,wS):e instanceof lk&&t instanceof lk?wS(e.Ie,t.Ie):e instanceof rk&&t instanceof rk}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class bk extends mk{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ek extends mk{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ik(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Sk(e,t,n){const r=new Map;EE(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,tk(o,a,n[i]))}return r}function Tk(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,ek(e,s,t))}return r}class kk extends mk{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ck extends mk{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class xk{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&yk(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=vk(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=vk(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=BT();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=gk(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(qE.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),GT())}isEqual(e){return this.batchId===e.batchId&&UE(this.mutations,e.mutations,((e,t)=>wk(e,t)))&&UE(this.baseMutations,e.baseMutations,((e,t)=>wk(e,t)))}}class Nk{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){EE(e.mutations.length===n.length);let r=HT;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Nk(e,t,n,r)}}class Ak{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Rk{constructor(e,t){this.count=e,this.unchangedNames=t}}var Pk,Dk;function Ok(e){switch(e){default:return bE();case SE.CANCELLED:case SE.UNKNOWN:case SE.DEADLINE_EXCEEDED:case SE.RESOURCE_EXHAUSTED:case SE.INTERNAL:case SE.UNAVAILABLE:case SE.UNAUTHENTICATED:return!1;case SE.INVALID_ARGUMENT:case SE.NOT_FOUND:case SE.ALREADY_EXISTS:case SE.PERMISSION_DENIED:case SE.FAILED_PRECONDITION:case SE.ABORTED:case SE.OUT_OF_RANGE:case SE.UNIMPLEMENTED:case SE.DATA_LOSS:return!0}}function Lk(e){if(void 0===e)return vE("GRPC error has no .code"),SE.UNKNOWN;switch(e){case Pk.OK:return SE.OK;case Pk.CANCELLED:return SE.CANCELLED;case Pk.UNKNOWN:return SE.UNKNOWN;case Pk.DEADLINE_EXCEEDED:return SE.DEADLINE_EXCEEDED;case Pk.RESOURCE_EXHAUSTED:return SE.RESOURCE_EXHAUSTED;case Pk.INTERNAL:return SE.INTERNAL;case Pk.UNAVAILABLE:return SE.UNAVAILABLE;case Pk.UNAUTHENTICATED:return SE.UNAUTHENTICATED;case Pk.INVALID_ARGUMENT:return SE.INVALID_ARGUMENT;case Pk.NOT_FOUND:return SE.NOT_FOUND;case Pk.ALREADY_EXISTS:return SE.ALREADY_EXISTS;case Pk.PERMISSION_DENIED:return SE.PERMISSION_DENIED;case Pk.FAILED_PRECONDITION:return SE.FAILED_PRECONDITION;case Pk.ABORTED:return SE.ABORTED;case Pk.OUT_OF_RANGE:return SE.OUT_OF_RANGE;case Pk.UNIMPLEMENTED:return SE.UNIMPLEMENTED;case Pk.DATA_LOSS:return SE.DATA_LOSS;default:return bE()}}(Dk=Pk||(Pk={}))[Dk.OK=0]="OK",Dk[Dk.CANCELLED=1]="CANCELLED",Dk[Dk.UNKNOWN=2]="UNKNOWN",Dk[Dk.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dk[Dk.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dk[Dk.NOT_FOUND=5]="NOT_FOUND",Dk[Dk.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dk[Dk.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dk[Dk.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dk[Dk.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dk[Dk.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dk[Dk.ABORTED=10]="ABORTED",Dk[Dk.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dk[Dk.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dk[Dk.INTERNAL=13]="INTERNAL",Dk[Dk.UNAVAILABLE=14]="UNAVAILABLE",Dk[Dk.DATA_LOSS=15]="DATA_LOSS";let Mk=null;function Fk(){return new TextEncoder}const Uk=new hE([4294967295,4294967295],0);function jk(e){const t=Fk().encode(e),n=new uE;return n.update(t),new Uint8Array(n.digest())}function Vk(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new hE([n,r],0),new hE([i,s],0)]}class qk{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new zk("Invalid padding: ".concat(t));if(n<0)throw new zk("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new zk("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new zk("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=hE.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(hE.fromNumber(n)));return 1===r.compare(Uk)&&(r=new hE([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=jk(e),[n,r]=Vk(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new qk(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=jk(e),[n,r]=Vk(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class zk extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Bk{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Wk.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Bk(qE.min(),r,new ZI(FE),UT(),GT())}}class Wk{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Wk(n,t,GT(),GT(),GT())}}class Hk{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class Kk{constructor(e,t){this.targetId=e,this.fe=t}}class Gk{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:aS.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Qk{constructor(){this.ge=0,this.pe=Jk(),this.ye=aS.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=GT(),t=GT(),n=GT();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:bE()}})),new Wk(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=Jk()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,EE(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Yk{constructor(e){this.Le=e,this.ke=new Map,this.qe=UT(),this.Qe=$k(),this.Ke=new ZI(FE)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:bE()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(mT(i))if(0===n){const e=new KE(i.path);this.We(t,e,VS.newNoDocument(e,qE.min()))}else EE(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Mk||Mk.tt(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=hS(n).toUint8Array()}catch(e){if(e instanceof oS)return _E("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new qk(s,r,i)}catch(e){return _E(e instanceof zk?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&mT(i.target)){const t=new KE(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,VS.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=GT();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Bk(e,t,this.Ke,this.qe,n);return this.qe=UT(),this.Qe=$k(),this.Ke=new ZI(FE),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Qk,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new nS(FE),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||yE("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Qk),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function $k(){return new ZI(KE.comparator)}function Jk(){return new ZI(KE.comparator)}const Xk={asc:"ASCENDING",desc:"DESCENDING"},Zk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eC={and:"AND",or:"OR"};class tC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nC(e,t){return e.useProto3Json||vI(t)?t:{value:t}}function rC(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function iC(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function sC(e,t){return rC(e,t.toTimestamp())}function oC(e){return EE(!!e),qE.fromTimestamp(function(e){const t=cS(e);return new VE(t.seconds,t.nanos)}(e))}function aC(e,t){return function(e){return new BE(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function lC(e){const t=BE.fromString(e);return EE(AC(t)),t}function cC(e,t){return aC(e.databaseId,t.path)}function uC(e,t){const n=lC(t);if(n.get(1)!==e.databaseId.projectId)throw new TE(SE.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new TE(SE.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new KE(pC(n))}function hC(e,t){return aC(e.databaseId,t)}function dC(e){const t=lC(e);return 4===t.length?BE.emptyPath():pC(t)}function fC(e){return new BE(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function pC(e){return EE(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function mC(e,t,n){return{name:cC(e,t),fields:n.value.mapValue.fields}}function gC(e,t,n){const r=uC(e,t.name),i=oC(t.updateTime),s=t.createTime?oC(t.createTime):qE.min(),o=new US({mapValue:{fields:t.fields}}),a=VS.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function yC(e,t){let n;if(t instanceof bk)n={update:mC(e,t.key,t.value)};else if(t instanceof kk)n={delete:cC(e,t.key)};else if(t instanceof Ek)n={update:mC(e,t.key,t.data),updateMask:NC(t.fieldMask)};else{if(!(t instanceof Ck))return bE();n={verify:cC(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof rk)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ik)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ok)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof lk)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw bE()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:sC(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:bE()}(e,t.precondition)),n}function vC(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?fk.updateTime(oC(e.updateTime)):void 0!==e.exists?fk.exists(e.exists):fk.none()}(t.currentDocument):fk.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)EE("REQUEST_TIME"===t.setToServerValue),n=new rk;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new ik(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new ok(e)}else"increment"in t?n=new lk(e,t.increment):bE();const r=HE.fromServerFormat(t.fieldPath);return new hk(r,n)}(e,t))):[];if(t.update){t.update.name;const i=uC(e,t.update.name),s=new US({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new sS(t.map((e=>HE.fromServerFormat(e))))}(t.updateMask);return new Ek(i,s,e,n,r)}return new bk(i,s,n,r)}if(t.delete){const r=uC(e,t.delete);return new kk(r,n)}if(t.verify){const r=uC(e,t.verify);return new Ck(r,n)}return bE()}function _C(e,t){return{documents:[hC(e,t.path)]}}function wC(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=hC(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=hC(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return xC(QS.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:kC(e.field),direction:IC(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=nC(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function bC(e){let t=dC(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){EE(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=EC(e);return t instanceof QS&&JS(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new WS(CC(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,vI(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new qS(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new qS(n,t)}(n.endAt)),wT(t,i,o,s,a,"F",l,c)}function EC(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=CC(e.unaryFilter.field);return GS.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=CC(e.unaryFilter.field);return GS.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=CC(e.unaryFilter.field);return GS.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=CC(e.unaryFilter.field);return GS.create(i,"!=",{nullValue:"NULL_VALUE"});default:return bE()}}(e):void 0!==e.fieldFilter?function(e){return GS.create(CC(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return bE()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return QS.create(e.compositeFilter.filters.map((e=>EC(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return bE()}}(e.compositeFilter.op))}(e):bE()}function IC(e){return Xk[e]}function SC(e){return Zk[e]}function TC(e){return eC[e]}function kC(e){return{fieldPath:e.canonicalString()}}function CC(e){return HE.fromServerFormat(e.fieldPath)}function xC(e){return e instanceof GS?function(e){if("=="===e.op){if(AS(e.value))return{unaryFilter:{field:kC(e.field),op:"IS_NAN"}};if(NS(e.value))return{unaryFilter:{field:kC(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(AS(e.value))return{unaryFilter:{field:kC(e.field),op:"IS_NOT_NAN"}};if(NS(e.value))return{unaryFilter:{field:kC(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kC(e.field),op:SC(e.op),value:e.value}}}(e):e instanceof QS?function(e){const t=e.getFilters().map((e=>xC(e)));return 1===t.length?t[0]:{compositeFilter:{op:TC(e.op),filters:t}}}(e):bE()}function NC(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function AC(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class RC{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:qE.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:qE.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:aS.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new RC(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new RC(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new RC(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new RC(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class PC{constructor(e){this.ut=e}}function DC(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:OC(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:cC(e,t.key),fields:t.data.value.mapValue.fields,updateTime:rC(e,t.version.toTimestamp()),createTime:rC(e,t.createTime.toTimestamp())}}(e.ut,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:LC(t.version)};else{if(!t.isUnknownDocument())return bE();r.unknownDocument={path:n.path.toArray(),version:LC(t.version)}}return r}function OC(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function LC(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function MC(e){const t=new VE(e.seconds,e.nanoseconds);return qE.fromTimestamp(t)}function FC(e,t){const n=(t.baseMutations||[]).map((t=>vC(e.ut,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>vC(e.ut,t))),i=VE.fromMillis(t.localWriteTimeMs);return new xk(t.batchId,i,n,r)}function UC(e){const t=MC(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?MC(e.lastLimboFreeSnapshotVersion):qE.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return EE(1===e.documents.length),TT(bT(dC(e.documents[0])))}(e.query):function(e){return TT(bC(e))}(e.query),new RC(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,aS.fromBase64String(e.resumeToken))}function jC(e,t){const n=LC(t.snapshotVersion),r=LC(t.lastLimboFreeSnapshotVersion);let i;i=mT(t.target)?_C(e.ut,t.target):wC(e.ut,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:fT(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function VC(e){const t=bC({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?xT(t,t.limit,"L"):t}function qC(e,t){return new Ak(t.largestBatchId,vC(e.ut,t.overlayMutation))}function zC(e,t){const n=t.path.lastSegment();return[e,bI(t.path.popLast()),n]}function BC(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:LC(r.readTime),documentKey:bI(r.documentKey.path),largestBatchId:r.largestBatchId}}class WC{getBundleMetadata(e,t){return HC(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:MC(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return HC(e).put(function(e){return{bundleId:e.id,createTime:LC(oC(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return KC(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:VC(e.bundledQuery),readTime:MC(e.readTime)}}(e)}))}saveNamedQuery(e,t){return KC(e).put(function(e){return{name:e.name,readTime:LC(oC(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function HC(e){return YI(e,"bundles")}function KC(e){return YI(e,"namedQueries")}class GC{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){const n=t.uid||"";return new GC(e,n)}getOverlay(e,t){return QC(e).get(zC(this.userId,t)).next((e=>e?qC(this.serializer,e):null))}getOverlays(e,t){const n=zT();return sI.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Ak(t,i);r.push(this.lt(e,s))})),sI.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(bI(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(QC(e).H("collectionPathOverlayIndex",r))})),sI.waitFor(i)}getOverlaysForCollection(e,t,n){const r=zT(),i=bI(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return QC(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=qC(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=zT();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return QC(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=qC(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}lt(e,t){return QC(e).put(function(e,t,n){const[r,i,s]=zC(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:yC(e.ut,n.mutation)}}(this.serializer,this.userId,t))}}function QC(e){return YI(e,"documentOverlays")}class YC{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(uS(e.integerValue));else if("doubleValue"in e){const n=uS(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),_I(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Tt(t,20),"string"==typeof n?t.dt(n):(t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(hS(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?DS(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):bE()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),KE.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function $C(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function JC(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=$C(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}YC.St=new YC;class XC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Dt(n.value),n=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Dt(e);else if(e<2048)this.Dt(960|e>>>6),this.Dt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e);else{const e=t.codePointAt(0);this.Dt(240|e>>>18),this.Dt(128|63&e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e)}}this.Ct()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Nt(e){const t=this.Bt(e),n=JC(t);this.Lt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Bt(e),n=JC(t);this.Lt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class ZC{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class ex{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class tx{constructor(){this.Wt=new XC,this.Gt=new ZC(this.Wt),this.zt=new ex(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class nx{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new nx(this.indexId,this.documentKey,this.arrayValue,n)}}function rx(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=ix(e.arrayValue,t.arrayValue),0!==n?n:(n=ix(e.directionalValue,t.directionalValue),0!==n?n:KE.comparator(e.documentKey,t.documentKey)))}function ix(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class sx{constructor(e){this.Jt=new nS(((e,t)=>HE.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Jt=this.Jt.add(e):this.Zt.push(e)}}get Xt(){return this.Jt.size>1}en(e){if(EE(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=QE(e);if(void 0!==t&&!this.tn(t))return!1;const n=YE(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Jt.size>0){const e=this.Jt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.nn(e,t)||!this.rn(this.Yt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Yt.length||!this.rn(this.Yt[s++],e))return!1}return!0}sn(){if(this.Xt)return null;let e=new nS(HE.comparator);const t=[];for(const n of this.Zt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new $E(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new $E(n.field,0))}for(const n of this.Yt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new $E(n.field,"asc"===n.dir?0:1)));return new GE(GE.UNKNOWN_ID,this.collectionId,t,JE.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function ox(e){var t,n;if(EE(e instanceof GS||e instanceof QS),e instanceof GS){if(e instanceof lT){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>GS.create(e.field,"==",t))))||[];return QS.create(r,"or")}return e}const r=e.filters.map((e=>ox(e)));return QS.create(r,e.op)}function ax(e){if(0===e.getFilters().length)return[];const t=hx(ox(e));return EE(ux(t)),lx(t)||cx(t)?[t]:t.getFilters()}function lx(e){return e instanceof GS}function cx(e){return e instanceof QS&&JS(e)}function ux(e){return lx(e)||cx(e)||function(e){if(e instanceof QS&&$S(e)){for(const t of e.getFilters())if(!lx(t)&&!cx(t))return!1;return!0}return!1}(e)}function hx(e){if(EE(e instanceof GS||e instanceof QS),e instanceof GS)return e;if(1===e.filters.length)return hx(e.filters[0]);const t=e.filters.map((e=>hx(e)));let n=QS.create(t,e.op);return n=px(n),ux(n)?n:(EE(n instanceof QS),EE(YS(n)),EE(n.filters.length>1),n.filters.reduce(((e,t)=>dx(e,t))))}function dx(e,t){let n;return EE(e instanceof GS||e instanceof QS),EE(t instanceof GS||t instanceof QS),n=e instanceof GS?t instanceof GS?function(e,t){return QS.create([e,t],"and")}(e,t):fx(e,t):t instanceof GS?fx(t,e):function(e,t){if(EE(e.filters.length>0&&t.filters.length>0),YS(e)&&YS(t))return tT(e,t.getFilters());const n=$S(e)?e:t,r=$S(e)?t:e,i=n.filters.map((e=>dx(e,r)));return QS.create(i,"or")}(e,t),px(n)}function fx(e,t){if(YS(t))return tT(t,e.getFilters());{const n=t.filters.map((t=>dx(e,t)));return QS.create(n,"or")}}function px(e){if(EE(e instanceof GS||e instanceof QS),e instanceof GS)return e;const t=e.getFilters();if(1===t.length)return px(t[0]);if(XS(e))return e;const n=t.map((e=>px(e))),r=[];return n.forEach((t=>{t instanceof GS?r.push(t):t instanceof QS&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:QS.create(r,e.op)}class mx{constructor(){this.on=new gx}addToCollectionParentIndex(e,t){return this.on.add(t),sI.resolve()}getCollectionParents(e,t){return sI.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return sI.resolve()}deleteFieldIndex(e,t){return sI.resolve()}deleteAllFieldIndexes(e){return sI.resolve()}createTargetIndexes(e,t){return sI.resolve()}getDocumentsMatchingTarget(e,t){return sI.resolve(null)}getIndexType(e,t){return sI.resolve(0)}getFieldIndexes(e,t){return sI.resolve([])}getNextCollectionGroupToUpdate(e){return sI.resolve(null)}getMinOffset(e,t){return sI.resolve(eI.min())}getMinOffsetFromCollectionGroup(e,t){return sI.resolve(eI.min())}updateCollectionGroup(e,t,n){return sI.resolve()}updateIndexEntries(e,t){return sI.resolve()}}class gx{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new nS(BE.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new nS(BE.comparator)).toArray()}}const yx=new Uint8Array(0);class vx{constructor(e,t){this.user=e,this.databaseId=t,this._n=new gx,this.an=new MT((e=>fT(e)),((e,t)=>pT(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this._n.add(t)}));const i={collectionId:n,parent:bI(r)};return _x(e).put(i)}return sI.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[jE(t),""],!1,!0);return _x(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(SI(r.parent))}return n}))}addFieldIndex(e,t){const n=bx(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Ex(e);return i.next((e=>{n.put(BC(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=bx(e),r=Ex(e),i=wx(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=bx(e),n=wx(e),r=Ex(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return sI.forEach(this.un(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new sx(t).sn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=wx(e);let r=!0;const i=new Map;return sI.forEach(this.un(t),(t=>this.cn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=GT();const r=[];return sI.forEach(i,((i,s)=>{yE("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(fT(t)));const o=function(e,t){const n=QE(t);if(void 0===n)return null;for(const r of gT(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of YE(t))for(const t of gT(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of YE(t)){const t=0===i.kind?yT(e,i.fieldPath,e.startAt):vT(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new qS(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of YE(t)){const t=0===i.kind?vT(e,i.fieldPath,e.endAt):yT(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new qS(n,r)}(s,i),u=this.ln(i,s,l),h=this.ln(i,s,c),d=this.hn(i,s,a),f=this.Pn(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return sI.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=KE.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return sI.resolve(null)}))}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:ax(QS.create(e.filters,"and")).map((t=>dT(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.an.set(e,t),t)}Pn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.In(t[u/l]):yx,h=this.Tn(e,a,n[u%l],r),d=this.En(e,a,i[u%l],s),f=o.map((t=>this.Tn(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}Tn(e,t,n,r){const i=new nx(e,KE.empty(),t,n);return r?i:i.Ht()}En(e,t,n,r){const i=new nx(e,KE.empty(),t,n);return r?i.Ht():i}cn(e,t){const n=new sx(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.en(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.un(t);return sI.forEach(r,(t=>this.cn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new nS(HE.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}dn(e,t){const n=new tx;for(const r of YE(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.jt(r.kind);YC.St.ht(e,i)}return n.Ut()}In(e){const t=new tx;return YC.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const n=new tx;return YC.St.ht(kS(this.databaseId,t),n.jt(function(e){const t=YE(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ut()}hn(e,t,n){if(null===n)return[];let r=[];r.push(new tx);let i=0;for(const s of YE(e)){const e=n[i++];for(const n of r)if(this.Rn(t,s.fieldPath)&&xS(e))r=this.Vn(r,s,e);else{const t=n.jt(s.kind);YC.St.ht(e,t)}}return this.mn(r)}ln(e,t,n){return this.hn(e,t,n.position)}mn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ut();return t}Vn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new tx;n.seed(e.Ut()),YC.St.ht(s,n.jt(t.kind)),i.push(n)}return i}Rn(e,t){return!!e.filters.find((e=>e instanceof GS&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=bx(e),r=Ex(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return sI.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new JE(t.sequenceNumber,new eI(MC(t.readTime),new KE(SI(t.documentKey)),t.largestBatchId)):JE.empty(),r=e.fields.map((e=>{let[t,n]=e;return new $E(HE.fromServerFormat(t),n)}));return new GE(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:FE(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=bx(e),i=Ex(e);return this.fn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>sI.forEach(t,(t=>i.put(BC(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return sI.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?sI.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),sI.forEach(i,(n=>this.gn(e,t,n).next((t=>{const i=this.pn(r,n);return t.isEqual(i)?sI.resolve():this.yn(e,r,n,t,i)})))))))}))}wn(e,t,n,r){return wx(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(n,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,n,r){return wx(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(n,t.key),t.key.path.toArray()])}gn(e,t,n){const r=wx(e);let i=new nS(rx);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.An(n,t)])},((e,r)=>{i=i.add(new nx(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}pn(e,t){let n=new nS(rx);const r=this.dn(t,e);if(null==r)return n;const i=QE(t);if(null!=i){const s=e.data.field(i.fieldPath);if(xS(s))for(const i of s.arrayValue.values||[])n=n.add(new nx(t.indexId,e.key,this.In(i),r))}else n=n.add(new nx(t.indexId,e.key,yx,r));return n}yn(e,t,n,r,i){yE("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=iS(s),l=iS(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=iS(o)):t?(i(a),a=iS(s)):(a=iS(s),l=iS(o))}}(r,i,rx,(r=>{s.push(this.wn(e,t,n,r))}),(r=>{s.push(this.Sn(e,t,n,r))})),sI.waitFor(s)}fn(e){let t=1;return Ex(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>rx(e,t))).filter(((e,t,n)=>!t||0!==rx(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=rx(s,e),i=rx(s,t);if(0===n)r[0]=e.Ht();else if(n>0&&i<0)r.push(s),r.push(s.Ht());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,yx,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,yx,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return rx(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ix)}getMinOffset(e,t){return sI.mapArray(this.un(t),(t=>this.cn(e,t).next((e=>e||bE())))).next(Ix)}}function _x(e){return YI(e,"collectionParents")}function wx(e){return YI(e,"indexEntries")}function bx(e){return YI(e,"indexConfiguration")}function Ex(e){return YI(e,"indexState")}function Ix(e){EE(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;tI(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new eI(t.readTime,t.documentKey,n)}const Sx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Tx{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Tx(e,Tx.DEFAULT_COLLECTION_PERCENTILE,Tx.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function kx(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{EE(1===a)})));const c=[];for(const u of n.mutations){const e=CI(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return sI.waitFor(s).next((()=>c))}function Cx(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw bE();t=e.noDocument}return JSON.stringify(t).length}Tx.DEFAULT_COLLECTION_PERCENTILE=10,Tx.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tx.DEFAULT=new Tx(41943040,Tx.DEFAULT_COLLECTION_PERCENTILE,Tx.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tx.DISABLED=new Tx(-1,0,0);class xx{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Dn={}}static ct(e,t,n,r){EE(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new xx(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ax(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Rx(e),s=Ax(e);return s.add({}).next((o=>{EE("number"==typeof o);const a=new xk(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>yC(e.ut,t))),i=n.mutations.map((t=>yC(e.ut,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new nS(((e,t)=>FE(e.canonicalString(),t.canonicalString())));for(const e of r){const t=CI(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,xI))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Dn[o]=a.keys()})),sI.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return Ax(e).get(t).next((e=>e?(EE(e.userId===this.userId),FC(this.serializer,e)):null))}Cn(e,t){return this.Dn[t]?sI.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Dn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Ax(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(EE(t.batchId>=n),i=FC(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Ax(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ax(e).W("userMutationsIndex",t).next((e=>e.map((e=>FC(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=kI(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Rx(e).Y({range:r},((n,r,s)=>{const[o,a,l]=n,c=SI(a);if(o===this.userId&&t.path.isEqual(c))return Ax(e).get(l).next((e=>{if(!e)throw bE();EE(e.userId===this.userId),i.push(FC(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new nS(FE);const r=[];return t.forEach((t=>{const i=kI(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Rx(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,l=SI(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),sI.waitFor(r).next((()=>this.vn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=kI(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new nS(FE);return Rx(e).Y({range:s},((e,t,i)=>{const[s,a,l]=e,c=SI(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.vn(e,o)))}vn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Ax(e).get(t).next((e=>{if(null===e)throw bE();EE(e.userId===this.userId),n.push(FC(this.serializer,e))})))})),sI.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return kx(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Fn(t.batchId)})),sI.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return sI.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Rx(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=SI(e[1]);r.push(t)}else n.done()})).next((()=>{EE(0===r.length)}))}))}containsKey(e,t){return Nx(e,this.userId,t)}Mn(e){return Px(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Nx(e,t,n){const r=kI(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Rx(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Ax(e){return YI(e,"mutations")}function Rx(e){return YI(e,"documentMutations")}function Px(e){return YI(e,"mutationQueues")}class Dx{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Dx(0)}static Nn(){return new Dx(-1)}}class Ox{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new Dx(t.highestTargetId);return t.highestTargetId=n.next(),this.Ln(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>qE.fromTimestamp(new VE(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r))))}addTargetData(e,t){return this.kn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.qn(t,n),this.Ln(e,n))))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Lx(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(EE(t.targetCount>0),t.targetCount-=1,this.Ln(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Lx(e).Y(((s,o)=>{const a=UC(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>sI.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Lx(e).Y(((e,n)=>{const r=UC(n);t(r)}))}Bn(e){return Mx(e).get("targetGlobalKey").next((e=>(EE(null!==e),e)))}Ln(e,t){return Mx(e).put("targetGlobalKey",t)}kn(e,t){return Lx(e).put(jC(this.serializer,t))}qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=fT(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Lx(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=UC(n);pT(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Fx(e);return t.forEach((t=>{const s=bI(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),sI.waitFor(r)}removeMatchingKeys(e,t,n){const r=Fx(e);return sI.forEach(t,(t=>{const i=bI(t.path);return sI.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Fx(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Fx(e);let i=GT();return r.Y({range:n,J:!0},((e,t,n)=>{const r=SI(e[1]),s=new KE(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=bI(t.path),r=IDBKeyRange.bound([n],[jE(n)],!1,!0);let i=0;return Fx(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return Lx(e).get(t).next((e=>e?UC(e):null))}}function Lx(e){return YI(e,"targets")}function Mx(e){return YI(e,"targetGlobal")}function Fx(e){return YI(e,"targetDocuments")}function Ux(e,t){let[n,r]=e,[i,s]=t;const o=FE(n,i);return 0===o?FE(r,s):o}class jx{constructor(e){this.Qn=e,this.buffer=new nS(Ux),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Ux(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Vx{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){yE("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){uI(e)?yE("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await iI(e)}await this.Gn(3e5)}))}}class qx{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return sI.resolve(yI._e);const n=new jx(t);return this.zn.forEachTarget(e,(e=>n.Un(e.sequenceNumber))).next((()=>this.zn.Hn(e,(e=>n.Un(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(yE("LruGarbageCollector","Garbage collection skipped; disabled"),sI.resolve(Sx)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(yE("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Sx):this.Jn(e,t)))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(yE("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),gE()<=ts.DEBUG&&yE("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),sI.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function zx(e,t){return new qx(e,t)}class Bx{constructor(e,t){this.db=e,this.garbageCollector=zx(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Yn(e){let t=0;return this.Hn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,((e,n)=>t(n)))}addReference(e,t,n){return Wx(e,n)}removeReference(e,t,n){return Wx(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Wx(e,t)}Xn(e,t){return function(e,t){let n=!1;return Px(e).Z((r=>Nx(e,r,t).next((e=>(e&&(n=!0),sI.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Zn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,qE.min()),Fx(e).delete(function(e){return[0,bI(e.path)]}(s)))))}));r.push(t)}})).next((()=>sI.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Wx(e,t)}Zn(e,t){const n=Fx(e);let r,i=yI._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==yI._e&&t(new KE(SI(r)),i),i=l,r=a):i=yI._e})).next((()=>{i!==yI._e&&t(new KE(SI(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wx(e,t){return Fx(e).put(function(e,t){return{targetId:0,path:bI(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Hx{constructor(){this.changes=new MT((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,VS.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?sI.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Kx{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return $x(e).put(n)}removeEntry(e,t,n){return $x(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],OC(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.er(e,n))))}getEntry(e,t){let n=VS.newInvalidDocument(t);return $x(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Jx(t))},((e,r)=>{n=this.tr(t,r)})).next((()=>n))}nr(e,t){let n={size:0,document:VS.newInvalidDocument(t)};return $x(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Jx(t))},((e,r)=>{n={document:this.tr(t,r),size:Cx(r)}})).next((()=>n))}getEntries(e,t){let n=UT();return this.rr(e,t,((e,t)=>{const r=this.tr(e,t);n=n.insert(e,r)})).next((()=>n))}ir(e,t){let n=UT(),r=new ZI(KE.comparator);return this.rr(e,t,((e,t)=>{const i=this.tr(e,t);n=n.insert(e,i),r=r.insert(e,Cx(t))})).next((()=>({documents:n,sr:r})))}rr(e,t,n){if(t.isEmpty())return sI.resolve();let r=new nS(Zx);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Jx(r.first()),Jx(r.last())),s=r.getIterator();let o=s.getNext();return $x(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=KE.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Zx(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(Jx(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),OC(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $x(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=UT();for(const i of e){const e=this.tr(KE.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(PT(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=UT();const s=Xx(t,n),o=Xx(t,eI.max());return $x(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.tr(KE.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Qx(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Yx(e).get("remoteDocumentGlobalKey").next((e=>(EE(!!e),e)))}er(e,t){return Yx(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=gC(e.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=KE.fromSegments(t.noDocument.path),r=MC(t.noDocument.readTime);n=VS.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return bE();{const e=KE.fromSegments(t.unknownDocument.path),r=MC(t.unknownDocument.version);n=VS.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new VE(e[0],e[1]);return qE.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(qE.min()))return e}return VS.newInvalidDocument(e)}}function Gx(e){return new Kx(e)}class Qx extends Hx{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new MT((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new nS(((e,t)=>FE(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ar.get(i);if(t.push(this._r.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=DC(this._r.serializer,s);r=r.add(i.path.popLast());const l=Cx(a);n+=l-o.size,t.push(this._r.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=DC(this._r.serializer,s.convertToNoDocument(qE.min()));t.push(this._r.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,n))})),t.push(this._r.updateMetadata(e,n)),sI.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next((e=>(this.ar.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this._r.ir(e,t).next((e=>{let{documents:t,sr:n}=e;return n.forEach(((e,n)=>{this.ar.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Yx(e){return YI(e,"remoteDocumentGlobal")}function $x(e){return YI(e,"remoteDocumentsV14")}function Jx(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Xx(e,t){const n=t.documentKey.path.toArray();return[e,OC(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Zx(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=FE(n[s],r[s]),i)return i;return i=FE(n.length,r.length),i||(i=FE(n[n.length-2],r[r.length-2]),i||FE(n[n.length-1],r[r.length-1]))}class eN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class tN{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&vk(n.mutation,e,sS.empty(),VE.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,GT()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:GT();const r=zT();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=VT();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=zT();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,GT())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=UT();const s=WT(),o=WT();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Ek)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),vk(o.mutation,t,o.mutation.getFieldMask(),VE.now())):s.set(t.key,sS.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new eN(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=WT();let r=new ZI(((e,t)=>e-t)),i=GT();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||sS.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||GT()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=BT();l.forEach((e=>{if(!i.has(e)){const r=gk(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return sI.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return KE.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):IT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):sI.resolve(zT());let o=-1,a=i;return s.next((t=>sI.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?sI.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,GT()))).next((e=>({batchId:o,changes:qT(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new KE(t)).next((e=>{let t=VT();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=VT();return this.indexManager.getCollectionParents(e,i).next((o=>sI.forEach(o,(o=>{const a=function(e,t){return new _T(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,VS.newInvalidDocument(r)))}));let n=VT();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&vk(s.mutation,r,sS.empty(),VE.now()),PT(t,r)&&(n=n.insert(e,r))})),n}))}}class nN{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return sI.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:oC(e.createTime)}}(t)),sI.resolve()}getNamedQuery(e,t){return sI.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:VC(e.bundledQuery),readTime:oC(e.readTime)}}(t)),sI.resolve()}}class rN{constructor(){this.overlays=new ZI(KE.comparator),this.lr=new Map}getOverlay(e,t){return sI.resolve(this.overlays.get(t))}getOverlays(e,t){const n=zT();return sI.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),sI.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),sI.resolve()}getOverlaysForCollection(e,t,n){const r=zT(),i=t.length+1,s=new KE(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return sI.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ZI(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=zT(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=zT(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return sI.resolve(o)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ak(t,n));let i=this.lr.get(t);void 0===i&&(i=GT(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class iN{constructor(){this.hr=new nS(sN.Pr),this.Ir=new nS(sN.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new sN(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new sN(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new KE(new BE([])),n=new sN(t,e),r=new sN(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new KE(new BE([])),n=new sN(t,e),r=new sN(t,e+1);let i=GT();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new sN(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class sN{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return KE.comparator(e.key,t.key)||FE(e.gr,t.gr)}static Tr(e,t){return FE(e.gr,t.gr)||KE.comparator(e.key,t.key)}}class oN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new nS(sN.Pr)}checkEmpty(e){return sI.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new xk(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.yr=this.yr.add(new sN(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return sI.resolve(s)}lookupMutationBatch(e,t){return sI.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return sI.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return sI.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return sI.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new sN(t,0),r=new sN(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),sI.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new nS(FE);return t.forEach((e=>{const t=new sN(e,0),r=new sN(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),sI.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;KE.isDocumentKey(i)||(i=i.child(""));const s=new sN(new KE(i),0);let o=new nS(FE);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)}),s),sI.resolve(this.br(o))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){EE(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return sI.forEach(t.mutations,(r=>{const i=new sN(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new sN(t,0),r=this.yr.firstAfterOrEqual(n);return sI.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,sI.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class aN{constructor(e){this.Cr=e,this.docs=new ZI(KE.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return sI.resolve(n?n.document.mutableCopy():VS.newInvalidDocument(t))}getEntries(e,t){let n=UT();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():VS.newInvalidDocument(e))})),sI.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=UT();const s=t.path,o=new KE(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||tI(ZE(o),n)<=0||(r.has(o.key)||PT(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return sI.resolve(i)}getAllFromCollectionGroup(e,t,n,r){bE()}vr(e,t){return sI.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new lN(this)}getSize(e){return sI.resolve(this.size)}}class lN extends Hx{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),sI.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class cN{constructor(e){this.persistence=e,this.Fr=new MT((e=>fT(e)),pT),this.lastRemoteSnapshotVersion=qE.min(),this.highestTargetId=0,this.Mr=0,this.Or=new iN,this.targetCount=0,this.Nr=Dx.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),sI.resolve()}getLastRemoteSnapshotVersion(e){return sI.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return sI.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),sI.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),sI.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new Dx(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,sI.resolve()}updateTargetData(e,t){return this.kn(t),sI.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,sI.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Fr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),sI.waitFor(i).next((()=>r))}getTargetCount(e){return sI.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return sI.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),sI.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),sI.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),sI.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return sI.resolve(n)}containsKey(e,t){return sI.resolve(this.Or.containsKey(t))}}class uN{constructor(e,t){this.Br={},this.overlays={},this.Lr=new yI(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new cN(this),this.indexManager=new mx,this.remoteDocumentCache=function(e){return new aN(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new PC(t),this.Kr=new nN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new oN(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){yE("MemoryPersistence","Starting transaction:",e);const r=new hN(this.Lr.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return sI.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class hN extends rI{constructor(e){super(),this.currentSequenceNumber=e}}class dN{constructor(e){this.persistence=e,this.Gr=new iN,this.zr=null}static jr(e){return new dN(e)}get Hr(){if(this.zr)return this.zr;throw bE()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),sI.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),sI.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),sI.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return sI.forEach(this.Hr,(n=>{const r=KE.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,qE.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return sI.or([()=>sI.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class fN{constructor(e){this.serializer=e}N(e,t,n,r){const i=new oI("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",TI,{unique:!0}),e.createObjectStore("documentMutations")}(e),pN(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=sI.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),pN(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qE.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",TI,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return sI.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Zr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(i))))),n<7&&r>=7&&(s=s.next((()=>this.ei(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ni(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:VI});t.createIndex("collectionPathOverlayIndex",qI,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",zI,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:NI});t.createIndex("documentKeyIndex",AI),t.createIndex("collectionGroupIndex",RI)}(e))).next((()=>this.ri(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.ii(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:MI}).createIndex("sequenceNumberIndex",FI,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:UI}).createIndex("documentKeyIndex",jI,{unique:!1})}(e)))),s}Xr(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=Cx(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Zr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>sI.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>sI.forEach(n,(n=>{EE(n.userId===t.userId);const r=FC(this.serializer,n);return kx(e,t.userId,r).next((()=>{}))}))))}))))}ei(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new BE(n),o=function(e){return[0,bI(e)]}(s);r.push(t.get(o).next((n=>n?sI.resolve():(n=>t.put({targetId:0,path:bI(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>sI.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:LI});const n=t.store("collectionParents"),r=new gx,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:bI(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new BE(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=SI(r);return i(o.popLast())}))))}ni(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=UC(n),i=jC(this.serializer,r);return t.put(i)}))}ri(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new KE(BE.fromString(e.document.name).popFirst(5)):e.noDocument?KE.fromSegments(e.noDocument.path):e.unknownDocument?KE.fromSegments(e.unknownDocument.path):bE()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>sI.waitFor(r)))}ii(e,t){const n=t.store("mutations"),r=Gx(this.serializer),i=new uN(dN.jr,this.serializer.ut);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:GT();FC(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),sI.forEach(n,((e,n)=>{const s=new fE(n),o=GC.ct(this.serializer,s),a=i.getIndexManager(s),l=xx.ct(s,this.serializer,a,i.referenceDelegate);return new tN(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new QI(t,yI._e),e).next()}))}))}}function pN(e){e.createObjectStore("targetDocuments",{keyPath:DI}).createIndex("documentTargetsIndex",OI,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",PI,{unique:!0}),e.createObjectStore("targetGlobal")}const mN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class gN{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.si=i,this.window=s,this.document=o,this.oi=l,this._i=c,this.ai=u,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=e=>Promise.resolve(),!gN.D())throw new TE(SE.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Bx(this,r),this.Ii=t+"main",this.serializer=new PC(a),this.Ti=new aI(this.Ii,this.ai,new fN(this.serializer)),this.qr=new Ox(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Gx(this.serializer),this.Kr=new WC,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===c&&vE("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new TE(SE.FAILED_PRECONDITION,mN);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.qr.getHighestSequenceNumber(e)))})).then((e=>{this.Lr=new yI(e,this.oi)})).then((()=>{this.kr=!0})).catch((e=>(this.Ti&&this.Ti.close(),Promise.reject(e))))}mi(e){return this.Pi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((async()=>{this.started&&await this.di()})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>vN(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))))}))})).next((()=>this.gi(e))).next((t=>this.isPrimary&&!t?this.pi(e).next((()=>!1)):!!t&&this.yi(e).next((()=>!0)))))).catch((e=>{if(uI(e))return yE("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return yE("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.si.enqueueRetryable((()=>this.Pi(e))),this.isPrimary=e}))}fi(e){return yN(e).get("owner").next((e=>sI.resolve(this.wi(e))))}Si(e){return vN(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=YI(e,"clientMetadata");return t.W().next((e=>{const n=this.Ci(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return sI.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ei)for(const t of e)this.Ei.removeItem(this.vi(t.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.di().then((()=>this.bi())).then((()=>this.Vi()))))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?sI.resolve(!0):yN(e).get("owner").next((t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new TE(SE.FAILED_PRECONDITION,mN);return!1}}return!(!this.networkEnabled||!this.inForeground)||vN(e).W().next((e=>void 0===this.Ci(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&yE("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new QI(e,yI._e);return this.pi(t).next((()=>this.Si(t)))})),this.Ti.close(),this.Ni()}Ci(e,t){return e.filter((e=>this.Di(e.updateTimeMs,t)&&!this.Fi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>vN(e).W().next((e=>this.Ci(e,18e5).map((e=>e.clientId))))))}get started(){return this.kr}getMutationQueue(e,t){return xx.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new vx(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return GC.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,n){yE("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?GI:14===e?KI:13===e?HI:12===e?WI:11===e?BI:void bE()}(this.ai);let s;return this.Ti.runTransaction(e,r,i,(r=>(s=new QI(r,this.Lr?this.Lr.next():yI._e),"readwrite-primary"===t?this.fi(s).next((e=>!!e||this.gi(s))).next((t=>{if(!t)throw vE("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))),new TE(SE.FAILED_PRECONDITION,nI);return n(s)})).next((e=>this.yi(s).next((()=>e)))):this.Li(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Li(e){return yN(e).get("owner").next((e=>{if(null!==e&&this.Di(e.leaseTimestampMs,5e3)&&!this.Fi(e.ownerId)&&!this.wi(e)&&!(this._i||this.allowTabSynchronization&&e.allowTabSynchronization))throw new TE(SE.FAILED_PRECONDITION,mN)}))}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yN(e).put("owner",t)}static D(){return aI.D()}pi(e){const t=yN(e);return t.get("owner").next((e=>this.wi(e)?(yE("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):sI.resolve()))}Di(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(vE("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.di())))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const e=/(?:Version|Mobile)\/1[456]/;!_i()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const n=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return yE("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return vE("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){vE("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch(e){}}vi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function yN(e){return YI(e,"owner")}function vN(e){return YI(e,"clientMetadata")}function _N(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class wN{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=GT(),r=GT();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new wN(e,t.fromCache,n,r)}}class bN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class EN{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new bN;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(gE()<=ts.DEBUG&&yE("QueryEngine","SDK will not create cache indexes for query:",RT(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),sI.resolve()):(gE()<=ts.DEBUG&&yE("QueryEngine","Query:",RT(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(gE()<=ts.DEBUG&&yE("QueryEngine","The SDK decides to create cache indexes for query:",RT(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,TT(t))):sI.resolve())}zi(e,t){if(ET(t))return sI.resolve(null);let n=TT(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=xT(t,null,"F"),n=TT(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=GT(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Yi(t,r);return this.Zi(t,s,i,n.readTime)?this.zi(e,xT(t,null,"F")):this.Xi(e,s,t,n)}))))})))))}ji(e,t,n,r){return ET(t)||r.isEqual(qE.min())?sI.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const s=this.Yi(t,i);return this.Zi(t,s,n,r)?sI.resolve(null):(gE()<=ts.DEBUG&&yE("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),RT(t)),this.Xi(e,s,t,XE(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new nS(OT(e));return t.forEach(((t,r)=>{PT(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return gE()<=ts.DEBUG&&yE("QueryEngine","Using full collection scan to execute query:",RT(t)),this.Gi.getDocumentsMatchingQuery(e,t,eI.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class IN{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new ZI(FE),this.ns=new MT((e=>fT(e)),pT),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tN(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function SN(e,t,n,r){return new IN(e,t,n,r)}async function TN(e,t){const n=IE(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=GT();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function kN(e){const t=IE(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function CN(e,t,n){let r=GT(),i=GT();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=UT();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(qE.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):yE("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{us:r,cs:i}}))}function xN(e,t){const n=IE(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function NN(e,t){const n=IE(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,sI.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new RC(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function AN(e,t,n){const r=IE(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!uI(e))throw e;yE("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function RN(e,t,n){const r=IE(e);let i=qE.min(),s=GT();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=IE(e),i=r.ns.get(n);return void 0!==i?sI.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,TT(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:qE.min(),n?s:GT()))).next((e=>(ON(r,DT(t),e),{documents:e,ls:s})))))}function PN(e,t){const n=IE(e),r=IE(n.qr),i=n.ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function DN(e,t){const n=IE(e),r=n.rs.get(t)||qE.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ss.getAllFromCollectionGroup(e,t,XE(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(ON(n,t,e),e)))}function ON(e,t,n){let r=e.rs.get(t)||qE.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}async function LN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:GT();const r=await NN(e,TT(VC(t.bundledQuery))),i=IE(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=oC(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kr.saveNamedQuery(e,t);const o=r.withResumeToken(aS.EMPTY_BYTE_STRING,s);return i.ts=i.ts.insert(o.targetId,o),i.qr.updateTargetData(e,o).next((()=>i.qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.Kr.saveNamedQuery(e,t)))}))}function MN(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function FN(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function UN(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class jN{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ts(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new TE(r.error.code,r.error.message))),s?new jN(e,t,r.state,i):(vE("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class VN{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ts(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new TE(n.error.code,n.error.message))),i?new VN(e,n.state,r):(vE("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qN{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=YT();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=wI(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new qN(e,i):(vE("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class zN{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zN(t.clientId,t.onlineState):(vE("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class BN{constructor(){this.activeTargetIds=YT()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WN{constructor(e,t,n,r,i){this.window=e,this.si=t,this.persistenceKey=n,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new ZI(FE),this.started=!1,this.ps=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ys=MN(this.persistenceKey,this.Rs),this.ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new BN),this.Ss=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.bs=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ds=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.Cs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.vs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Rs)continue;const e=this.getItem(MN(this.persistenceKey,n));if(e){const t=qN.Ts(n,e);t&&(this.gs=this.gs.insert(t.clientId,t))}}this.Fs();const t=this.storage.getItem(this.Cs);if(t){const e=this.Ms(t);e&&this.xs(e)}for(const n of this.ps)this.fs(n);this.ps=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,n){this.Ns(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(UN(this.persistenceKey,e));if(n){const r=VN.Ts(e,n);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(UN(this.persistenceKey,e))}updateQueryState(e,t,n){this.ks(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return yE("SharedClientState","READ",e,t),t}setItem(e,t){yE("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){yE("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const t=e;if(t.storageArea===this.storage){if(yE("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ys)return void vE("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ss.test(t.key)){if(null==t.newValue){const e=this.Ks(t.key);return this.$s(e,null)}{const e=this.Us(t.key,t.newValue);if(e)return this.$s(e.clientId,e)}}else if(this.bs.test(t.key)){if(null!==t.newValue){const e=this.Ws(t.key,t.newValue);if(e)return this.Gs(e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.zs(t.key,t.newValue);if(e)return this.js(e)}}else if(t.key===this.Cs){if(null!==t.newValue){const e=this.Ms(t.newValue);if(e)return this.xs(e)}}else if(t.key===this.ws){const e=function(e){let t=yI._e;if(null!=e)try{const n=JSON.parse(e);EE("number"==typeof n),t=n}catch(e){vE("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==yI._e&&this.sequenceNumberHandler(e)}else if(t.key===this.vs){const e=this.Hs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Js(e))))}}else this.ps.push(t)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,n){const r=new jN(this.currentUser,e,t,n),i=FN(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Es())}Bs(e){const t=FN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){const t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}ks(e,t,n){const r=UN(this.persistenceKey,e),i=new VN(e,t,n);this.setItem(r,i.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const n=this.Ks(e);return qN.Ts(n,t)}Ws(e,t){const n=this.bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return jN.Ts(new fE(i),r,t)}zs(e,t){const n=this.Ds.exec(e),r=Number(n[1]);return VN.Ts(r,t)}Ms(e){return zN.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);yE("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const n=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),i=this.Os(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Xs(s,o).then((()=>{this.gs=n}))}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=YT();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class HN{constructor(){this.eo=new BN,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new BN,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class KN{ro(e){}shutdown(){}}class GN{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){yE("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){yE("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let QN=null;function YN(){return null===QN?QN=268435456+Math.round(2147483648*Math.random()):QN++,"0x"+QN.toString(16)}const $N={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JN{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const XN="WebChannelConnection";class ZN extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.mo=t+"://"+e.host,this.fo="projects/".concat(n,"/databases/").concat(r),this.po="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get yo(){return!1}wo(e,t,n,r,i){const s=YN(),o=this.So(e,t);yE("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(a,r,i),this.Do(e,o,a,n).then((t=>(yE("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw _E("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}Co(e,t,n,r,i,s){return this.wo(e,t,n,r,i)}bo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+pE,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=$N[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,n,r){const i=YN();return new Promise(((s,o)=>{const a=new cE;a.setWithCredentials(!0),a.listenOnce(sE.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case iE.NO_ERROR:const t=a.getResponseJson();yE(XN,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case iE.TIMEOUT:yE(XN,"RPC '".concat(e,"' ").concat(i," timed out")),o(new TE(SE.DEADLINE_EXCEEDED,"Request time out"));break;case iE.HTTP_ERROR:const n=a.getStatus();if(yE(XN,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(SE).indexOf(t)>=0?t:SE.UNKNOWN}(t.status);o(new TE(e,t.message))}else o(new TE(SE.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new TE(SE.UNAVAILABLE,"Connection failed."));break;default:bE()}}finally{yE(XN,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);yE(XN,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}vo(e,t,n){const r=YN(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=nE(),o=rE(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.bo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");yE(XN,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new JN({co:t=>{d?yE(XN,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(yE(XN,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),yE(XN,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},lo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,lE.EventType.OPEN,(()=>{d||yE(XN,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,lE.EventType.CLOSE,(()=>{d||(d=!0,yE(XN,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Ro())})),p(u,lE.EventType.ERROR,(t=>{d||(d=!0,_E(XN,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Ro(new TE(SE.UNAVAILABLE,"The operation could not be completed")))})),p(u,lE.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];EE(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){yE(XN,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Pk[e];if(void 0!==t)return Lk(t)}(t),i=o.message;void 0===n&&(n=SE.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Ro(new TE(n,i)),u.close()}else yE(XN,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.Vo(i)}})),p(o,oE.STAT_EVENT,(t=>{t.stat===aE.PROXY?yE(XN,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===aE.NOPROXY&&yE(XN,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ao()}),0),f}}function eA(){return"undefined"!=typeof window?window:null}function tA(){return"undefined"!=typeof document?document:null}function nA(e){return new tC(e,!0)}class rA{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Fo=n,this.Mo=r,this.xo=i,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&yE("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Oo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.No=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class iA{constructor(e,t,n,r,i,s,o,a){this.si=e,this.Ko=n,this.$o=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new rA(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,t){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==e?this.zo.reset():t&&t.code===SE.RESOURCE_EXHAUSTED?(vE(t.toString()),vE("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===SE.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(t)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Uo===t&&this.s_(n,r)}),(t=>{e((()=>{const e=new TE(SE.UNKNOWN,"Fetching auth token failed: "+t.message);return this.o_(e)}))}))}s_(e,t){const n=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((e=>{n((()=>this.o_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(e){return yE("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget((()=>this.Uo===e?t():(yE("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sA extends iA{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:bE()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(EE(void 0===t||"string"==typeof t),aS.fromBase64String(t||"")):(EE(void 0===t||t instanceof Uint8Array),aS.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?SE.UNKNOWN:Lk(e.code);return new TE(t,e.message||"")}(o);n=new Gk(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=uC(e,r.document.name),s=oC(r.document.updateTime),o=r.document.createTime?oC(r.document.createTime):qE.min(),a=new US({mapValue:{fields:r.document.fields}}),l=VS.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Hk(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=uC(e,r.document),s=r.readTime?oC(r.readTime):qE.min(),o=VS.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Hk([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=uC(e,r.document),s=r.removedTargetIds||[];n=new Hk([],s,i,null)}else{if(!("filter"in t))return bE();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Rk(r,i),o=e.targetId;n=new Kk(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return qE.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?qE.min():t.readTime?oC(t.readTime):qE.min()}(e);return this.listener.a_(t,n)}u_(e){const t={};t.database=fC(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=mT(r)?{documents:_C(e,r)}:{query:wC(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=iC(e,t.resumeToken);const r=nC(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(qE.min())>0){n.readTime=rC(e,t.snapshotVersion.toTimestamp());const r=nC(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return bE()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.e_(t)}c_(e){const t={};t.database=fC(this.serializer),t.removeTarget=e,this.e_(t)}}class oA extends iA{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(EE(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function(e,t){return e&&e.length>0?(EE(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?oC(e.updateTime):oC(t);return n.isEqual(qE.min())&&(n=oC(t)),new dk(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=oC(e.commitTime);return this.listener.I_(n,t)}return EE(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=fC(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>yC(this.serializer,e)))};this.e_(t)}}class aA extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new TE(SE.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,s]=r;return this.connection.wo(e,t,n,i,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===SE.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new TE(SE.UNKNOWN,e.toString())}))}Co(e,t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Co(e,t,n,s,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===SE.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new TE(SE.UNKNOWN,e.toString())}))}terminate(){this.d_=!0}}class lA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.f_?(vE(t),this.f_=!1):yE("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class cA{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=i,this.F_.ro((e=>{n.enqueueAndForget((async()=>{vA(this)&&(yE("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=IE(e);t.C_.add(4),await hA(t),t.M_.set("Unknown"),t.C_.delete(4),await uA(t)}(this))}))})),this.M_=new lA(n,r)}}async function uA(e){if(vA(e))for(const t of e.v_)await t(!0)}async function hA(e){for(const t of e.v_)await t(!1)}function dA(e,t){const n=IE(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),yA(n)?gA(n):MA(n).Ho()&&pA(n,t))}function fA(e,t){const n=IE(e),r=MA(n);n.D_.delete(t),r.Ho()&&mA(n,t),0===n.D_.size&&(r.Ho()?r.Zo():vA(n)&&n.M_.set("Unknown"))}function pA(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(qE.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}MA(e).u_(t)}function mA(e,t){e.x_.Oe(t),MA(e).c_(t)}function gA(e){e.x_=new Yk({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),MA(e).start(),e.M_.g_()}function yA(e){return vA(e)&&!MA(e).jo()&&e.D_.size>0}function vA(e){return 0===IE(e).C_.size}function _A(e){e.x_=void 0}async function wA(e){e.D_.forEach(((t,n)=>{pA(e,t)}))}async function bA(e,t){_A(e),yA(e)?(e.M_.w_(t),gA(e)):e.M_.set("Unknown")}async function EA(e,t,n){if(e.M_.set("Online"),t instanceof Gk&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.D_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.D_.delete(r),e.x_.removeTarget(r))}(e,t)}catch(n){yE("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await IA(e,n)}else if(t instanceof Hk?e.x_.$e(t):t instanceof Kk?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(qE.min()))try{const t=await kN(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.x_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.D_.get(r);i&&e.D_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.D_.get(t);if(!r)return;e.D_.set(t,r.withResumeToken(aS.EMPTY_BYTE_STRING,r.snapshotVersion)),mA(e,t);const i=new RC(r.target,t,n,r.sequenceNumber);pA(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){yE("RemoteStore","Failed to raise snapshot:",t),await IA(e,t)}}async function IA(e,t,n){if(!uI(t))throw t;e.C_.add(1),await hA(e),e.M_.set("Offline"),n||(n=()=>kN(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{yE("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await uA(e)}))}function SA(e,t){return t().catch((n=>IA(e,n,t)))}async function TA(e){const t=IE(e),n=FA(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;kA(t);)try{const e=await xN(t.localStore,r);if(null===e){0===t.b_.length&&n.Zo();break}r=e.batchId,CA(t,e)}catch(e){await IA(t,e)}xA(t)&&NA(t)}function kA(e){return vA(e)&&e.b_.length<10}function CA(e,t){e.b_.push(t);const n=FA(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function xA(e){return vA(e)&&!FA(e).jo()&&e.b_.length>0}function NA(e){FA(e).start()}async function AA(e){FA(e).E_()}async function RA(e){const t=FA(e);for(const n of e.b_)t.P_(n.mutations)}async function PA(e,t,n){const r=e.b_.shift(),i=Nk.from(r,t,n);await SA(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await TA(e)}async function DA(e,t){t&&FA(e).h_&&await async function(e,t){if(function(e){return Ok(e)&&e!==SE.ABORTED}(t.code)){const n=e.b_.shift();FA(e).Yo(),await SA(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await TA(e)}}(e,t),xA(e)&&NA(e)}async function OA(e,t){const n=IE(e);n.asyncQueue.verifyOperationInProgress(),yE("RemoteStore","RemoteStore received new credentials");const r=vA(n);n.C_.add(3),await hA(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await uA(n)}async function LA(e,t){const n=IE(e);t?(n.C_.delete(2),await uA(n)):t||(n.C_.add(2),await hA(n),n.M_.set("Unknown"))}function MA(e){return e.O_||(e.O_=function(e,t,n){const r=IE(e);return r.A_(),new sA(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:wA.bind(null,e),Io:bA.bind(null,e),a_:EA.bind(null,e)}),e.v_.push((async t=>{t?(e.O_.Yo(),yA(e)?gA(e):e.M_.set("Unknown")):(await e.O_.stop(),_A(e))}))),e.O_}function FA(e){return e.N_||(e.N_=function(e,t,n){const r=IE(e);return r.A_(),new oA(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:AA.bind(null,e),Io:DA.bind(null,e),T_:RA.bind(null,e),I_:PA.bind(null,e)}),e.v_.push((async t=>{t?(e.N_.Yo(),await TA(e)):(await e.N_.stop(),e.b_.length>0&&(yE("RemoteStore","Stopping write stream with ".concat(e.b_.length," pending writes")),e.b_=[]))}))),e.N_}class UA{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new kE,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new UA(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new TE(SE.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jA(e,t){if(vE("AsyncQueue","".concat(t,": ").concat(e)),uI(e))return new TE(SE.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class VA{constructor(e){this.comparator=e?(t,n)=>e(t,n)||KE.comparator(t.key,n.key):(e,t)=>KE.comparator(e.key,t.key),this.keyedMap=VT(),this.sortedSet=new ZI(this.comparator)}static emptySet(e){return new VA(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof VA))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new VA;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class qA{constructor(){this.B_=new ZI(KE.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):bE():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class zA{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new zA(e,t,VA.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&NT(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class BA{constructor(){this.k_=void 0,this.listeners=[]}}class WA{constructor(){this.queries=new MT((e=>AT(e)),NT),this.onlineState="Unknown",this.q_=new Set}}async function HA(e,t){const n=IE(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new BA),i)try{s.k_=await n.onListen(r)}catch(e){const n=jA(e,"Initialization of query '".concat(RT(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Q_(n.onlineState),s.k_&&t.K_(s.k_)&&YA(n)}async function KA(e,t){const n=IE(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function GA(e,t){const n=IE(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.K_(i)&&(r=!0);t.k_=i}}r&&YA(n)}function QA(e,t,n){const r=IE(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function YA(e){e.q_.forEach((e=>{e.next()}))}class $A{constructor(e,t,n){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new zA(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){if(e.docChanges.length>0)return!0;const t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}H_(e){e=zA.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class JA{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class XA{constructor(e){this.serializer=e}hs(e){return uC(this.serializer,e)}Ps(e){return e.metadata.exists?gC(this.serializer,e.document,!1):VS.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return oC(e)}}class ZA{constructor(e,t,n){this.X_=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=eR(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const n=BE.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,n=new XA(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.hs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||GT()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=IE(e);let s=GT(),o=UT();for(const c of n){const e=t.hs(c.metadata.name);c.document&&(s=s.add(e));const n=t.Ps(c);n.setReadTime(t.Is(c.metadata.readTime)),o=o.insert(e,n)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),l=await NN(i,function(e){return TT(bT(BE.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>CN(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.us,t.cs))).next((()=>t.us))))))}(this.localStore,new XA(this.serializer),this.documents,this.X_.id),t=this.ta(this.documents);for(const n of this.queries)await LN(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}}}function eR(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class tR{constructor(e){this.key=e}}class nR{constructor(e){this.key=e}}class rR{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=GT(),this.mutatedKeys=GT(),this._a=OT(e),this.aa=new VA(this._a)}get ua(){return this.ia}ca(e,t){const n=t?t.la:new qA,r=t?t.aa:this.aa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=PT(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ha(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this._a(u,a)>0||l&&this._a(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{aa:s,la:n,Zi:o,mutatedKeys:i}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bE()}};return n(e)-n(t)}(e.type,t.type)||this._a(e.doc,t.doc))),this.Pa(n),r=null!=r&&r;const o=t&&!r?this.Ia():[],a=0===this.oa.size&&this.current&&!r?1:0,l=a!==this.sa;return this.sa=a,0!==s.length||l?{snapshot:new zA(this.query,e.aa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new qA,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach((e=>this.ia=this.ia.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ia=this.ia.delete(e))),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=GT(),this.aa.forEach((e=>{this.Ea(e.key)&&(this.oa=this.oa.add(e.key))}));const t=[];return e.forEach((e=>{this.oa.has(e)||t.push(new nR(e))})),this.oa.forEach((n=>{e.has(n)||t.push(new tR(n))})),t}da(e){this.ia=e.ls,this.oa=GT();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return zA.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class iR{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class sR{constructor(e){this.key=e,this.Ra=!1}}class oR{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new MT((e=>AT(e)),NT),this.fa=new Map,this.ga=new Set,this.pa=new ZI(KE.comparator),this.ya=new Map,this.wa=new iN,this.Sa={},this.ba=new Map,this.Da=Dx.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function aR(e,t){const n=DR(e);let r,i;const s=n.ma.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const e=await NN(n.localStore,TT(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await lR(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&dA(n.remoteStore,e)}return i}async function lR(e,t,n,r,i){e.va=(t,n,r)=>async function(e,t,n,r){let i=t.view.ca(n);i.Zi&&(i=await RN(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ca(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return _R(e,t.targetId,a.Ta),a.snapshot}(e,t,n,r);const s=await RN(e.localStore,t,!0),o=new rR(t,s.ls),a=o.ca(s.documents),l=Wk.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);_R(e,n,c.Ta);const u=new iR(t,n,o);return e.ma.set(t,u),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),c.snapshot}async function cR(e,t){const n=IE(e),r=n.ma.get(t),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter((e=>!NT(e,t)))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await AN(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),fA(n.remoteStore,r.targetId),yR(n,r.targetId)})).catch(iI)):(yR(n,r.targetId),await AN(n.localStore,r.targetId,!0))}async function uR(e,t){const n=IE(e);try{const e=await function(e,t){const n=IE(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(aS.EMPTY_BYTE_STRING,qE.min()).withLastLimboFreeSnapshotVersion(qE.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.qr.updateTargetData(e,c))}));let a=UT(),l=GT();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(CN(e,s,t.documentUpdates).next((e=>{a=e.us,l=e.cs}))),!r.isEqual(qE.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return sI.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.ya.get(t);r&&(EE(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ra=!0:e.modifiedDocuments.size>0?EE(r.Ra):e.removedDocuments.size>0&&(EE(r.Ra),r.Ra=!1))})),await ER(n,e,t)}catch(e){await iI(e)}}function hR(e,t,n){const r=IE(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ma.forEach(((n,r)=>{const i=r.view.Q_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=IE(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Q_(t)&&(r=!0)})),r&&YA(n)}(r.eventManager,t),e.length&&r.Va.a_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function dR(e,t,n){const r=IE(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ya.get(t),s=i&&i.key;if(s){let e=new ZI(KE.comparator);e=e.insert(s,VS.newNoDocument(s,qE.min()));const n=GT().add(s),i=new Bk(qE.min(),new Map,new ZI(FE),e,n);await uR(r,i),r.pa=r.pa.remove(s),r.ya.delete(t),bR(r)}else await AN(r.localStore,t,!1).then((()=>yR(r,t,n))).catch(iI)}async function fR(e,t){const n=IE(e),r=t.batch.batchId;try{const e=await function(e,t){const n=IE(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=sI.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);EE(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=GT();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);gR(n,r,null),mR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ER(n,e)}catch(e){await iI(e)}}async function pR(e,t,n){const r=IE(e);try{const e=await function(e,t){const n=IE(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(EE(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);gR(r,t,n),mR(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ER(r,e)}catch(n){await iI(n)}}function mR(e,t){(e.ba.get(t)||[]).forEach((e=>{e.resolve()})),e.ba.delete(t)}function gR(e,t,n){const r=IE(e);let i=r.Sa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function yR(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((t=>{e.wa.containsKey(t)||vR(e,t)}))}function vR(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);null!==n&&(fA(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),bR(e))}function _R(e,t,n){for(const r of n)r instanceof tR?(e.wa.addReference(r.key,t),wR(e,r)):r instanceof nR?(yE("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||vR(e,r.key)):bE()}function wR(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(yE("SyncEngine","New document in limbo: "+n),e.ga.add(r),bR(e))}function bR(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new KE(BE.fromString(t)),r=e.Da.next();e.ya.set(r,new sR(n)),e.pa=e.pa.insert(n,r),dA(e.remoteStore,new RC(TT(bT(n.path)),r,"TargetPurposeLimboResolution",yI._e))}}async function ER(e,t,n){const r=IE(e),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach(((e,a)=>{o.push(r.va(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=wN.Qi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Va.a_(i),await async function(e,t){const n=IE(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>sI.forEach(t,(t=>sI.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>sI.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!uI(e))throw e;yE("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,s))}async function IR(e,t){const n=IE(e);if(!n.currentUser.isEqual(t)){yE("SyncEngine","User change. New user:",t.toKey());const e=await TN(n.localStore,t);n.currentUser=t,function(e,t){e.ba.forEach((e=>{e.forEach((e=>{e.reject(new TE(SE.CANCELLED,t))}))})),e.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ER(n,e._s)}}function SR(e,t){const n=IE(e),r=n.ya.get(t);if(r&&r.Ra)return GT().add(r.key);{let e=GT();const r=n.fa.get(t);if(!r)return e;for(const t of r){const r=n.ma.get(t);e=e.unionWith(r.view.ua)}return e}}async function TR(e,t){const n=IE(e),r=await RN(n.localStore,t.query,!0),i=t.view.da(r);return n.isPrimaryClient&&_R(n,t.targetId,i.Ta),i}async function kR(e,t){const n=IE(e);return DN(n.localStore,t).then((e=>ER(n,e)))}async function CR(e,t,n,r){const i=IE(e),s=await function(e,t){const n=IE(e),r=IE(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Cn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):sI.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await TA(i.remoteStore):"acknowledged"===n||"rejected"===n?(gR(i,t,r||null),mR(i,t),function(e,t){IE(IE(e).mutationQueue).Fn(t)}(i.localStore,t)):bE(),await ER(i,s)):yE("SyncEngine","Cannot apply mutation batch with id: "+t)}async function xR(e,t,n){const r=IE(e),i=[],s=[];for(const o of t){let e;const t=r.fa.get(o);if(t&&0!==t.length){e=await NN(r.localStore,TT(t[0]));for(const e of t){const t=r.ma.get(e),n=await TR(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await PN(r.localStore,o);e=await NN(r.localStore,t),await lR(r,NR(t),o,!1,e.resumeToken)}i.push(e)}return r.Va.a_(s),i}function NR(e){return wT(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function AR(e){return function(e){return IE(IE(e).persistence).Bi()}(IE(e).localStore)}async function RR(e,t,n,r){const i=IE(e);if(i.Ca)return void yE("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await DN(i.localStore,DT(s[0])),r=Bk.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,aS.EMPTY_BYTE_STRING);await ER(i,e,r);break}case"rejected":await AN(i.localStore,t,!0),yR(i,t,r);break;default:bE()}}async function PR(e,t,n){const r=DR(e);if(r.Ca){for(const e of t){if(r.fa.has(e)){yE("SyncEngine","Adding an already active target "+e);continue}const t=await PN(r.localStore,e),n=await NN(r.localStore,t);await lR(r,NR(t),n.targetId,!1,n.resumeToken),dA(r.remoteStore,n)}for(const e of n)r.fa.has(e)&&await AN(r.localStore,e,!1).then((()=>{fA(r.remoteStore,e),yR(r,e)})).catch(iI)}}function DR(e){const t=IE(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=uR.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=SR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=dR.bind(null,t),t.Va.a_=GA.bind(null,t.eventManager),t.Va.Fa=QA.bind(null,t.eventManager),t}function OR(e){const t=IE(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=fR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=pR.bind(null,t),t}class LR{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=nA(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return SN(this.persistence,new EN,e.initialUser,this.serializer)}createPersistence(e){return new uN(dN.jr,this.serializer)}createSharedClientState(e){return new HN}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class MR extends LR{constructor(e,t,n){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xa.initialize(this,e),await OR(this.xa.syncEngine),await TA(this.xa.remoteStore),await this.persistence.mi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return SN(this.persistence,new EN,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Vx(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new gI(t,this.persistence);return new mI(e.asyncQueue,n)}createPersistence(e){const t=_N(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Tx.withCacheSize(this.cacheSizeBytes):Tx.DEFAULT;return new gN(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,eA(),tA(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new HN}}class FR extends MR{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xa.syncEngine;this.sharedClientState instanceof WN&&(this.sharedClientState.syncEngine={Ys:CR.bind(null,t),Zs:RR.bind(null,t),Xs:PR.bind(null,t),Bi:AR.bind(null,t),Js:kR.bind(null,t)},await this.sharedClientState.start()),await this.persistence.mi((async e=>{await async function(e,t){const n=IE(e);if(DR(n),OR(n),!0===t&&!0!==n.Ca){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await xR(n,e.toArray());n.Ca=!0,await LA(n.remoteStore,!0);for(const r of t)dA(n.remoteStore,r)}else if(!1===t&&!1!==n.Ca){const e=[];let t=Promise.resolve();n.fa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(yR(n,i),AN(n.localStore,i,!0)))),fA(n.remoteStore,i)})),await t,await xR(n,e),function(e){const t=IE(e);t.ya.forEach(((e,n)=>{fA(t.remoteStore,n)})),t.wa.Vr(),t.ya=new Map,t.pa=new ZI(KE.comparator)}(n),n.Ca=!1,await LA(n.remoteStore,!1)}}(this.xa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=eA();if(!WN.D(t))throw new TE(SE.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=_N(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new WN(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class UR{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>hR(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=IR.bind(null,this.syncEngine),await LA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new WA}createDatastore(e){const t=nA(e.databaseInfo.databaseId),n=function(e){return new ZN(e)}(e.databaseInfo);return function(e,t,n,r){return new aA(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new cA(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>hR(this.syncEngine,e,0)),GN.D()?new GN:new KN)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new oR(e,t,n,r,i,s);return o&&(a.Ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=IE(e);yE("RemoteStore","RemoteStore shutting down."),t.C_.add(5),await hA(t),t.F_.shutdown(),t.M_.set("Unknown")}(this.remoteStore)}}function jR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class VR{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):vE("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class qR{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new kE,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then((e=>{e&&e.Z_()?this.metadata.resolve(e.Y_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Y_))))}),(e=>this.metadata.reject(e)))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const e=await this.qa();if(null===e)return null;const t=this.La.decode(e),n=Number(t);isNaN(n)&&this.Qa("length string (".concat(t,") is not valid number"));const r=await this.Ka(n);return new JA(JSON.parse(r),e.length+n)}$a(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async qa(){for(;this.$a()<0&&!await this.Ua(););if(0===this.buffer.length)return null;const e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ka(e){for(;this.buffer.length<e;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const t=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qa(e){throw this.Ba.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ua(){const e=await this.Ba.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class zR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new TE(SE.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=IE(e),r=fC(n.serializer)+"/documents",i={documents:t.map((e=>cC(n.serializer,e)))},s=await n.Co("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){EE(!!t.found),t.found.name,t.found.updateTime;const n=uC(e,t.found.name),r=oC(t.found.updateTime),i=t.found.createTime?oC(t.found.createTime):qE.min(),s=new US({mapValue:{fields:t.found.fields}});return VS.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){EE(!!t.missing),EE(!!t.readTime);const n=uC(e,t.missing),r=oC(t.readTime);return VS.newNoDocument(n,r)}(e,t):bE()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());EE(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new kk(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=KE.fromPath(t);this.mutations.push(new Ck(n,this.precondition(n)))})),await async function(e,t){const n=IE(e),r=fC(n.serializer)+"/documents",i={writes:t.map((e=>yC(n.serializer,e)))};await n.wo("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw bE();t=qE.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new TE(SE.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(qE.min())?fk.exists(!1):fk.updateTime(t):fk.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(qE.min()))throw new TE(SE.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fk.updateTime(t)}return fk.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class BR{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Wa=n.maxAttempts,this.zo=new rA(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko((async()=>{const e=new zR(this.datastore),t=this.za(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.ja(e)}))))})).catch((e=>{this.ja(e)}))}))}za(e){try{const t=this.updateFunction(e);return!vI(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ga(),Promise.resolve())))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Ok(t)}return!1}}class WR{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=fE.UNAUTHENTICATED,this.clientId=ME.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{yE("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(yE("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new TE(SE.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kE;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=jA(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function HR(e,t){e.asyncQueue.verifyOperationInProgress(),yE("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await TN(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function KR(e,t){e.asyncQueue.verifyOperationInProgress();const n=await QR(e);yE("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>OA(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>OA(t.remoteStore,n))),e._onlineComponents=t}function GR(e){return"FirebaseError"===e.name?e.code===SE.FAILED_PRECONDITION||e.code===SE.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function QR(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){yE("FirestoreClient","Using user provided OfflineComponentProvider");try{await HR(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!GR(n))throw n;_E("Error using user provided cache. Falling back to memory cache: "+n),await HR(e,new LR)}}else yE("FirestoreClient","Using default OfflineComponentProvider"),await HR(e,new LR);return e._offlineComponents}async function YR(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(yE("FirestoreClient","Using user provided OnlineComponentProvider"),await KR(e,e._uninitializedComponentsProvider._online)):(yE("FirestoreClient","Using default OnlineComponentProvider"),await KR(e,new UR))),e._onlineComponents}function $R(e){return QR(e).then((e=>e.persistence))}function JR(e){return QR(e).then((e=>e.localStore))}function XR(e){return YR(e).then((e=>e.remoteStore))}function ZR(e){return YR(e).then((e=>e.syncEngine))}function eP(e){return YR(e).then((e=>e.datastore))}async function tP(e){const t=await YR(e),n=t.eventManager;return n.onListen=aR.bind(null,t.syncEngine),n.onUnlisten=cR.bind(null,t.syncEngine),n}function nP(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new kE;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new VR({next:s=>{t.enqueueAndForget((()=>KA(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new TE(SE.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new TE(SE.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new $A(bT(n.path),s,{includeMetadataChanges:!0,J_:!0});return HA(e,o)}(await tP(e),e.asyncQueue,t,n,r))),r.promise}function rP(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new kE;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new VR({next:n=>{t.enqueueAndForget((()=>KA(e,o))),n.fromCache&&"server"===r.source?i.reject(new TE(SE.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new $A(n,s,{includeMetadataChanges:!0,J_:!0});return HA(e,o)}(await tP(e),e.asyncQueue,t,n,r))),r.promise}function iP(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Fk().encode(e):e,function(e,t){return new qR(e,t)}(function(e,t){if(e instanceof Uint8Array)return jR(e,t);if(e instanceof ArrayBuffer)return jR(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,nA(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=IE(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=IE(e),r=oC(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Kr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(eR(r));const i=new ZA(r,e.localStore,t.serializer);let s=await t.Ma();for(;s;){const e=await i.ea(s);e&&n._updateProgress(e),s=await t.Ma()}const o=await i.complete();return await ER(e,o.ra,void 0),await function(e,t){const n=IE(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Kr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.na)}catch(e){return _E("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await ZR(e),i,r)}))}function sP(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const oP=new Map;function aP(e,t,n){if(!n)throw new TE(SE.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function lP(e,t,n,r){if(!0===t&&!0===r)throw new TE(SE.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function cP(e){if(!KE.isDocumentKey(e))throw new TE(SE.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function uP(e){if(KE.isDocumentKey(e))throw new TE(SE.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function hP(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":bE()}function dP(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new TE(SE.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hP(e);throw new TE(SE.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function fP(e,t){if(t<=0)throw new TE(SE.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class pP{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new TE(SE.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new TE(SE.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sP(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new TE(SE.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new TE(SE.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new TE(SE.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mP{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pP({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new TE(SE.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new TE(SE.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pP(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new xE;switch(e.type){case"firstParty":return new PE(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new TE(SE.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=oP.get(e);t&&(yE("ComponentProvider","Removing Datastore"),oP.delete(e),t.terminate())}(this),Promise.resolve()}}function gP(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=dP(e,mP))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&_E("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=fE.MOCK_USER;else{t=gi(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new TE(SE.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new fE(s)}e._authCredentials=new NE(new CE(t,n))}}class yP{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new yP(this.firestore,e,this._query)}}class vP{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _P(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vP(this.firestore,e,this._key)}}class _P extends yP{constructor(e,t,n){super(e,t,bT(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vP(this.firestore,null,new KE(e))}withConverter(e){return new _P(this.firestore,e,this._path)}}function wP(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Yi(e),aP("collection","path",t),e instanceof mP){const n=BE.fromString(t,...r);return uP(n),new _P(e,null,n)}{if(!(e instanceof vP||e instanceof _P))throw new TE(SE.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(BE.fromString(t,...r));return uP(n),new _P(e.firestore,null,n)}}function bP(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Yi(e),1===arguments.length&&(t=ME.newId()),aP("doc","path",t),e instanceof mP){const n=BE.fromString(t,...r);return cP(n),new vP(e,null,new KE(n))}{if(!(e instanceof vP||e instanceof _P))throw new TE(SE.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(BE.fromString(t,...r));return cP(n),new vP(e.firestore,e instanceof _P?e.converter:null,new KE(n))}}function EP(e,t){return e=Yi(e),t=Yi(t),(e instanceof vP||e instanceof _P)&&(t instanceof vP||t instanceof _P)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function IP(e,t){return e=Yi(e),t=Yi(t),e instanceof yP&&t instanceof yP&&e.firestore===t.firestore&&NT(e._query,t._query)&&e.converter===t.converter}class SP{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new rA(this,"async_queue_retry"),this.iu=()=>{const e=tA();e&&yE("AsyncQueue","Visibility state changed to "+e.visibilityState),this.zo.Qo()};const e=tA();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=tA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise((()=>{}));const t=new kE;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ya.push(e),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!uI(e))throw e;yE("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(e){const t=this.Ja.then((()=>(this.tu=!0,e().catch((e=>{this.eu=e,this.tu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw vE("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.tu=!1,e))))));return this.Ja=t,t}enqueueAfterDelay(e,t,n){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=UA.createAndSchedule(this,e,t,n,(e=>this.au(e)));return this.Xa.push(r),r}su(){this.eu&&bE()}verifyOperationInProgress(){}async uu(){let e;do{e=this.Ja,await e}while(e!==this.Ja)}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then((()=>{this.Xa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()}))}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function TP(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class kP{constructor(){this._progressObserver={},this._taskCompletionResolver=new kE,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class CP extends mP{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new SP,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||NP(this),this._firestoreClient.terminate()}}function xP(e){return e._firestoreClient||NP(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function NP(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new mS(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,sP(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new WR(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function AP(e,t,n){const r=new kE;return e.asyncQueue.enqueue((async()=>{try{await HR(e,n),await KR(e,t),r.resolve()}catch(e){const n=e;if(!GR(n))throw n;_E("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function RP(e){return function(e){const t=new kE;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=IE(e);vA(n.remoteStore)||yE("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=IE(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.ba.get(e)||[];r.push(t),n.ba.set(e,r)}catch(e){const n=jA(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await ZR(e),t))),t.promise}(xP(e=dP(e,CP)))}function PP(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await $R(e),n=await XR(e);return t.setNetworkEnabled(!0),function(e){const t=IE(e);return t.C_.delete(0),uA(t)}(n)}))}(xP(e=dP(e,CP)))}function DP(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await $R(e),n=await XR(e);return t.setNetworkEnabled(!1),async function(e){const t=IE(e);t.C_.add(0),await hA(t),t.M_.set("Offline")}(n)}))}(xP(e=dP(e,CP)))}function OP(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=IE(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Kr.getNamedQuery(e,t)))}(await JR(e),t)))}(xP(e=dP(e,CP)),t).then((t=>t?new yP(e,null,t.query):null))}function LP(e){if(e._initialized||e._terminated)throw new TE(SE.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class MP{constructor(e){this._byteString=e}static fromBase64String(e){try{return new MP(aS.fromBase64String(e))}catch(e){throw new TE(SE.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new MP(aS.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class FP{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new TE(SE.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new HE(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class UP{constructor(e){this._methodName=e}}class jP{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new TE(SE.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new TE(SE.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return FE(this._lat,e._lat)||FE(this._long,e._long)}}const VP=/^__.*__$/;class qP{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Ek(e,this.data,this.fieldMask,t,this.fieldTransforms):new bk(e,this.data,t,this.fieldTransforms)}}class zP{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ek(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function BP(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bE()}}class WP{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Pu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new WP(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Au(e),r}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return uD(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(BP(this.Iu)&&VP.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class HP{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||nA(e)}pu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new WP({Iu:e,methodName:t,gu:n,path:HE.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function KP(e){const t=e._freezeSettings(),n=nA(e._databaseId);return new HP(e._databaseId,!!t.ignoreUndefinedProperties,n)}function GP(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.pu(s.merge||s.mergeFields?2:0,t,n,i);oD("Data must be an object, but it was:",o,r);const a=iD(r,o);let l,c;if(s.merge)l=new sS(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=aD(t,r,n);if(!o.contains(i))throw new TE(SE.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));hD(e,i)||e.push(i)}l=new sS(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new qP(new US(a),l,c)}class QP extends UP{_toFieldTransform(e){if(2!==e.Iu)throw 1===e.Iu?e.mu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.mu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof QP}}function YP(e,t,n){return new WP({Iu:3,gu:t.settings.gu,methodName:e._methodName,du:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class $P extends UP{_toFieldTransform(e){return new hk(e.path,new rk)}isEqual(e){return e instanceof $P}}class JP extends UP{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=YP(this,e,!0),n=this.yu.map((e=>rD(e,t))),r=new ik(n);return new hk(e.path,r)}isEqual(e){return this===e}}class XP extends UP{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=YP(this,e,!0),n=this.yu.map((e=>rD(e,t))),r=new ok(n);return new hk(e.path,r)}isEqual(e){return this===e}}class ZP extends UP{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new lk(e.serializer,XT(e.serializer,this.wu));return new hk(e.path,t)}isEqual(e){return this===e}}function eD(e,t,n,r){const i=e.pu(1,t,n);oD("Data must be an object, but it was:",i,r);const s=[],o=US.empty();JI(r,((e,r)=>{const a=cD(t,e,n);r=Yi(r);const l=i.Ru(a);if(r instanceof QP)s.push(a);else{const e=rD(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new sS(s);return new zP(o,a,i.fieldTransforms)}function tD(e,t,n,r,i,s){const o=e.pu(1,t,n),a=[aD(t,r,n)],l=[i];if(s.length%2!=0)throw new TE(SE.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(aD(t,s[d])),l.push(s[d+1]);const c=[],u=US.empty();for(let d=a.length-1;d>=0;--d)if(!hD(c,a[d])){const e=a[d];let t=l[d];t=Yi(t);const n=o.Ru(e);if(t instanceof QP)c.push(e);else{const r=rD(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new sS(c);return new zP(u,h,o.fieldTransforms)}function nD(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return rD(n,e.pu(r?4:3,t))}function rD(e,t){if(sD(e=Yi(e)))return oD("Unsupported field value:",t,e),iD(e,t);if(e instanceof UP)return function(e,t){if(!BP(t.Iu))throw t.mu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.mu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=rD(i,t.Vu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Yi(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return XT(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=VE.fromDate(e);return{timestampValue:rC(t.serializer,n)}}if(e instanceof VE){const n=new VE(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:rC(t.serializer,n)}}if(e instanceof jP)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof MP)return{bytesValue:iC(t.serializer,e._byteString)};if(e instanceof vP){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.mu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:aC(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu("Unsupported field value: ".concat(hP(e)))}(e,t)}function iD(e,t){const n={};return XI(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):JI(e,((e,r)=>{const i=rD(r,t.Eu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function sD(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof VE||e instanceof jP||e instanceof MP||e instanceof vP||e instanceof UP)}function oD(e,t,n){if(!sD(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=hP(n);throw"an object"===r?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function aD(e,t,n){if((t=Yi(t))instanceof FP)return t._internalPath;if("string"==typeof t)return cD(e,t);throw uD("Field path arguments must be of type string or ",e,!1,void 0,n)}const lD=new RegExp("[~\\*/\\[\\]]");function cD(e,t,n){if(t.search(lD)>=0)throw uD("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new FP(...t.split("."))._internalPath}catch(ov){throw uD("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function uD(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new TE(SE.INVALID_ARGUMENT,a+e+l)}function hD(e,t){return e.some((e=>e.isEqual(t)))}class dD{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new vP(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new fD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class fD extends dD{data(){return super.data()}}function pD(e,t){return"string"==typeof t?cD(e,t):t instanceof FP?t._internalPath:t._delegate._internalPath}function mD(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new TE(SE.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gD{}class yD extends gD{}function vD(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof gD&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof wD)).length,n=e.filter((e=>e instanceof _D)).length;if(t>1||t>0&&n>0)throw new TE(SE.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class _D extends yD{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new _D(e,t,n)}_apply(e){const t=this._parse(e);return xD(e._query,t),new yP(e.firestore,e.converter,CT(e._query,t))}_parse(e){const t=KP(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new TE(SE.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){CD(o,s);const t=[];for(const n of o)t.push(kD(r,e,n));a={arrayValue:{values:t}}}else a=kD(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||CD(o,s),a=nD(n,t,o,"in"===s||"not-in"===s);return GS.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class wD extends gD{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wD(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:QS.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)xD(n,i),n=CT(n,i)}(e._query,t),new yP(e.firestore,e.converter,CT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class bD extends yD{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new bD(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new TE(SE.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new TE(SE.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new WS(t,n)}(e._query,this._field,this._direction);return new yP(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new _T(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class ED extends yD{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new ED(e,t,n)}_apply(e){return new yP(e.firestore,e.converter,xT(e._query,this._limit,this._limitType))}}class ID extends yD{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new ID(e,t,n)}_apply(e){const t=TD(e,this.type,this._docOrFields,this._inclusive);return new yP(e.firestore,e.converter,function(e,t){return new _T(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class SD extends yD{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new SD(e,t,n)}_apply(e){const t=TD(e,this.type,this._docOrFields,this._inclusive);return new yP(e.firestore,e.converter,function(e,t){return new _T(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function TD(e,t,n,r){if(n[0]=Yi(n[0]),n[0]instanceof dD)return function(e,t,n,r,i){if(!r)throw new TE(SE.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of ST(e))if(o.field.isKeyField())s.push(kS(t,r.key));else{const e=r.data.field(o.field);if(dS(e))throw new TE(SE.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new TE(SE.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new qS(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=KP(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new TE(SE.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new TE(SE.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!IT(e)&&-1!==s.indexOf("/"))throw new TE(SE.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(BE.fromString(s));if(!KE.isDocumentKey(n))throw new TE(SE.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new KE(n);a.push(kS(t,i))}else{const e=nD(n,r,s);a.push(e)}}return new qS(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function kD(e,t,n){if("string"==typeof(n=Yi(n))){if(""===n)throw new TE(SE.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IT(t)&&-1!==n.indexOf("/"))throw new TE(SE.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(BE.fromString(n));if(!KE.isDocumentKey(r))throw new TE(SE.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return kS(e,new KE(r))}if(n instanceof vP)return kS(e,n._key);throw new TE(SE.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(hP(n),"."))}function CD(e,t){if(!Array.isArray(e)||0===e.length)throw new TE(SE.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function xD(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new TE(SE.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new TE(SE.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class ND{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(_S(e)){case 0:return null;case 1:return e.booleanValue;case 2:return uS(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hS(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw bE()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return JI(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new jP(uS(e.latitude),uS(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=fS(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(pS(e));default:return null}}convertTimestamp(e){const t=cS(e);return new VE(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=BE.fromString(e);EE(AC(n));const r=new gS(n.get(1),n.get(3)),i=new KE(n.popFirst(5));return r.isEqual(t)||vE("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function AD(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class RD extends ND{constructor(e){super(),this.firestore=e}convertBytes(e){return new MP(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vP(this.firestore,null,t)}}class PD{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DD extends dD{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new OD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(pD("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class OD extends DD{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class LD{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new PD(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new OD(this._firestore,this._userDataWriter,n.key,n,new PD(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new TE(SE.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new OD(e._firestore,e._userDataWriter,n.doc.key,n.doc,new PD(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new OD(e._firestore,e._userDataWriter,t.doc.key,t.doc,new PD(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:MD(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function MD(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bE()}}function FD(e,t){return e instanceof DD&&t instanceof DD?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof LD&&t instanceof LD&&e._firestore===t._firestore&&IP(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class UD extends ND{constructor(e){super(),this.firestore=e}convertBytes(e){return new MP(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vP(this.firestore,null,t)}}function jD(e){e=dP(e,vP);const t=dP(e.firestore,CP),n=xP(t),r=new UD(t);return function(e,t){const n=new kE;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=IE(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new TE(SE.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=jA(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await JR(e),t,n))),n.promise}(n,e._key).then((n=>new DD(t,r,e._key,n,new PD(null!==n&&n.hasLocalMutations,!0),e.converter)))}function VD(e){e=dP(e,yP);const t=dP(e.firestore,CP),n=xP(t),r=new UD(t);return mD(e._query),rP(n,e._query).then((n=>new LD(t,r,e,n)))}function qD(e){e=dP(e,yP);const t=dP(e.firestore,CP),n=xP(t),r=new UD(t);return function(e,t){const n=new kE;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await RN(e,t,!0),i=new rR(t,r.ls),s=i.ca(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=jA(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await JR(e),t,n))),n.promise}(n,e._query).then((n=>new LD(t,r,e,n)))}function zD(e,t,n){e=dP(e,vP);const r=dP(e.firestore,CP),i=AD(e.converter,t,n);return GD(r,[GP(KP(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,fk.none())])}function BD(e,t,n){e=dP(e,vP);const r=dP(e.firestore,CP),i=KP(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Yi(t))||t instanceof FP?tD(i,"updateDoc",e._key,t,n,a):eD(i,"updateDoc",e._key,t),GD(r,[s.toMutation(e._key,fk.exists(!0))])}function WD(e,t){const n=dP(e.firestore,CP),r=bP(e),i=AD(e.converter,t);return GD(n,[GP(KP(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,fk.exists(!1))]).then((()=>r))}function HD(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Yi(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||TP(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(TP(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof vP)h=dP(e.firestore,CP),d=bT(e._key.path),u={next:t=>{n[l]&&n[l](QD(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=dP(e,yP);h=dP(t.firestore,CP),d=t._query;const r=new UD(h);u={next:e=>{n[l]&&n[l](new LD(h,r,t,e))},error:n[l+1],complete:n[l+2]},mD(e._query)}return function(e,t,n,r){const i=new VR(r),s=new $A(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>HA(await tP(e),s))),()=>{i.Na(),e.asyncQueue.enqueueAndForget((async()=>KA(await tP(e),s)))}}(xP(h),d,c,u)}function KD(e,t){return function(e,t){const n=new VR(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){IE(e).q_.add(t),t.next()}(await tP(e),n))),()=>{n.Na(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){IE(e).q_.delete(t)}(await tP(e),n)))}}(xP(e=dP(e,CP)),TP(t)?t:{next:t})}function GD(e,t){return function(e,t){const n=new kE;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=OR(e);try{const e=await function(e,t){const n=IE(e),r=VE.now(),i=t.reduce(((e,t)=>e.add(t.key)),GT());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=UT(),l=GT();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=_k(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Ek(e.key,t,jS(t.value.mapValue),fk.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:qT(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Sa[e.currentUser.toKey()];r||(r=new ZI(FE)),r=r.insert(t,n),e.Sa[e.currentUser.toKey()]=r}(r,e.batchId,n),await ER(r,e.changes),await TA(r.remoteStore)}catch(e){const t=jA(e,"Failed to persist write");n.reject(t)}}(await ZR(e),t,n))),n.promise}(xP(e),t)}function QD(e,t,n){const r=n.docs.get(t._key),i=new UD(e);return new DD(e,i,t._key,r,new PD(n.hasPendingWrites,n.fromCache),t.converter)}const YD={maxAttempts:5};class $D{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=KP(e)}set(e,t,n){this._verifyNotCommitted();const r=JD(e,this._firestore),i=AD(r.converter,t,n),s=GP(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,fk.none())),this}update(e,t,n){this._verifyNotCommitted();const r=JD(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Yi(t))||t instanceof FP?tD(this._dataReader,"WriteBatch.update",r._key,t,n,o):eD(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,fk.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=JD(e,this._firestore);return this._mutations=this._mutations.concat(new kk(t._key,fk.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new TE(SE.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function JD(e,t){if((e=Yi(e)).firestore!==t)throw new TE(SE.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class XD extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=KP(e)}get(e){const t=JD(e,this._firestore),n=new RD(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return bE();const r=e[0];if(r.isFoundDocument())return new dD(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new dD(this._firestore,n,t._key,null,t.converter);throw bE()}))}set(e,t,n){const r=JD(e,this._firestore),i=AD(r.converter,t,n),s=GP(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=JD(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Yi(t))||t instanceof FP?tD(this._dataReader,"Transaction.update",r._key,t,n,o):eD(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=JD(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=JD(e,this._firestore),n=new UD(this._firestore);return super.get(e).then((e=>new DD(this._firestore,n,t._key,e._document,new PD(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){pE=e}(Vs),Os(new $i("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new CP(new AE(e.getProvider("auth-internal")),new OE(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new TE(SE.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gS(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Hs(dE,"4.4.0",e),Hs(dE,"4.4.0","esm2017")}();function ZD(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new TE("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function eO(){if("undefined"===typeof Uint8Array)throw new TE("unimplemented","Uint8Arrays are not available in this environment.")}function tO(){if("undefined"==typeof atob)throw new TE("unimplemented","Blobs are unavailable in Firestore in this environment.")}class nO{constructor(e){this._delegate=e}static fromBase64String(e){return tO(),new nO(MP.fromBase64String(e))}static fromUint8Array(e){return eO(),new nO(MP.fromUint8Array(e))}toBase64(){return tO(),this._delegate.toBase64()}toUint8Array(){return eO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function rO(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class iO{enableIndexedDbPersistence(e,t){return function(e,t){LP(e=dP(e,CP));const n=xP(e);if(n._uninitializedComponentsProvider)throw new TE(SE.FAILED_PRECONDITION,"SDK cache is already specified.");_E("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new UR;return AP(n,i,new MR(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){LP(e=dP(e,CP));const t=xP(e);if(t._uninitializedComponentsProvider)throw new TE(SE.FAILED_PRECONDITION,"SDK cache is already specified.");_E("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new UR;return AP(t,r,new FR(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new TE(SE.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new kE;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!aI.D())return Promise.resolve();const t=e+"main";await aI.delete(t)}(_N(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class sO{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof gS||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||_E("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};gP(this._delegate,e,t,n)}enableNetwork(){return PP(this._delegate)}disableNetwork(){return DP(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,lP("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return RP(this._delegate)}onSnapshotsInSync(e){return KD(this._delegate,e)}get app(){if(!this._appCompat)throw new TE("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new _O(this,wP(this._delegate,e))}catch(t){throw hO(t,"collection()","Firestore.collection()")}}doc(e){try{return new uO(this,bP(this._delegate,e))}catch(t){throw hO(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new gO(this,function(e,t){if(e=dP(e,mP),aP("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new TE(SE.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new yP(e,null,function(e){return new _T(BE.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw hO(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=dP(e,CP);const r=Object.assign(Object.assign({},YD),n);return function(e){if(e.maxAttempts<1)throw new TE(SE.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new kE;return e.asyncQueue.enqueueAndForget((async()=>{const i=await eP(e);new BR(e.asyncQueue,i,n,t,r).run()})),r.promise}(xP(e),(n=>t(new XD(e,n))),r)}(this._delegate,(t=>e(new aO(this,t))))}batch(){return xP(this._delegate),new lO(new $D(this._delegate,(e=>GD(this._delegate,e))))}loadBundle(e){return function(e,t){const n=xP(e=dP(e,CP)),r=new kP;return iP(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return OP(this._delegate,e).then((e=>e?new gO(this,e):null))}}class oO extends ND{constructor(e){super(),this.firestore=e}convertBytes(e){return new nO(new MP(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return uO.forKey(t,this.firestore,null)}}class aO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new oO(e)}get(e){const t=wO(e);return this._delegate.get(t).then((e=>new pO(this._firestore,new DD(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=wO(e);return n?(ZD("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=wO(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=wO(e);return this._delegate.delete(t),this}}class lO{constructor(e){this._delegate=e}set(e,t,n){const r=wO(e);return n?(ZD("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=wO(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=wO(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class cO{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new OD(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new mO(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=cO.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new cO(e,new oO(e),t),r.set(t,i)),i}}cO.INSTANCES=new WeakMap;class uO{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oO(e)}static forPath(e,t,n){if(e.length%2!==0)throw new TE("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new uO(t,new vP(t._delegate,n,new KE(e)))}static forKey(e,t,n){return new uO(t,new vP(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new _O(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new _O(this.firestore,wP(this._delegate,e))}catch(t){throw hO(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Yi(e))instanceof vP&&EP(this._delegate,e)}set(e,t){t=ZD("DocumentReference.set",t);try{return t?zD(this._delegate,e,t):zD(this._delegate,e)}catch(n){throw hO(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?BD(this._delegate,e):BD(this._delegate,e,t,...r)}catch(s){throw hO(s,"updateDoc()","DocumentReference.update()")}}delete(){return GD(dP((e=this._delegate).firestore,CP),[new kk(e._key,fk.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=dO(t),i=fO(t,(e=>new pO(this.firestore,new DD(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return HD(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?jD(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=dP(e,vP);const t=dP(e.firestore,CP);return nP(xP(t),e._key,{source:"server"}).then((n=>QD(t,e,n)))}(this._delegate):function(e){e=dP(e,vP);const t=dP(e.firestore,CP);return nP(xP(t),e._key).then((n=>QD(t,e,n)))}(this._delegate),t.then((e=>new pO(this.firestore,new DD(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new uO(this.firestore,e?this._delegate.withConverter(cO.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function hO(e,t,n){return e.message=e.message.replace(t,n),e}function dO(e){for(const t of e)if("object"===typeof t&&!rO(t))return t;return{}}function fO(e,t){var n,r;let i;return i=rO(e[0])?e[0]:rO(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class pO{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new uO(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return FD(this._delegate,e._delegate)}}class mO extends pO{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||bE(),t}}class gO{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oO(e)}where(e,t,n){try{return new gO(this.firestore,vD(this._delegate,function(e,t,n){const r=t,i=pD("where",e);return _D._create(i,r,n)}(e,t,n)))}catch(r){throw hO(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new gO(this.firestore,vD(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=pD("orderBy",e);return bD._create(n,t)}(e,t)))}catch(n){throw hO(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new gO(this.firestore,vD(this._delegate,(fP("limit",t=e),ED._create("limit",t,"F"))))}catch(t){throw hO(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new gO(this.firestore,vD(this._delegate,(fP("limitToLast",t=e),ED._create("limitToLast",t,"L"))))}catch(t){throw hO(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new gO(this.firestore,vD(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ID._create("startAt",t,!0)}(...arguments)))}catch(e){throw hO(e,"startAt()","Query.startAt()")}}startAfter(){try{return new gO(this.firestore,vD(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ID._create("startAfter",t,!1)}(...arguments)))}catch(e){throw hO(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new gO(this.firestore,vD(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return SD._create("endBefore",t,!1)}(...arguments)))}catch(e){throw hO(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new gO(this.firestore,vD(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return SD._create("endAt",t,!0)}(...arguments)))}catch(e){throw hO(e,"endAt()","Query.endAt()")}}isEqual(e){return IP(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?qD(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=dP(e,yP);const t=dP(e.firestore,CP),n=xP(t),r=new UD(t);return rP(n,e._query,{source:"server"}).then((n=>new LD(t,r,e,n)))}(this._delegate):VD(this._delegate),t.then((e=>new vO(this.firestore,new LD(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=dO(t),i=fO(t,(e=>new vO(this.firestore,new LD(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return HD(this._delegate,r,i)}withConverter(e){return new gO(this.firestore,e?this._delegate.withConverter(cO.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class yO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new mO(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new gO(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new mO(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new yO(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new mO(this._firestore,n))}))}isEqual(e){return FD(this._delegate,e._delegate)}}class _O extends gO{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new uO(this.firestore,e):null}doc(e){try{return new uO(this.firestore,void 0===e?bP(this._delegate):bP(this._delegate,e))}catch(t){throw hO(t,"doc()","CollectionReference.doc()")}}add(e){return WD(this._delegate,e).then((e=>new uO(this.firestore,e)))}isEqual(e){return EP(this._delegate,e._delegate)}withConverter(e){return new _O(this.firestore,e?this._delegate.withConverter(cO.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function wO(e){return dP(e,vP)}class bO{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new FP(...t)}static documentId(){return new bO(HE.keyField().canonicalString())}isEqual(e){return(e=Yi(e))instanceof FP&&this._delegate._internalPath.isEqual(e._internalPath)}}class EO{constructor(e){this._delegate=e}static serverTimestamp(){const e=new $P("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new EO(e)}static delete(){const e=new QP("deleteField");return e._methodName="FieldValue.delete",new EO(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new JP("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new EO(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new XP("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new EO(e)}static increment(e){const t=new ZP("increment",e);return t._methodName="FieldValue.increment",new EO(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const IO={Firestore:sO,GeoPoint:jP,Timestamp:VE,Blob:nO,Transaction:aO,WriteBatch:lO,DocumentReference:uO,DocumentSnapshot:pO,Query:gO,QueryDocumentSnapshot:mO,QuerySnapshot:vO,CollectionReference:_O,FieldPath:bO,FieldValue:EO,setLogLevel:function(e){var t;t=e,mE.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new $i("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},IO)))}(e,((e,t)=>new sO(e,t,new iO))),e.registerVersion("@firebase/firestore-compat","0.3.23")}(uo);const SO="firebasestorage.googleapis.com",TO="storageBucket";class kO extends Ti{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(NO(e),"Firebase Storage: ".concat(t," (").concat(NO(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,kO.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return NO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var CO,xO;function NO(e){return"storage/"+e}function AO(){return new kO(CO.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function RO(){return new kO(CO.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function PO(){return new kO(CO.CANCELED,"User canceled the upload/download.")}function DO(){return new kO(CO.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function OO(e){return new kO(CO.INVALID_ARGUMENT,e)}function LO(){return new kO(CO.APP_DELETED,"The Firebase app was deleted.")}function MO(e,t){return new kO(CO.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function FO(e){throw new kO(CO.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(CO||(CO={}));class UO{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=UO.makeFromUrl(e,t)}catch(i){return new UO(e,"")}if(""===n.path)return n;throw r=e,new kO(CO.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===SO?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new UO(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new kO(CO.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class jO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function VO(e){return"string"===typeof e||e instanceof String}function qO(e){return zO()&&e instanceof Blob}function zO(){return"undefined"!==typeof Blob}function BO(e,t,n,r){if(r<t)throw OO("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw OO("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function WO(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function HO(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function KO(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(xO||(xO={}));class GO{constructor(e,t,n,r,i,s,o,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new QO(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===xO.NO_ERROR,i=n.getStatus();if(!t||KO(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===xO.ABORT;return void e(!1,new QO(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new QO(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){r(s)}else if(null!==i){const e=AO();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?LO():PO())}else{r(RO())}};this.canceled_?t(0,new QO(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||o)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function m(e){p||(p=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class QO{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function YO(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function $O(){const e=YO();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(zO())return new Blob(n);throw new kO(CO.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function JO(e){if("undefined"===typeof atob)throw t="base-64",new kO(CO.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const XO={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ZO{constructor(e,t){this.data=e,this.contentType=t||null}}function eL(e,t){switch(e){case XO.RAW:return new ZO(tL(t));case XO.BASE64:case XO.BASE64URL:return new ZO(nL(e,t));case XO.DATA_URL:return new ZO(function(e){const t=new rL(e);return t.base64?nL(XO.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw MO(XO.DATA_URL,"Malformed data URL.")}return tL(t)}(t.rest)}(t),new rL(t).contentType)}throw AO()}function tL(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function nL(e,t){switch(e){case XO.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw MO(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case XO.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw MO(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=JO(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw MO(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class rL{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw MO(XO.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class iL{constructor(e,t){let n=0,r="";qO(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(qO(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new iL(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new iL(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(zO()){const e=t.map((e=>e instanceof iL?e.data_:e));return new iL($O.apply(null,e))}{const e=t.map((e=>VO(e)?eL(XO.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new iL(r,!0)}}uploadData(){return this.data_}}function sL(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function oL(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function aL(e,t){return t}class lL{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||aL}}let cL=null;function uL(){if(cL)return cL;const e=[];e.push(new lL("bucket")),e.push(new lL("generation")),e.push(new lL("metageneration")),e.push(new lL("name","fullPath",!0));const t=new lL("name");t.xform=function(e,t){return function(e){return!VO(e)||e.length<2?e:oL(e)}(t)},e.push(t);const n=new lL("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new lL("timeCreated")),e.push(new lL("updated")),e.push(new lL("md5Hash",null,!0)),e.push(new lL("cacheControl",null,!0)),e.push(new lL("contentDisposition",null,!0)),e.push(new lL("contentEncoding",null,!0)),e.push(new lL("contentLanguage",null,!0)),e.push(new lL("contentType",null,!0)),e.push(new lL("metadata","customMetadata",!0)),cL=e,cL}function hL(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new UO(n,r);return t._makeStorageReference(i)}})}(r,e),r}function dL(e,t,n){const r=sL(t);if(null===r)return null;return hL(e,r,n)}function fL(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class pL{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function mL(e){if(!e)throw AO()}function gL(e,t){return function(n,r){const i=dL(e,r,t);return mL(null!==i),i}}function yL(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new kO(CO.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new kO(CO.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new kO(CO.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new kO(CO.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function vL(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function _L(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=vL(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+fL(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=iL.getBlob(c,r,u);if(null===h)throw DO();const d={name:l.fullPath},f=WO(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new pL(f,"POST",gL(e,n),p);return m.urlParams=d,m.headers=o,m.body=h.uploadData(),m.errorHandler=yL(t),m}let wL=null;class bL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xO.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=xO.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=xO.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw FO("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw FO("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw FO("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw FO("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw FO("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class EL extends bL{initXhr(){this.xhr_.responseType="text"}}function IL(){return wL?wL():new EL}class SL{constructor(e,t){this._service=e,this._location=t instanceof UO?t:UO.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new SL(e,t)}get root(){const e=new UO(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return oL(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new UO(this._location.bucket,e);return new SL(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new kO(CO.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function TL(e,t,n){e._throwIfRoot("uploadBytes");const r=_L(e.storage,e._location,uL(),new iL(t,!0),n);return e.storage.makeRequestWithTokens(r,IL).then((t=>({metadata:t,ref:e})))}function kL(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new UO(e._location.bucket,n);return new SL(e.storage,r)}function CL(e,t){if(e instanceof AL){const n=e;if(null==n._bucket)throw new kO(CO.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+TO+"' property when initializing the app?");const r=new SL(n,n._bucket);return null!=t?CL(r,t):r}return void 0!==t?kL(e,t):e}function xL(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof AL)return new SL(e,t);throw OO("To use ref(service, url), the first argument must be a Storage instance.")}return CL(e,t)}function NL(e,t){const n=null===t||void 0===t?void 0:t[TO];return null==n?null:UO.makeFromBucketSpec(n,e)}class AL{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=SO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?UO.makeFromBucketSpec(r,this._host):NL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=UO.makeFromBucketSpec(this._url,e):this._bucket=NL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){BO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){BO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new SL(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new jO(LO());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=HO(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new GO(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const RL="@firebase/storage",PL="0.12.0",DL="storage";function OL(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new AL(r,i,s,n,Vs)}Os(new $i(DL,OL,"PUBLIC").setMultipleInstances(!0)),Hs(RL,PL,""),Hs(RL,PL,"esm2017");const LL=uo.initializeApp({apiKey:"AIzaSyBqu0i265XzgWoWH68vMoKbicYweNdzbbY",authDomain:"movie-ticket-e64ad.firebaseapp.com",projectId:"movie-ticket-e64ad",storageBucket:"movie-ticket-e64ad.appspot.com",messagingSenderId:"1089153646583",appId:"1:1089153646583:web:fac15f7b2148cbdfc4b8f2"}),ML=uo.firestore(),FL=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zs(),t=arguments.length>1?arguments[1]:void 0;e=Yi(e);const n=Ls(e,DL).getImmediate({identifier:t}),r=fi("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:gi(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(LL),UL=e=>function(t){var n=zt((e=>e.auth.user)),i=Ge();return(0,r.useEffect)((()=>{n&&i("/Shows")}),[n,i]),(0,Fr.jsx)(e,{...t})};const jL=UL((function(){const e=Ge(),t=wP(ML,"userdata"),[n,i]=(0,r.useState)({name:"",email:"",password:"",password_confirmation:""}),s=e=>{i({...n,[e.target.name]:e.target.value})};return(0,Fr.jsxs)("div",{className:"App Section",children:[(0,Fr.jsx)(Ur,{}),(0,Fr.jsx)("div",{className:"container Adminform",children:(0,Fr.jsxs)("form",{onSubmit:async r=>{r.preventDefault();try{const{email:r,password:i,password_confirmation:s}=n;if(i!==s)return void alert("Passwords don't match");if(await LL.auth().createUserWithEmailAndPassword(r,i)){await WD(t,n)&&console.log("Success"),e("/AdminLogin")}else alert("error")}catch(Ph){alert(Ph.message)}},className:"col-sm-8 offset-sm-2 col-md-4 offset-md-4 card car",children:[(0,Fr.jsx)("h2",{className:"text-center pt-3 pb-4",children:"Signup"}),(0,Fr.jsxs)("div",{className:"form-group mb-4",onChange:s,children:[(0,Fr.jsx)("input",{type:"text",name:"name",errormessage:"Username should be 3-10 characters",placeholder:"Username",className:"form-control fa/FaRegUser",pattern:"^[A-Za-z0-9]{3,16}$",required:!0}),(0,Fr.jsx)("div",{className:"icon-container",children:(0,Fr.jsx)(Yr,{})})]}),(0,Fr.jsxs)("div",{className:"form-group mb-4",onChange:s,children:[(0,Fr.jsx)("input",{type:"email",name:"email",errormessage:"It should be a valid Email address!",placeholder:"Email",className:"form-control",required:!0}),(0,Fr.jsx)("div",{className:"icon-container",children:(0,Fr.jsx)($r,{})})]}),(0,Fr.jsxs)("div",{className:"form-group mb-4",onChange:s,children:[(0,Fr.jsx)("input",{type:"Password",name:"password",errormessage:"Password should be 7-15 characters",placeholder:"Password",className:"form-control",pattern:"^[A-Za-z0-9!@#$%^&*]{7,15}$",required:!0}),(0,Fr.jsx)("div",{className:"icon-container",children:(0,Fr.jsx)(Xr,{})})]}),(0,Fr.jsxs)("div",{className:"form-group mb-4",onChange:s,children:[(0,Fr.jsx)("input",{type:"Password",name:"password_confirmation",errormessage:"Passwords don't match",placeholder:"Confirm Password",className:"form-control",required:!0}),(0,Fr.jsx)("div",{className:"icon-container",children:(0,Fr.jsx)(Jr,{})})]}),(0,Fr.jsx)("div",{className:"form-group mt-2 pb-2",children:(0,Fr.jsx)("input",{type:"submit",className:"btn btn-block CreateAccount",value:"Create Account"})}),(0,Fr.jsx)("div",{className:"text-center pt-1 pb-2",children:(0,Fr.jsxs)("p",{className:"Already",children:["Already have an account?",(0,Fr.jsx)(kt,{to:"/AdminLogin",className:"LoginBtn",children:"Login"})]})})]})})]})}));const VL=UL((function(){const e=Xt(),t=Ge(),[n,i]=(0,r.useState)({email:"",password:""}),s=e=>{i({...n,[e.target.name]:e.target.value})};return(0,Fr.jsxs)("div",{className:"App AdminLoginSection",children:[(0,Fr.jsx)(Ur,{}),(0,Fr.jsxs)("div",{className:"container AdminformLogin mt-5",children:[(0,Fr.jsxs)("div",{className:"mb-4 text-center",children:[(0,Fr.jsx)("input",{type:"submit",className:"btn adminLogin mr-3",value:"Admin"}),(0,Fr.jsx)(kt,{to:"/UserLogin",children:(0,Fr.jsx)("input",{type:"submit",className:"btn userLogin ml-3",value:"User"})})]}),(0,Fr.jsxs)("form",{onSubmit:async r=>{r.preventDefault();try{const{email:r,password:i}=n,s=(await LL.auth().signInWithEmailAndPassword(r,i)).user;s?(e(Pr({uid:s.uid,email:s.email})),t("/Shows"),console.log("loggedin")):alert("error")}catch(Ph){alert(Ph.message)}},className:"col-sm-8 offset-sm-2 col-md-4 offset-md-4 card carLogin",children:[(0,Fr.jsx)("h2",{className:"text-center pt-3 pb-4",children:"Admin Login"}),(0,Fr.jsxs)("div",{className:"form-group mb-4",onChange:s,children:[(0,Fr.jsx)("input",{type:"email",name:"email",errormessage:"It should be a valid Email address!",placeholder:"Email",className:"form-control",required:!0}),(0,Fr.jsx)("div",{className:"icon-containerLogin",children:(0,Fr.jsx)($r,{})})]}),(0,Fr.jsxs)("div",{className:"form-group mb-4",onChange:s,children:[(0,Fr.jsx)("input",{type:"Password",name:"password",errormessage:"Password should be 7-15 characters",placeholder:"Password",className:"form-control",pattern:"^[A-Za-z0-9!@#$%^&*]{7,15}$",required:!0}),(0,Fr.jsx)("div",{className:"icon-containerLogin",children:(0,Fr.jsx)(Xr,{})})]}),(0,Fr.jsx)("div",{className:"form-group mt-2 pb-2",children:(0,Fr.jsx)("input",{type:"submit",className:"btn btn-block LoginAdmin",value:"Login"})}),(0,Fr.jsx)("div",{className:"text-center pt-1 pb-2",children:(0,Fr.jsxs)("p",{className:"Donthave",children:["Don't have an account?",(0,Fr.jsx)(kt,{to:"/Signup",className:"SignupBtn",children:"Signup"})]})})]})]})]})}));function qL(){return(0,Fr.jsxs)("div",{className:"App UserLoginSection",children:[(0,Fr.jsx)(Ur,{}),(0,Fr.jsxs)("div",{className:"container UserformLogin mt-5",children:[(0,Fr.jsxs)("div",{className:"mb-4 text-center",children:[(0,Fr.jsx)(kt,{to:"/AdminLogin",children:(0,Fr.jsx)("input",{type:"submit",className:"btn UsersadminLogin mr-3",value:"Admin"})}),(0,Fr.jsx)("input",{type:"submit",className:"btn LoginUsers ml-3",value:"User"})]}),(0,Fr.jsxs)("form",{className:"col-sm-8 offset-sm-2 col-md-4 offset-md-4 card carLoginUser",children:[(0,Fr.jsx)("h2",{className:"text-center pt-3 pb-4",children:"User Login"}),(0,Fr.jsxs)("div",{className:"form-group mb-4",children:[(0,Fr.jsx)("input",{type:"email",placeholder:"Email",className:"form-control",required:!0}),(0,Fr.jsx)("div",{className:"icon-containerLoginUser",children:(0,Fr.jsx)($r,{})})]}),(0,Fr.jsxs)("div",{className:"form-group mb-4",children:[(0,Fr.jsx)("input",{type:"Password",placeholder:"Password",className:"form-control",pattern:"^[A-Za-z0-9!@#$%^&*]{7,15}$",required:!0}),(0,Fr.jsx)("div",{className:"icon-containerLoginUser",children:(0,Fr.jsx)(Xr,{})})]}),(0,Fr.jsx)("div",{className:"form-group mt-2 pb-2",children:(0,Fr.jsx)("input",{type:"submit",className:"btn btn-block LoginUser",value:"Login"})}),(0,Fr.jsx)("div",{className:"text-center pt-1 pb-2",children:(0,Fr.jsxs)("p",{className:"DonthaveUser",children:["Don't have an account?",(0,Fr.jsx)(kt,{to:"/Signup",className:"SignupBtnUser",children:"Signup"})]})})]})]})]})}const zL=e=>function(t){var n=zt((e=>e.auth.user)),i=Ge();return(0,r.useEffect)((()=>{n||i("/AdminLogin")}),[n,i]),(0,Fr.jsx)(e,{...t})};const BL=zL((function(){var e=zt((e=>e.auth.user));const[t,n]=(0,r.useState)([]),i=wP(ML,"shows");return(0,r.useEffect)((()=>{e&&(async()=>{if(!e)return void console.error("User is not logged in");const t=await VD(i);n(t.docs.map((e=>({...e.data(),id:e.id}))))})()})),(0,Fr.jsxs)("div",{className:"App",children:[(0,Fr.jsx)(Ur,{}),(0,Fr.jsx)("section",{className:"container text-center mt-5",children:(0,Fr.jsx)("div",{className:"col-sm-8 offset-sm-2 col-md-6 offset-md-3 card card-outline",children:(0,Fr.jsxs)("div",{className:"card-body",children:[(0,Fr.jsxs)("div",{className:"row",children:[(0,Fr.jsx)("div",{className:"col",children:(0,Fr.jsx)("h5",{className:"card-title Currentshow",children:"Current Shows"})}),(0,Fr.jsx)(kt,{to:"/Addshows",children:(0,Fr.jsx)("div",{className:"col d-flex justify-content-end",children:(0,Fr.jsx)("div",{className:"icon",children:(0,Fr.jsx)(Qr,{})})})})]}),t.map((e=>(0,Fr.jsx)(kt,{to:"/".concat(e.id),children:(0,Fr.jsx)("div",{className:"card mt-3",children:(0,Fr.jsxs)("div",{className:"card-body",children:[(0,Fr.jsx)("img",{src:e.image,alt:e.title,className:"card-img-top mb-3"}),(0,Fr.jsxs)("h5",{className:"card-title",children:[e.title," ",e.showTimes," ",e.startDate," to ",e.endDate]})]})})},e.id)))]})})})]})})),WL={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let HL;const KL=new Uint8Array(16);function GL(){if(!HL&&(HL="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!HL))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return HL(KL)}const QL=[];for(let n=0;n<256;++n)QL.push((n+256).toString(16).slice(1));function YL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return QL[e[t+0]]+QL[e[t+1]]+QL[e[t+2]]+QL[e[t+3]]+"-"+QL[e[t+4]]+QL[e[t+5]]+"-"+QL[e[t+6]]+QL[e[t+7]]+"-"+QL[e[t+8]]+QL[e[t+9]]+"-"+QL[e[t+10]]+QL[e[t+11]]+QL[e[t+12]]+QL[e[t+13]]+QL[e[t+14]]+QL[e[t+15]]}const $L=function(e,t,n){if(WL.randomUUID&&!t&&!e)return WL.randomUUID();const r=(e=e||{}).random||(e.rng||GL)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return YL(r)};const JL=zL((function(){var e=zt((e=>e.auth.user));const t=Ge(),[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)([]),[a,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[h,d]=(0,r.useState)(""),f=wP(ML,"shows"),p=(m=FL,g="image/".concat(h.title+$L()),xL(m=Yi(m),g));var m,g;return(0,Fr.jsxs)("div",{className:"App AddShowSec",children:[(0,Fr.jsx)(Ur,{}),(0,Fr.jsx)("div",{className:"container AddShowsForm mt-5",children:(0,Fr.jsxs)("form",{className:"col-sm-8 offset-sm-2 col-md-6 offset-md-3 card car",children:[(0,Fr.jsx)("h2",{className:"headingaddshow text-center pt-3 pb-4",children:"Add Show"}),(0,Fr.jsxs)("div",{className:"form-group mb-4",children:[(0,Fr.jsx)("label",{className:"AddShows-Labelname",children:"Movie Name:"}),(0,Fr.jsx)("input",{type:"text",className:"form-control",pattern:"^[A-Za-z0-9]{3,16}$",required:!0,value:n,onChange:e=>{i(e.target.value)}})]}),(0,Fr.jsxs)("div",{className:"form-group overflow-auto d-flex",children:[(0,Fr.jsx)("label",{className:"AddShows-Labelname",children:"Show Times:"}),["11:00am","2:30pm","6:00pm","9:30pm"].map((e=>(0,Fr.jsxs)("div",{className:"form-check ml-2",children:[(0,Fr.jsx)("input",{type:"checkbox",className:"form-check-input",id:"showTime-".concat(e),name:"showTime-".concat(e),checked:s.includes(e),onChange:()=>(e=>{const t=s.includes(e);o(t?t=>t.filter((t=>t!==e)):t=>[...t,e])})(e)}),(0,Fr.jsx)("label",{className:"Showtimelabel form-check-label",htmlFor:"showTime-".concat(e),children:e})]},e)))]}),(0,Fr.jsxs)("div",{className:"form-group",children:[(0,Fr.jsx)("label",{className:"AddShows-Labelname",htmlFor:"startDate",children:"Start Date:"}),(0,Fr.jsx)("input",{type:"date",className:"form-control",id:"startDate",name:"startDate",value:a,onChange:e=>{l(e.target.value)},required:!0})]}),(0,Fr.jsxs)("div",{className:"form-group",children:[(0,Fr.jsx)("label",{className:"AddShows-Labelname",htmlFor:"endDate",children:"End Date:"}),(0,Fr.jsx)("input",{type:"date",className:"form-control",id:"endDate",name:"endDate",value:c,onChange:e=>{u(e.target.value)},required:!0})]}),(0,Fr.jsxs)("div",{className:"AddShows-Labelname form-group",children:[(0,Fr.jsx)("label",{htmlFor:"image",children:"Upload Image:"}),(0,Fr.jsx)("input",{type:"file",className:"form-control-file",id:"image",name:"image",onChange:e=>{d(e.target.files[0])},required:!0})]}),(0,Fr.jsx)("div",{className:"form-group mt-2 pb-2",children:(0,Fr.jsx)("input",{type:"submit",className:"btn btn-block CreateAccount",value:"Add",onClick:async()=>{if(!e)return void alert("User is not logged in");const r={title:n,showTimes:s,startDate:a,endDate:c};try{await WD(f,r),function(e,t,n){TL(e=Yi(e),t,n)}(p,h),i(""),o([]),l(""),u(""),t("/Shows")}catch(Ph){alert("Error adding show:",Ph)}}})})]})})]})})),XL=function(e,t){return re({basename:null==t?void 0:t.basename,future:ct({},null==t?void 0:t.future,{v7_prependBasename:!0}),history:(n={window:null==t?void 0:t.window},void 0===n&&(n={}),g((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,n)),hydrationData:(null==t?void 0:t.hydrationData)||ft(),routes:e,mapRouteProperties:lt,window:null==t?void 0:t.window}).initialize();var n}([{path:"/",element:(0,Fr.jsx)(jr,{})},{path:"/AboutUs",element:(0,Fr.jsx)(Vr,{})},{path:"/Signup",element:(0,Fr.jsx)(jL,{})},{path:"/AdminLogin",element:(0,Fr.jsx)(VL,{})},{path:"/UserLogin",element:(0,Fr.jsx)(qL,{})},{path:"/Shows",element:(0,Fr.jsx)(BL,{})},{path:"/Addshows",element:(0,Fr.jsx)(JL,{})}]);const ZL=function(e){const t=Xt();return(0,r.useEffect)((()=>{t(Or())}),[t]),e.children},eM=e=>{e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))};s.createRoot(document.getElementById("root")).render((0,Fr.jsx)(r.StrictMode,{children:(0,Fr.jsx)(Gt,{store:Mr,children:(0,Fr.jsx)(ZL,{children:(0,Fr.jsx)(bt,{router:XL})})})})),eM()})()})();
//# sourceMappingURL=main.97579dfc.js.map